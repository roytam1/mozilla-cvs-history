@echo off

REM This script generates the DEF file for the control DLL depending on
REM what has been set to go into it

echo ; mozctl.def : Declares the module parameters.   > %1
echo ; This file was autogenerated by mkctldef.bat!     >> %1
echo.                                                   >> %1
echo LIBRARY      "npmozctl.DLL"                        >> %1
echo EXPORTS                                            >> %1
echo     ; ActiveX exports                              >> %1
echo     DllCanUnloadNow        @100 PRIVATE            >> %1
echo     DllGetClassObject      @101 PRIVATE            >> %1
echo     DllRegisterServer      @102 PRIVATE            >> %1
echo     DllUnregisterServer    @103 PRIVATE            >> %1
echo.                                                   >> %1

:test_plugin
if NOT "%MOZ_ACTIVEX_PLUGIN_SUPPORT%"=="1" goto test_control
echo     ; Plugin exports                               >> %1
echo     NP_GetEntryPoints   @1                         >> %1
echo     NP_Initialize       @2                         >> %1
echo     NP_Shutdown         @3                         >> %1
echo     ; NSGetFactory		@10                         >> %1

:test_control
if NOT "%MOT_ACTIVEX_CONTROL_SUPPORT%"=="1" goto end


:end