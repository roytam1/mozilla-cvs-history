<?xml version="1.0"?> 
<?xml-stylesheet href="chrome://global/skin/" type="text/css"?> 

<!DOCTYPE window SYSTEM "chrome://browser/locale/pref/pref.dtd" >

<dialog id="prefDialog" 
        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
        title="&prefWindow.title;" 
        style="&prefWindow.size;"
        windowtype="mozilla:preferences"
        buttons="accept,cancel,help"
        onload="Startup();"
        ondialogaccept="return hPrefWindow.onOK(event);"
        ondialogcancel="return hPrefWindow.onCancel(event);"
        ondialoghelp="return doHelpButton(event)"
        persist="screenX screenY"> 

  <script>
  <![CDATA[

  var hPrefWindow = null;

  /** General startup routine for preferences dialog. 
   *  Place all necessary modifications to pref tree here. 
   **/
  function Startup()
    {
      hPrefWindow = new nsPrefWindow('panelFrame');  
      
      if( !hPrefWindow )
        throw "failed to create prefwindow";

      hPrefWindow.init();

      // If this call worked, we could center the window here:
      // centerWindowOnScreen();
      
    }
  
  ]]>
  
  </script>        
        
  <stringbundle id="bundle_prefutilities"
               src="chrome://browser/locale/pref/prefutilities.properties"/>
  <script type="application/x-javascript" src="chrome://global/content/nsWidgetStateManager.js"/>
  <script type="application/x-javascript" src="chrome://browser/content/pref/nsPrefWindow.js"/>
  <script type="application/x-javascript" src="chrome://browser/content/pref/pref-help.js"/>
  <script type="application/x-javascript" src="chrome://help/content/contextHelp.js"/>

  <hbox flex="1">
    <tree id="prefsTree" seltype="single" hidecolumnpicker="true" style="width: 13em;"
              onselect="if( hPrefWindow ) hPrefWindow.switchPage();">
      <treecols>
        <treecol id="categoryCol" flex="1" hideheader="true" primary="true"/>
      </treecols>
    
      <treechildren id="panelChildren">
        <treeitem id="navigator">
          <treerow>
            <treecell url="chrome://browser/content/pref/pref-navigator.xul" label="&navigator.label;"/>
          </treerow>
        </treeitem>
    
        <treeitem>
          <treerow>
            <treecell url="chrome://browser/content/pref/pref-fonts.xul" label="&fonts.label;"/>
          </treerow>
        </treeitem>
    
        <treeitem id="themes-panel">
          <treerow>
            <treecell url="chrome://browser/content/pref/pref-themes.xul" label="&themes.label;"/>
          </treerow>
        </treeitem>
    
        <!-- XXX remove this when overlays.rdf works for navigator -->
    
        <treeitem>
          <treerow>
            <treecell url="chrome://browser/content/pref/pref-privacy.xul" label="&privacy.label;" />
          </treerow>
        </treeitem>
    
        <treeitem>
          <treerow>
            <treecell url="chrome://browser/content/pref/pref-connection.xul" label="&connection.label;" />
          </treerow>
        </treeitem>
    
    
        <treeitem id="advancedItem" container="true">
          <treerow>
            <treecell url="chrome://browser/content/pref/pref-advanced.xul" label="&advance.label;"/>
          </treerow>
          <treechildren id="advancedChildren">
            <treeitem>
              <treerow>
                <treecell url="chrome://browser/content/pref/pref-images.xul" label="&images.label;"/>
              </treerow>
            </treeitem>
    
            <treeitem>
              <treerow>
                <treecell url="chrome://browser/content/pref/pref-scripts.xul" label="&scriptsAndWindows.label;"/> 
              </treerow>
            </treeitem>
            <treeitem>
              <treerow>
                <treecell url="chrome://browser/content/pref/pref-tabs.xul" label="&tabs.label;"/> 
              </treerow>
            </treeitem>
#ifdef XP_WIN
            <treeitem id="winhooks">
              <treerow>
                <treecell url="chrome://browser/content/pref/pref-winhooks.xul" label="&winhooks.label;"/>
              </treerow>
            </treeitem> 
#endif
          </treechildren>
        </treeitem>
      </treechildren>
    </tree>
    <vbox flex="1">
      <dialogheader id="header"/>
      <iframe id="panelFrame" name="panelFrame" style="width: 0px" flex="1"/>
   </vbox>
  </hbox>

   <script type="application/x-javascript">
    <![CDATA[
      if(window.arguments && window.arguments[0]) {
        document.getElementById("panelFrame").setAttribute("src", window.arguments[0] );
        document.getElementById("panelFrame").setAttribute("tag", window.arguments[0] );
      }
      else {
        document.getElementById("panelFrame").setAttribute("src", "chrome://browser/content/pref/pref-navigator.xul" );
        document.getElementById("panelFrame").setAttribute("tag", "chrome://browser/content/pref/pref-navigator.xul" );
      }
    ]]>
    </script>

  <separator/>
     
</dialog>
