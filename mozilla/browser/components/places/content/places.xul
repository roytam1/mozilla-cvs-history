<?xml version="1.0"?>

<?xml-stylesheet href="chrome://browser/content/places/places.css"?>

<?xml-stylesheet href="chrome://global/skin/"?>
<?xml-stylesheet href="chrome://browser/skin/places/places.css"?>

<!DOCTYPE window SYSTEM "chrome://browser/locale/places/places.dtd">

<window id="places" title="&places.title;" 
        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
        onload="PlacesPage.init();" onunload="PlacesPage.uninit();">
  
  <script type="application/x-javascript"
          src="chrome://browser/content/places/controller.js"/>
  <script type="application/x-javascript"
          src="chrome://browser/content/places/places.js"/>
  <!-- ew. -->
  <script type="application/x-javascript"
          src="chrome://global/content/nsDragAndDrop.js"/>
  
  <stringbundleset id="stringbundles">
    <stringbundle id="placeBundle" src="chrome://browser/locale/places/places.properties"/>
    <stringbundle id="brandBundle" src="chrome://branding/locale/brand.properties"/>
  </stringbundleset>

#include commands.inc

  <keyset id="placesKeyset">
    <key id="placesKey_find" command="placesCmd_find" key="f" modifiers="accel"/>
    <key id="placesKey_select:all" command="placesCmd_select:all" key="&cmd.select_all.key;" modifiers="accel"/>
    <key id="placesKey_edit:cut" command="placesCmd_edit:cut" key="&cmd.edit_cut.key;" modifiers="accel"/>
    <key id="placesKey_edit:copy" command="placesCmd_edit:copy" key="&cmd.edit_copy.key;" modifiers="accel"/>
    <key id="placesKey_edit:paste" command="placesCmd_edit:paste" key="&cmd.edit_paste.key;" modifiers="accel"/>
    <key id="placesKey_edit:delete" command="placesCmd_edit:delete" keycode="VK_DELETE"/>
    <key id="placesKey_open" command="placesCmd_open" keycode="VK_ENTER"/>
    <key id="placesKey_open:window" command="placesCmd_open:window" keycode="VK_ENTER" modifiers="shift"/>
    <key id="placesKey_open:tab" oncommand="placesCmd_open:tab" keycode="VK_ENTER" modifiers="accel"/>
    <key id="placesKey_show:info" oncommand="placesCmd_show:info" key="&cmd.show_info.key;" modifiers="accel"/>
    <key id="placesKey_rename" oncommand="placesCmd_rename" keycode="VK_F2"/>
    <key id="placesKey_reload" oncommand="placesCmd_reload" key="&cmd.reload.key;" modifiers="accel"/>
  </keyset>
  
  <popupset id="placesPopupset">
#include context.inc
  </popupset>
  
  <hbox flex="1" id="placesView">
    <vbox>
      <hbox align="center" id="searchbar">
        <textbox id="searchFilter" flex="3" style="width: 0px;" timeout="500"
                 oncommand="PlacesPage.search(this.value);" 
                 collection="all" persist="collection"
                 onfocus="PlacesSearchBox.onFocus();" onblur="PlacesSearchBox.onBlur();">
          <button type="menu" class="filterList" id="filterList_history">
            <menupopup>
              <menuitem label="&search.all.label;" accesskey="&search.all.accesskey;"
                        type="radio" name="collection" value="all" 
                        checked="true" default="true"/>
              <menuitem label="&search.collection.label;" accesskey="&search.collection.accesskey;"
                        type="radio" name="collection" value="collection"/>
            </menupopup>
          </button>
        </textbox>
      </hbox>
      <vbox id="placesListContainer" flex="1">
        <tree id="placesList" class="placesTree" flex="1" type="places" 
              hidecolumnpicker="true" context="placesContext"
              onselect="PlacesPage.placeSelected(event);"
              seltype="single">
          <treecols>
            <treecol id="title" flex="1" primary="true" hideheader="true"/>
          </treecols>
          <treechildren id="placesListChildren" view="placesList"  flex="1"/>
        </tree>
      </vbox>
      <vbox id="historyCalendar" 
            onselectionchanged="return PlacesPage.rangeSelected()"/>
      <hbox class="commands">
        <button id="newFolder" view="placesList" command="placesCmd_new:folder"/>
      </hbox>
    </vbox>
    <splitter id="splitter"/>
    <vbox flex="4">
      <deck id="content" flex="1">
        <vbox flex="1">
          <hbox id="titlebar" align="center">
            <label id="showingPrefix"/>
            <label id="contentTitle"/>
            <spacer flex="1"/>
            <hbox id="searchModifiers" hidden="true" align="center">
              <button id="saveSearch" class="small" 
                      label="&saveSearch.label;" accesskey="&saveSearch.accesskey;"
                      command="placesCmd_search:save"/>
              <button class="small"
                      label="&moreCriteria.label;"
                      command="placesCmd_search:moreCriteria"/>
            </hbox>
          </hbox>
          <tree id="placeContent" class="placesTree" context="placesContext" 
                flex="1" query="" type="places" 
                ondblclick="PlacesController.mouseLoadURI(event);"
                onplacestreereloaded="PlacesPage.onContentChanged();">
            <treecols>
              <treecol label="&col.title.label;" id="title" flex="5" primary="true" 
                       persist="width hidden ordinal sortActive sortDirection"/>
              <splitter class="tree-splitter"/>
              <treecol label="&col.url.label;" id="url" flex="5" 
                       persist="width hidden ordinal sortActive sortDirection"/>
              <splitter class="tree-splitter"/>
              <treecol label="&col.lastvisit.label;" id="date" flex="1" 
                       persist="width hidden ordinal sortActive sortDirection"/>
              <splitter class="tree-splitter"/>
              <treecol label="&col.visitcount.label;" id="visitCount" flex="1" hidden="true" 
                       persist="width hidden ordinal sortActive sortDirection"/>
            </treecols>
            <treechildren id="placeContentChildren" view="placeContent" flex="1"/>
          </tree>
        </vbox>
      </deck>
      <hbox>
        <deck id="commandBar" flex="1">
          <hbox class="commands" id="commands_bookmark" flex="1">
            <button id="newFolder" view="placeContent" command="placesCmd_new:folder"/>
            <spacer flex="1"/>
            <button id="saveSearch_bookmark" command="placesCmd_saveSearch" hidden="true"/>
          </hbox>
          <hbox class="commands" id="commands_history" flex="1">
            <button id="groupBy_site" class="commandGroupButton first" 
                    view="placeContent" command="placesCmd_groupby:site"/>
            <spacer class="groupSpacer"/>
            <button id="groupBy_page" class="commandGroupButton last" 
                    view="placeContent" command="placesCmd_groupby:page"/>
            <spacer flex="1"/>
            <button id="saveSearch_history" command="placesCmd_saveSearch" hidden="true"/>
          </hbox>
          <hbox class="commands" id="commands_feed" flex="1">
            <button id="subscribe" command="placesCmd_new:folder"/>
            <separator/>
            <button id="groupOption0" class="commandGroupButton first" 
                    view="placeContent" command="placesCmd_groupby:site"/>
            <spacer class="groupSpacer"/>
            <button id="groupOption1" class="commandGroupButton last" 
                    view="placeContent" command="placesCmd_groupby:page"/>
            <spacer flex="1"/>
            <button id="saveSearch_feed" command="placesCmd_saveSearch" hidden="true"/>
          </hbox>
        </deck>
        <resizer dir="bottomright"/>
      </hbox>
    </vbox>
  </hbox>
</window>

