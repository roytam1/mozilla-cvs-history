<?xml version="1.0"?>

<?xml-stylesheet href="chrome://global/skin/"?>
<?xml-stylesheet href="chrome://browser/skin/places/places.css"?>

<!DOCTYPE window SYSTEM "chrome://browser/locale/places/places.dtd">

<window id="places"
        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
        onload="PlacesPage.init();" onunload="PlacesPage.uninit();">
  
  <script type="application/x-javascript"
          src="chrome://browser/content/places/controller.js"/>
  <script type="application/x-javascript"
          src="chrome://browser/content/places/places.js"/>
  
  <commandset id="placesCommands" events="*" commandupdater="true">
    <command id="placesCmd_find" label="&cmd.find.label;" accesskey="&cmd.find.accesskey;"/>
    <command id="placesCmd_export" label="&cmd.export.label;" accesskey="&cmd.export.accesskey;"/>
    <command id="placesCmd_import"/>
    <command id="placesCmd_select:all" label="&cmd.select_all.label;" accesskey="&cmd.select_all.accesskey;"/>
    <commandset readonly="true">
      <command id="placesCmd_edit:copy" label="&cmd.edit_copy.label;" accesskey="&cmd.edit_copy.accesskey;"/>
      <command id="placesCmd_show:info" 
#ifdef XP_WIN
               label="&cmd.show_infoWin.label;" accesskey="&cmd.show_infoWin.accesskey;"/>
#else
               label="&cmd.show_infoMac.label;" accesskey="&cmd.show_infoMac.accesskey;"/>
#endif
    </commandset>
    <commandset>
      <command id="placesCmd_edit:cut" label="&cmd.edit_cut.label;" accesskey="&cmd.edit_cut.accesskey;"/>
      <command id="placesCmd_edit:paste" label="&cmd.edit_paste.label;" accesskey="&cmd.edit_paste.accesskey;"/>
      <command id="placesCmd_edit:delete" label="&cmd.edit_delete.label;" accesskey="&cmd.edit_delete.accesskey;"/>
      <command id="placesCmd_rename" label="&cmd.rename.label;" accesskey="&cmd.rename.accesskey;"/>
    </commandset>
    <commandset type="link" readonly="true">
      <command id="placesCmd_open" label="&cmd.open.label;" accesskey="&cmd.open.accesskey;"
               oncommand="PlacesPage.openLinkInCurrentWindow();"/>
      <command id="placesCmd_open:window" label="&cmd.open_window.label;" accesskey="&cmd.open_window.accesskey;"
               oncommand="PlacesPage.openLinkInNewWindow();"/>
      <command id="placesCmd_open:tab" label="&cmd.open_tab.label;" accesskey="&cmd.open_tab.accesskey;"
               oncommand="PlacesPage.openLinkInNewTab();"/>
    </commandset>
    <commandset type="link">
    </commandset>
    <commandset type="container" readonly="true">
      <command id="placesCmd_open:tabs" label="&cmd.open_tabs.label;" accesskey="&cmd.open_tabs.accesskey;"/>
      <command id="placesCmd_groupby:site" label="&cmd.groupby_site.label;" accesskey="&cmd.groupby_site.accesskey;"/>
      <command id="placesCmd_groupby:page" label="&cmd.groupby_page.label;" accesskey="&cmd.groupby_page.accesskey;"/>
      <command id="placesCmd_groupby:feed" label="&cmd.groupby_feed.label;" accesskey="&cmd.groupby_feed.accesskey;"/>
      <command id="placesCmd_groupby:post" label="&cmd.groupby_post.label;" accesskey="&cmd.groupby_post.accesskey;"/>
    </commandset>
    <commandset type="container">
      <command id="placesCmd_sortby:name" label="&cmd.sortby_name.label;" accesskey="&cmd.sortby_name.accesskey;"/>
      <command id="placesCmd_new:folder" label="&cmd.new_folder.label;" accesskey="&cmd.new_folder.accesskey;"/>
      <command id="placesCmd_new:separator" label="&cmd.new_separator.label;" accesskey="&cmd.new_separator.accesskey;"/>
    </commandset>
    <commandset type="container|feed" readonly="true">
      <command id="placesCmd_reload" label="&cmd.reload.label;" accesskey="&cmd.reload.accesskey;"/>
    </commandset>
  </commandset>
  
  <keyset id="placesKeyset">
    <key id="placesKey_find" command="placesCmd_find" key="f" modifiers="accel"/>
    <key id="placesKey_select:all" command="placesCmd_select:all" key="&cmd.select_all.key;" modifiers="accel"/>
    <key id="placesKey_edit:cut" command="placesCmd_edit:cut" key="&cmd.edit_cut.key;" modifiers="accel"/>
    <key id="placesKey_edit:copy" command="placesCmd_edit:copy" key="&cmd.edit_copy.key;" modifiers="accel"/>
    <key id="placesKey_edit:paste" command="placesCmd_edit:paste" key="&cmd.edit_paste.key;" modifiers="accel"/>
    <key id="placesKey_edit:delete" command="placesCmd_edit:delete" keycode="VK_DELETE"/>
    <key id="placesKey_open" command="placesCmd_open"/>
    <key id="placesKey_open:window" command="placesCmd_open:window" keycode="VK_ENTER" modifiers="shift"/>
    <key id="placesKey_open:tab" oncommand="placesCmd_open:tab" keycode="VK_ENTER" modifiers="accel"/>
    <key id="placesKey_show:info" oncommand="placesCmd_show:info" key="&cmd.show_info.key;" modifiers="accel"/>
    <key id="placesKey_rename" oncommand="placesCmd_rename" keycode="VK_F2"/>
    <key id="placesKey_reload" oncommand="placesCmd_reload" key="&cmd.reload.key;" modifiers="accel"/>
  </keyset>
  
  <popupset id="placesPopupset">
    <popup id="placesContext" 
           onpopupshowing="return PlacesPage.controller.buildContextMenu(this);">
      <menuitem id="placesContext_open" command="placesCmd_open" default="true"/>
      <menuitem id="placesContext_open:newwindow" command="placesCmd_open:window"/>
      <menuitem id="placesContext_open:newtab" command="placesCmd_open:tab"/>
      <menuseparator id="placesContext_openSeparator"/>
      <menuitem id="placesContext_new:folder" command="placesCmd_new:folder"/>
      <menuitem id="placesContext_new:separator" command="placesCmd_new:separator"/>
      <menuseparator id="placesContext_newSeparator"/>
      <menuitem id="placesContext_edit:cut" command="placesCmd_edit:cut"/>
      <menuitem id="placesContext_edit:copy" command="placesCmd_edit:copy"/>
      <menuitem id="placesContext_edit:paste" command="placesCmd_edit:paste"/>
      <menuitem id="placesContext_edit:delete" command="placesCmd_edit:delete"/>
      <menuseparator id="placesContext_editSeparator"/>
      <menuitem id="placesContext_select:all" command="placesCmd_select:all"/>
      <menuseparator id="placesContext_selectSeparator"/>
      <menuitem id="placesContext_reload" command="placesCmd_reload"/>
      <menuitem id="placesContext_sortby:name" command="placesCmd_sortby:name"/>
      <menuseparator id="placesContext_sortSeparator"/>
      <menuitem id="placesContext_show:info" command="placesCmd_show:info"/>
    </popup>
  </popupset>
  
  <hbox flex="1" id="placesView">
    <vbox flex="1">
      <tree id="placesList" class="placesTree" flex="1"
            hidecolumnpicker="true" context="placesContext">
        <treecols>
          <treecol id="title" flex="1" primary="true" hideheader="true"/>
        </treecols>
        <treechildren id="placesListChildren" flex="1"/>
      </tree>
      <hbox class="commands">
        <button id="newPlace" command="placesCmd_new:folder"/>
      </hbox>
    </vbox>
    <splitter id="splitter"/>
    <vbox flex="4">
      <hbox align="center">
        <label accesskey="&search.accesskey;" control="search">&search.label;</label>
        <textbox id="searchFilter" flex="3" style="width: 0px;" timeout="500"
                 oncommand="PlacesPage.applyFilter(this.value);" 
                 collection="all" persist="collection">
          <button type="menu" id="filterCollection">
            <menupopup oncommand="PlacesPage.setFilterCollection(event.target.getAttribute('value'));">
              <menuitem label="&search.collection.label;" 
                        accesskey="&search.collection.accesskey;"
                        type="radio" name="collection" value="collection"/>
              <menuitem label="&search.all.label;" 
                        accesskey="&search.all.accesskey;"
                        type="radio" name="collection" value="all"/>
            </menupopup>
          </button>
        </textbox>
        <button id="showAdvancedSearch" 
                label="&advancedSearch.label;" accesskey="&advancedSearch.accesskey;" 
                oncommand="PlacesPage.showAdvancedOptions();"/>
        <spacer flex="2"/>
      </hbox>
      <deck id="content" flex="1">
        <vbox flex="1">
          <tree id="placeContent" class="placesTree" context="placesContext" flex="1"
                ondblclick="PlacesPage.mouseLoadURIInBrowser(event);">
            <treecols>
              <treecol label="&col.title.label;" id="title" flex="1" primary="true"/>
              <treecol label="&col.url.label;" id="url" flex="1"/>
            </treecols>
            <treechildren id="placesContentChildren" flex="1"/>
          </tree>
          <hbox>
            <deck id="commands" flex="1">
              <hbox class="commands" id="commands_bookmark" flex="1">
                <button id="newFolder" command="placesCmd_new:folder"/>
                <spacer flex="1"/>
                <button id="saveSearch_bookmark" command="placesCmd_saveSearch" hidden="true"/>
              </hbox>
              <hbox class="commands" id="commands_history" flex="1">
                <button id="groupBy_site"  command="placesCmd_groupby:site"/>
                <button id="groupBy_page" command="placesCmd_groupby:page"/>
                <spacer flex="1"/>
                <button id="saveSearch_history" command="placesCmd_saveSearch" hidden="true"/>
              </hbox>
              <hbox class="commands" id="commands_feed" flex="1">
                <button id="subscribe" command="placesCmd_new:folder"/>
                <separator/>
                <button id="groupOption0"  command="placesCmd_groupby:site"/>
                <button id="groupOption1" command="placesCmd_groupby:page"/>
                <spacer flex="1"/>
                <button id="saveSearch_feed" command="placesCmd_saveSearch" hidden="true"/>
              </hbox>
            </deck>
            <resizer dir="bottomright"/>
          </hbox>
        </vbox>
      </deck>
    </vbox>
  </hbox>

</window>

