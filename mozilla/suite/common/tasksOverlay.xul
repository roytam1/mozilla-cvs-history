<?xml version="1.0"?> 
<?xml-stylesheet href="chrome://communicator/skin/tasksOverlay.css" type="text/css"?> 
<?xul-overlay href="chrome://communicator/content/PSMTaskMenu.xul"?>

<!DOCTYPE window [
<!ENTITY % brandDTD SYSTEM "chrome://global/locale/brand.dtd" >
%brandDTD;
<!ENTITY % tasksDTD SYSTEM "chrome://communicator/locale/tasksOverlay.dtd" >
%tasksDTD;
]>

<?xul-overlay href="chrome://communicator/content/taskbarOverlay.xul"?>

<overlay id="tasksOverlay"
      xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

<script language="JavaScript" src="chrome://communicator/content/tasksOverlay.js"/>



<keyset id="keyset">
  <key id="key_navigator"   xulkey="true" key="&navigatorCmd.commandkey;"   observes="Tasks:Navigator"/>
  <key id="key_editor"      xulkey="true" key="&editorCmd.commandkey;"      observes="Tasks:Editor"/>
  <key id="key_addressbook" xulkey="true" shift="true" 
       key="&addressBookCmd.commandkey;" observes="Tasks:AddressBook"/>
</keyset>

<broadcasterset id="broadcasterset">
  <broadcaster id="Tasks:Navigator" value="&navigatorCmd.label;" oncommand="toNavigator();"/>
  <broadcaster id="Tasks:Editor"    value="&editorCmd.label;"    oncommand="toEditor();"/>
  <broadcaster id="Tasks:AddressBook" value="&addressBookCmd.label;"    oncommand="toAddressBook();"/>
</broadcasterset>


      <!-- Tasks Menu -->
      <menu id="tasksMenu" value="&tasksMenu.label;" accesskey="&tasksMenu.accesskey;" datasources="rdf:window-mediator" ref="NC:WindowMediatorRoot">
        <template>
          <rule>
            <menupopup>
              <menuitem uri="rdf:*" value="rdf:http://home.netscape.com/NC-rdf#Name" oncommand="ShowWindowFromResource(event.target)"/>
            </menupopup>
          </rule>
        </template>

        <menupopup id="taskPopup">
          <menuitem  accesskey="&navigatorCmd.accesskey;" key="key_navigator" observes="Tasks:Navigator"/>
          <menuitem  accesskey="&editorCmd.accesskey;" key="key_editor" observes="Tasks:Editor" />
          <menuseparator/>

          <menuitem accesskey="&addressBookCmd.accesskey;" key="key_addressbook" observes="Tasks:AddressBook"/>
          <menuseparator/>

          <menu value="&walletMenu.label;" accesskey="&walletMenu.accesskey;">
            <menupopup  id="personalManagers"
                        PasswordNotChanged = "&PasswordNotChanged;"
                        PasswordExpired = "&PasswordExpired;"
                        PasswordNotExpired = "&PasswordNotExpired;"
                        AllDataWillBeCleared = "&AllDataWillBeCleared;"
                        UnableToCapture = "&UnableToCapture;"
                        Captured = "&Captured;"
                        NotCaptured = "&NotCaptured;"
                        noPrefills = "&noPrefills;"
                        oncreate="CheckForWalletAndImage()"> 
              <menu value="&walletPasswordManager.label;" accesskey="&walletPasswordManager.accesskey;">
                <menupopup>
                  <menuitem value="&walletDisplaySignonsCmd.label;" accesskey="&walletDisplaySignonsCmd.accesskey;" oncommand="WalletDialog('signon');"/> 
                  <menuitem value="&walletChangePasswordCmd.label;" accesskey="&walletChangePasswordCmd.accesskey;" oncommand="WalletAction('password');"/>
                  <menuitem value="&walletExpirePasswordCmd.label;" accesskey="&walletExpirePasswordCmd.accesskey;" oncommand="WalletAction('expire');"/>
                  <menuseparator/>
                  <menuitem value="&walletEncryptCmd.label;" id="encrypt"
                    accesskey="&walletEncryptCmd.accesskey;" 
                    oncommand="WalletAction('encrypt');"/>
                  <menuitem value="&walletObscureCmd.label;" id="obscure"
                    accesskey="&walletObscureCmd.accesskey;" 
                    oncommand="WalletAction('obscure');"/>
                  <menuitem value="&walletClearCmd.label;" id="clear"
                    accesskey="&walletClearCmd.accesskey;" 
                    oncommand="WalletAction('clear');"/>
                </menupopup>
              </menu>
              <menu value="&walletFormManager.label;" accesskey="&walletFormManager.accesskey;" id="wallet">
                <menupopup>
                  <menuitem value="&walletContentsCmd.label;" accesskey="&walletContentsCmd.accesskey;" id="walleteditor" oncommand="WalletDialog('wallet');"/> 
                  <menuitem value="&walletSitesCmd.label;" accesskey="&walletSitesCmd.accesskey;" id="walletsites" oncommand="WalletDialog('walletsites');"/> 
                  <menuseparator/>
<!--
                  <menuitem value="&walletSafeFillCmd.label;" accesskey="&walletSafeFillCmd.accesskey;" id="walletSafeFill" oncommand="WalletAction('safefill');"/> 
                  <menuitem value="&walletQuickFillCmd.label;" accesskey="&walletQuickFillCmd.accesskey;" id="walletQuickFill" oncommand="WalletAction('quickfill');"/> 
                  <menuitem value="&walletRequestToCaptureCmd.label;" accesskey="&walletRequestToCaptureCmd.accesskey;" id="walletCapture" oncommand="WalletAction('capture');"/> 
                  <menuseparator/>
-->
                  <menuitem value="&walletInterviewCmd.label;" accesskey="&walletInterviewCmd.accesskey;" id="walletInterview" oncommand="WalletDialog('interview');"/> 
                  <menuitem value="&walletSamplesCmd.label;" accesskey="&walletSamplesCmd.accesskey;" id="walletSamples" oncommand="WalletDialog('samples');"/> 
                </menupopup>
              </menu>
              <menu value="&walletCookieManager.label;" accesskey="&walletCookieManager.accesskey;">
                <menupopup>
                  <menuitem value="&walletDisplayCookiesCmd.label;"
                            accesskey="&walletDisplayCookiesCmd.accesskey;" 
                            oncommand="WalletDialog('cookie');"/> 
                  <menuitem id="AllowCookies" value="&walletAllowCookiesCmd.label;"
                            accesskey="&walletAllowCookiesCmd.accesskey;" 
                            msg="&walletAllowCookiesMsg.label;"
                            oncommand="WalletAction('cookieAllow');"/> 
                  <menuitem id="BlockCookies" value="&walletBlockCookiesCmd.label;"
                            accesskey="&walletBlockCookiesCmd.accesskey;" 
                            msg="&walletBlockCookiesMsg.label;"
                            oncommand="WalletAction('cookieBlock');"/> 
                </menupopup>
              </menu>
              <menu value="&walletImageManager.label;" accesskey="&walletImageManager.accesskey;" id="image">
                <menupopup>
                  <menuitem value="&walletDisplayImagesCmd.label;"
                            accesskey="&walletDisplayImagesCmd.accesskey;" 
                            oncommand="WalletDialog('image');"/> 
                  <menuitem id="AllowImages" value="&walletAllowImagesCmd.label;"
                            accesskey="&walletAllowImagesCmd.accesskey;" 
                            msg="&walletAllowImagesMsg.label;"
                            oncommand="WalletAction('imageAllow');"/> 
                  <menuitem id="BlockImages" value="&walletBlockImagesCmd.label;"
                            accesskey="&walletBlockImagesCmd.accesskey;" 
                            msg="&walletBlockImagesMsg.label;"
                            oncommand="WalletAction('imageBlock');"/> 
                </menupopup>
              </menu>
              <menuseparator/>
              <menuitem value="&walletTutorialCmd.label;" accesskey="&walletTutorialCmd.accesskey;" oncommand="WalletDialog('tutorial');"/>
            </menupopup> 
          </menu> 
          <menuseparator/>

          <menu value="&toolsMenu.label;" accesskey="&toolsMenu.accesskey;">
            <menupopup id="toolsPopup">
              <menuitem value="&historyCmd.label;" accesskey="&historyCmd.accesskey;" oncommand="toHistory()"/>
              <menuitem value="&importUtilCmd.label;" accesskey="&importUtilCmd.accesskey;" oncommand="toImport()"/>
              <menuitem value="&javaConsoleCmd.label;" accesskey="&javaConsoleCmd.accesskey;" oncommand="toJavaConsole()"/>
              <menuitem value="&javaScriptConsoleCmd.label;" accesskey="&javaScriptConsoleCmd.accesskey;" oncommand="toJavaScriptConsole();"/>
            </menupopup>
          </menu>
          <menuseparator/>

        </menupopup>
      </menu>
    
  <box id="taskbar" class="toolbar-standard chromeclass-status" persist="collapsed" style="min-width: 1px;" 
       grippytooltip="aTooltip" grippytooltiptext="&taskBar.tooltip;">
    <box id="taskButtons">
      <button class="button-toolbar-4 taskbutton" id="mini-nav" onclick="toNavigator();" 
              tooltip="aTooltip" tooltiptext="&taskNavigator.tooltip;"/>
      <button class="button-toolbar-4 taskbutton" id="mini-comp" onclick="toEditor();" 
              tooltip="aTooltip" tooltiptext="&taskComposer.tooltip;"/>
      <button class="button-toolbar-4 taskbutton" id="mini-addr" onclick="toAddressBook()"
              tooltip="aTooltip" tooltiptext="&taskAddressBook.tooltip;"/>
    </box>
    <spring id="taskbar-middle-spacer" flex="10"/>
    <box id="taskbarMenuBox"/>
    <box id="taskbarGotoMenuBox" align="right"/>
    <spring id="taskbar-right-spacer" flex="7"/>
  </box>
    
</overlay>
