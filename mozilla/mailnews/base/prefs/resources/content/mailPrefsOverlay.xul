<?xml version="1.0"?>

<!DOCTYPE overlay [
<!ENTITY % mailPrefsOverlayDTD SYSTEM "chrome://messenger/locale/mailPrefsOverlay.dtd" >
%mailPrefsOverlayDTD;
]>

<overlay id="mailPrefsOverlay"
         xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <script type="application/x-javascript">
  <![CDATA[
    var panel;
    if (panel != undefined) {
      switch(panel) 
      {
      case "chrome://communicator/content/pref/pref-appearance.xul":
        _elementIDs.push("generalStartupMail");
        _elementIDs.push("generalStartupAddressBook");
        break;
      }
    }
  ]]>
  </script>         

  <preferences id="scripts_preferences">
    <preference id="javascript.allow.mailnews"
                name="javascript.allow.mailnews"
                type="bool"
                onchange="javascriptEnabledChange();"/>
    <preference id="mailnews.message_display.allow.plugins"
                name="mailnews.message_display.allow.plugins"
                type="bool"/>
  </preferences>
  <!-- javascript toggle for mail/news -->
  <groupbox id="javascriptPreferences">
    <checkbox id="javascriptAllowMailNews"
              insertafter="javascriptAllowNavigator"
              label="&enbJsCheckMailNews.label;"
              accesskey="&enbJsCheckMailNews.accesskey;"
              preference="javascript.allow.mailnews"/>
  </groupbox>
  <!-- plugin toggle for mail/news -->
  <groupbox id="pluginPreferences" hidden="false">
    <checkbox id="pluginAllowMailNews"
              label="&enbPluginCheckMailNews.label;"
              accesskey="&enbPluginCheckMailNews.accesskey;"
              preference="mailnews.message_display.allow.plugins"/>
  </groupbox>

  <!-- mail startup toggle -->
  <groupbox id="generalStartupPreferences">           
    <checkbox id="generalStartupMail" wsm_persist="true"
              insertafter="generalStartupBrowser"
              label="&mail.label;" accesskey="&mail.accesskey;"
              pref="true" preftype="bool" prefstring="general.startup.mail"
              prefattribute="checked"/>
    <checkbox id="generalStartupAddressBook" wsm_persist="true"
              insertafter="generalStartupEditor,generalStartupMail"
              label="&addressbook.label;" accesskey="&addressbook.accesskey;"
              pref="true" preftype="bool" prefstring="general.startup.addressbook"
              prefattribute="checked"/>         
  </groupbox>

  <!-- category tree entries for mail/news -->
  <treechildren id="prefsPanelChildren">
    <treeitem container="true" id="mailnews" label="&mail.label;"
              prefpane="mail_prefs_general" insertafter="navigator"
              url="chrome://messenger/content/pref-mailnews.xul"
              helpTopic="mail_prefs_general">
      <treechildren id="messengerChildren">
        <!-- XXX Move pref panes from below to here as they are migrated -->
      </treechildren>
    </treeitem>
  </treechildren>

  <!-- category tree entries for mail/news -->
  <treechildren id="panelChildren">
    <treeitem container="true" id="mailnews" insertafter="navigator">
      <treerow>
        <treecell label="(Migrated: &mail.label;)"/>
      </treerow>
      <!-- XXX Move these up as we migrate the panels -->
      <treechildren id="messengerChildren">
        <treeitem>
          <treerow>
            <treecell url="chrome://messenger/content/pref-viewing_messages.xul" label="&viewingMessages.label;"/> 
          </treerow>
        </treeitem>
        <treeitem>
          <treerow>
            <treecell url="chrome://messenger/content/pref-notifications.xul" label="&notifications.label;"/> 
          </treerow>
        </treeitem>
        <treeitem id="mailcomposepref">
          <treerow>
            <treecell url="chrome://messenger/content/messengercompose/pref-composing_messages.xul" label="&composingMessages.label;"/> 
          </treerow>
        </treeitem>
        <treeitem>
          <treerow>
            <treecell url="chrome://messenger/content/messengercompose/pref-formatting.xul" label="&format.label;"/> 
          </treerow>
        </treeitem>
        <treeitem id="mailaddressbookpref">
          <treerow>
            <treecell url="chrome://messenger/content/addressbook/pref-addressing.xul" label="&address.label;"/> 
          </treerow>
        </treeitem>
        <treeitem>
          <treerow>
            <treecell url="chrome://messenger/content/pref-junk.xul" label="&junk.label;"/>
          </treerow>
        </treeitem>
        <treeitem id="mailtagspref">
          <treerow>
            <treecell url="chrome://messenger/content/pref-labels.xul" label="&tags.label;"/>
          </treerow>
        </treeitem>
        <treeitem>
          <treerow>
            <treecell url="chrome://messenger/content/pref-receipts.xul" label="&return.label;"/>
          </treerow>
        </treeitem>
        <treeitem>
          <treerow>
            <treecell url="chrome://messenger/content/pref-character_encoding.xul" label="&characterEncoding.label;"/> 
          </treerow>
        </treeitem>
        <treeitem>
          <treerow>
            <treecell url="chrome://messenger/content/pref-offline.xul" label="&offline.label;"/> 
          </treerow>
        </treeitem>
      </treechildren>
    </treeitem>
  </treechildren>
           
</overlay>         
