#!gmake
#
# The contents of this file are subject to the Netscape Public License
# Version 1.0 (the "NPL"); you may not use this file except in
# compliance with the NPL.  You may obtain a copy of the NPL at
# http://www.mozilla.org/NPL/
#
# Software distributed under the NPL is distributed on an "AS IS" basis,
# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the NPL
# for the specific language governing rights and limitations under the
# NPL.
#
# The Initial Developer of this code under the NPL is Netscape
# Communications Corporation.  Portions created by Netscape are
# Copyright (C) 1998 Netscape Communications Corporation.  All Rights
# Reserved.

DEPTH = ../../..
topsrcdir	= @top_srcdir@
VPATH		= @srcdir@
srcdir		= @srcdir@

include $(DEPTH)/config/autoconf.mk

MODULE=mime
LIBRARY_NAME=mime
IS_COMPONENT=1
EXPORTS = 	nsRFC822toHTMLStreamConverter.h		\
		nsMimeObjectClassAccess.h		\
		nsMimeHeaderConverter.h			\
		mimetext.h						\
		mimeleaf.h						\
		mimecth.h						\
		mimeobj.h						\
		mimei.h							\
		modmimee.h						\
		mimecont.h						\
		mimemult.h						\
		mimemsig.h						\
		mimehdrs.h						\
		modmime.h						\
		mimepbuf.h						\
		modlmime.h						\
		mimerosetta.h					\
		$(NULL)

EXPORT_RESOURCE_SAMPLES := \
		mail.css	\
		mail.js

CPPSRCS = \
		nsMimeFactory.cpp	\
		nsRFC822toHTMLStreamConverter.cpp	\
		nsMimeObjectClassAccess.cpp		\
		nsMimeHeaderConverter.cpp		\
		plugin_inst.cpp	\
		rebuffer.cpp	\
		$(NULL)

CSRCS = \
		mimecont.c	\
		mimeebod.c	\
		mimeenc.c	\
		mimeeobj.c	\
		mimehdrs.c	\
		mimei.c		\
		mimeiimg.c	\
		mimeleaf.c	\
		mimemalt.c	\
		mimemapl.c	\
		mimemdig.c	\
		mimemmix.c	\
		mimempar.c	\
		mimemrel.c	\
		mimemsg.c	\
		mimemsig.c	\
		mimemult.c	\
		mimeobj.c	\
		mimepbuf.c	\
		mimesun.c	\
		mimetenr.c	\
		mimetext.c	\
		mimethtm.c	\
		mimetpla.c	\
		mimetric.c	\
		mimeunty.c	\
		mimemoz2.c	\
		mimecth.c	\
		mimebuf.c	\
		mimecom.c	\
		comi18n.c	\
		commsg.c	\
		oldnet.c	\
		oldi18n.c	\
		oldmaddr.c	\
		oldfile.c	\
		oldxp.c		\
		$(NULL)

EXTRA_DSO_LDOPTS =	\
	-L$(DIST)/bin	\
	$(TK_LIBS) \
	-labouturl \
	-lfileurl \
	-lftpurl \
	-lgophurl \
	-lremoturl \
	-lhttpurl \
	-lsockstuburl \
	-lnetcache \
	-lmimetype \
	-lnetcnvts \
	-lnetwork \
	-lnetlib \
	-lnetutil \
	-lreg	\
	-lxpcom	\
	-lpwcac \
	-lmozdbm	\
	-lxp	\
	-lpref	\
	-ljs	\
	-lraptorbase \
	-lgmbase$(MOZ_TOOLKIT) \
	-lsecfree \
	-lraptorhtml \
	-lraptorhtmlpars	\
	-lraptorgfx	\
	-ljsdom	\
	-ljsurl	\
	-limg	\
	-lpng	\
	-ljpeg	\
	-lmozutil	\
	-lz \
	$(DIST)/lib/librdfbase_s.a \
	$(NULL)

#
# THIS WILL NEED WORK AFTER WE GET A LIBMSG MORE XP-COM-afied
#			mimedrft.c	\
# XP-COM BRIDGES


include $(topsrcdir)/config/config.mk

include $(topsrcdir)/config/rules.mk

install:: $(PROGRAM)
	$(INSTALL) $(EXPORT_RESOURCE_SAMPLES) $(DIST)/bin/res
