var srDest = @XPI_SPACEREQUIRED@;

var err = initInstall("Quality Feedback Agent", "Quality Feedback Agent", "@XPI_VERSION@");
logComment("initInstall: " + err);

var communicatorFolder = getFolder("Program");
logComment("communicatorFolder: " + communicatorFolder);

if (verifyDiskSpace(communicatorFolder, srDest))
{
    err = addDirectory("Talkback",
                   "@XPI_VERSION@",
                   "viewer",           // jar source folder
                   communicatorFolder, // target folder
                   "",                 // target subdir
                   true );             // force flag
                   
    logComment("addDirectory() returned: " + err);

    if (err==SUCCESS)
    {
        err = performInstall();
        logComment("performInstall() returned: " + err);
    }
    else
    {
        cancelInstall(err);
         logComment("cancelInstall() due to error: " + err)
    }
}
else
    cancelInstall(INSUFFICIENT_DISK_SPACE);
