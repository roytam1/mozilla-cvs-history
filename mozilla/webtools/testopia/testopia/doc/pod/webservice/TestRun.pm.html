<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>TestRun.pm</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:feedback@suse.de" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#extends">EXTENDS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#methods">METHODS</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
	<li><a href="#author">AUTHOR</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p>Bugzilla::Testopia::Webservice::TestRun</p>
<p>
</p>
<hr />
<h1><a name="extends">EXTENDS</a></h1>
<p>Bugzilla::Webservice</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>Provides methods for automated scripts to manipulate Testopia TestRuns</p>
<p>
</p>
<hr />
<h1><a name="methods">METHODS</a></h1>
<dl>
<dt><strong><a name="item_add_tag"><code>add_tag($run_ids, $tags)</code></a></strong>

<dd>
<pre>
 Description: Add one or more tags to the selected test runs.</pre>
</dd>
<dd>
<pre>
 Params:      $run_ids - Integer/Array/String: An integer or alias representing the ID in the database,
                  an arry of run_ids or aliases, or a string of comma separated run_ids.</pre>
</dd>
<dd>
<pre>
              $tags - String/Array - A single tag, an array of tags,
                  or a comma separated list of tags.</pre>
</dd>
<dd>
<pre>
 Returns:     undef/Array: undef on success or an array of hashes with failure 
              codes if a failure occured.</pre>
</dd>
<dt><strong><a name="item_create"><code>create($values)</code></a></strong>

<dd>
<pre>
 Description: Creates a new Test Run object and stores it in the database.</pre>
</dd>
<dd>
<pre>
 Params:      $values - Hash: A reference to a hash with keys and values  
              matching the fields of the test run to be created. 
  +-------------------+----------------+-----------+------------------------------------+
  | Field             | Type           | Null      | Description                        |
  +-------------------+----------------+-----------+------------------------------------+
  | plan_id           | Integer        | Required  | ID of test plan                    |
  | environment       | Integer/String | Required  | ID or Name of Environment          |
  | build             | Integer/String | Required  | ID or Name of Build                |
  | manager           | Integer/String | Required  | ID or Login of run manager         |
  | summary           | String         | Required  |                                    |
  | product_version   | String         | Optional  | Defaults to plan's version         |
  | plan_text_version | Integer        | Optional  |                                    |
  | notes             | String         | Optional  |                                    |
  | status            | Integer        | Optional  | 0:STOPPED 1: RUNNING (default 1)   |
  +-------------------+----------------+-----------+------------------------------------+</pre>
</dd>
<dd>
<pre>
 Returns:     The newly created object hash.</pre>
</dd>
<dt><strong><a name="item_get"><code>get($run_id)</code></a></strong>

<dd>
<pre>
 Description: Used to load an existing test run from the database.</pre>
</dd>
<dd>
<pre>
 Params:      $id - Integer/String: An integer representing the ID in the database
                    for this run.</pre>
</dd>
<dd>
<pre>
 Returns:     A blessed Bugzilla::Testopia::TestRun object hash</pre>
</dd>
<dt><strong><a name="item_get_change_history"><code>get_change_history($run_id)</code></a></strong>

<dd>
<pre>
 Description: Get the list of changes to the fields of this run.</pre>
</dd>
<dd>
<pre>
 Params:      $run_id - Integer/String: An integer representing the ID in the database
                    or a string representing the unique alias for this run.</pre>
</dd>
<dd>
<pre>
 Returns:     Array: An array of hashes with changed fields and their details.</pre>
</dd>
<dt><strong><a name="item_get_completion_report"><code>get_completion_report($runs)</code></a></strong>

<dd>
<pre>
 Description: Get a report of the current status of the selected runs combined.</pre>
</dd>
<dd>
<pre>
 Params:      $runs - Integer/Array/String: An integer representing the ID in the database
                    an array of integers or a comma separated list of integers.</pre>
</dd>
<dd>
<pre>
 Returns:     Hash: A hash containing counts and percentages of the combined totals of 
                    case-runs in the run. Counts only the most recently statused case-run 
                    for a given build and environment.</pre>
</dd>
<dt><strong><a name="item_get_tags"><code>get_tags($run_id)</code></a></strong>

<dd>
<pre>
 Description: Get the list of tags attached to this run.</pre>
</dd>
<dd>
<pre>
 Params:      $run_id - Integer/String: An integer representing the ID in the database
                    or a string representing the unique alias for this run.</pre>
</dd>
<dd>
<pre>
 Returns:     Array: An array of tag object hashes.</pre>
</dd>
<dt><strong><a name="item_get_test_case_runs"><code>get_test_case_runs($run_id, $current)</code></a></strong>

<dd>
<pre>
 Description: Get the list of cases that this run is linked to.</pre>
</dd>
<dd>
<pre>
 Params:      $run_id - Integer/String: An integer representing the ID in the database
                    for this run.</pre>
</dd>
<dd>
<pre>
              $current - Boolean: 1 to only include the current set (what is displayed
                    in the web page) 0: to return all, current and historical.</pre>
</dd>
<dd>
<pre>
 Returns:     Array: An array of test case object hashes.</pre>
</dd>
<dt><strong><a name="item_get_test_cases"><code>get_test_cases($run_id)</code></a></strong>

<dd>
<pre>
 Description: Get the list of cases that this run is linked to.</pre>
</dd>
<dd>
<pre>
 Params:      $run_id - Integer/String: An integer representing the ID in the database
                    for this run.</pre>
</dd>
<dd>
<pre>
 Returns:     Array: An array of test case object hashes.</pre>
</dd>
<dt><strong><a name="item_get_test_plan"><code>get_test_plan($run_id)</code></a></strong>

<dd>
<pre>
 Description: Get the plan that this run is associated with.</pre>
</dd>
<dd>
<pre>
 Params:      $run_id - Integer/String: An integer representing the ID in the database
                    for this run.</pre>
</dd>
<dd>
<pre>
 Returns:     Hash: A plan object hash.</pre>
</dd>
<dt><strong><a name="item_list"><code>list($query)</code></a></strong>

<dd>
<pre>
 Description: Performs a search and returns the resulting list of test runs.</pre>
</dd>
<dd>
<pre>
 Params:      $query - Hash: keys must match valid search fields.</pre>
</dd>
<dd>
<pre>
    +--------------------------------------------------------+
    |                 Run Search Parameters                  |
    +--------------------------------------------------------+
    |        Key          |          Valid Values            |
    | build               | String: Product Name             |
    | build_id            | Integer                          |
    | environment         | String: Product Name             |
    | environment_id      | Integer                          |
    | manager             | A bugzilla login (email address) |
    | manager_type        | (select from email_variants)     |
    | milestone           | String                           |
    | notes               | String                           |
    | notes_type          | (select from query_variants)     |
    | plan_id             | comma separated integers         |
    | product             | String: Product Name             |
    | product_id          | Integer                          |
    | run_id              | comma separated integers         |
    | run_status          | 1: RUNNING 0: STOPPED            |
    | summary             | String                           |
    | summary_type        | (select from query_variants)     |    
    | tags                | String                           |
    | tags_type           | (select from tag_variants)       |
    | type_id             | Integer                          |
    | version             | String: Product version          |
    +--------------------------------------------------------+</pre>
</dd>
<dd>
<pre>
    +--------------------------------------------------------+
    |                Paging and Sorting                      |
    +--------------------------------------------------------+
    |      Key       |            Description                |
    | dir            | &quot;ASC&quot; or &quot;DESC&quot;                       |
    | order          | field to sort by                      |
    +--------------------------------------------------------+
    | page_size      | integer: how many per page            |
    | page           | integer: page number                  |
    |            +++++++ OR +++++++                          |
    | start          | integer: Start with which record      |
    | limit          | integer: limit to how many            |
    +--------------------------------------------------------+
    | viewall        | 1: returns all records 0: first 25    |
    +--------------------------------------------------------+</pre>
</dd>
<dd>
<pre>
    +----------------------------------------------------+
    |                 query_variants                     |
    +----------------+-----------------------------------+
    |      Key       |            Description            |
    | allwordssubstr | contains all of the words/strings |
    | anywordssubstr | contains any of the words/strings |
    | substring      | contains the string               |
    | casesubstring  | contains the string (exact case)  |
    | allwords       | contains all of the words         |
    | anywords       | contains any of the words         |
    | regexp         | matches the regexp                |
    | notregexp      | doesn't match the regexp          |
    +----------------+-----------------------------------+</pre>
</dd>
<dd>
<pre>
            +-------------------------------------+
            |            email_variants           |
            +--------------+----------------------+
            |      Key     |      Description     |
            | substring    | contains             |
            | exact        | is                   |
            | regexp       | matches regexp       |
            | notregexp    | doesn't match regexp |
            +--------------+----------------------+</pre>
</dd>
<dd>
<pre>
    +----------------------------------------------------+
    |                    tag_variants                    |
    +----------------+-----------------------------------+
    |      Key       |            Description            |
    | anyexact       | is tagged with                    |
    | allwordssubstr | contains all of the words/strings |
    | anywordssubstr | contains any of the words/strings |
    | substring      | contains the string               |
    | casesubstring  | contains the string (exact case)  |
    | regexp         | matches the regexp                |
    | notregexp      | doesn't match the regexp          |
    | allwords       | contains all of the words         |
    | anywords       | contains any of the words         |
    | nowords        | contains none of the words        | 
    +----------------------------------------------------+</pre>
</dd>
<dd>
<pre>
 Returns:     Array: Matching test runs are retuned in a list of hashes.</pre>
</dd>
<dt><strong><a name="item_remove_tag"><code>remove_tag($run_id, $tag)</code></a></strong>

<dd>
<pre>
 Description: Remove a tag from a run.</pre>
</dd>
<dd>
<pre>
 Params:      $run_id - Integer/String: An integer or alias representing the ID in the database.</pre>
</dd>
<dd>
<pre>
              $tag - String - A single tag to be removed.</pre>
</dd>
<dd>
<pre>
 Returns:     0 on success.

</pre>
</dd>
<dt><strong><a name="item_update"><code>update($ids, $values)</code></a></strong>

<dd>
<pre>
 Description: Updates the fields of the selected test run.

</pre>
</dd>
<dd>
<pre>
 Params:      $ids - Integer: A single TestRun ID.

</pre>
</dd>
<dd>
<pre>
              $values - Hash of keys matching TestRun fields and the new values 
              to set each field to. See L&lt;create&gt; for description
                      +-------------------+----------------+
                      | Field             | Type           |
                      +-------------------+----------------+
                      | plan_id           | Integer        |
                      | environment       | Integer/String |
                      | build             | Integer/String |
                      | manager           | Integer/String |
                      | summary           | String         |
                      | product_version   | String         |
                      | plan_text_version | Integer        |
                      | notes             | String         |
                      | status            | Integer        |
                      +-------------------+----------------+

</pre>
</dd>
<dd>
<pre>
 Returns:     Hash: The updated test run object.

</pre>
</dd>
</dl>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p><a href="/Bugzilla/Testopia/TestRun.html">the Bugzilla::Testopia::TestRun manpage</a>
<a href="/Bugzilla/Webservice.html">the Bugzilla::Webservice manpage</a> 

</p>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p>Greg Hendricks &lt;<a href="mailto:ghendricks@novell.com">ghendricks@novell.com</a>&gt;</p>

</body>

</html>
