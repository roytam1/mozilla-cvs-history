<form method="GET" action="[% table.url_loc FILTER none %]" id="filter_form">
<input type="hidden" name="run_id" value="[% run.id FILTER none %]" />
[% query = table.get_query_part %]
<div class="bz_row_header" style="font-size:12pt; font-weight: bold;">
  <img src="[% query.match('assignee') AND NOT hide_filter ? 'testopia/img/td.gif' : 'testopia/img/tr.gif' %]" id="cft" onclick="_sr(document.getElementById('caserun_report'),document.getElementById('cft'))">
  <a href="javascript:_sr(document.getElementById('caserun_report'),document.getElementById('cft'))" style="text-decoration:none;">Reports</a>
</div>
<div id="caserun_report" [% query.match('assignee') AND NOT hide_filter ? 'style="display:block"' : 'style="display:none"' %]>
[% PROCESS "testopia/search/report-matrix.html.tmpl" 
   obj = table.list.0
%]
<p align="right">
  <input type="button" value="Report" onclick="document.getElementById('filter_form').action='tr_caserun_reports.cgi';document.getElementById('filter_form').submit();">
</p>
</div>
<div class="bz_row_header" style="font-size:12pt; font-weight: bold;">
  <img src="[% query.match('assignee') AND NOT hide_filter ? 'testopia/img/td.gif' : 'testopia/img/tr.gif' %]" id="ft" onclick="_sr(document.getElementById('filter'),document.getElementById('ft'))">
  <a href="javascript:_sr(document.getElementById('filter'),document.getElementById('ft'))" style="text-decoration:none;">Filter</a>
</div>
<div id="filter" [% query.match('assignee') AND NOT hide_filter ? 'style="display:block"' : 'style="display:none"' %]>
<table>
  <tr class="bz_row_header">
    <th>Status</th>
    <th>Category</th>
    <th>Build</th>
    <th>Priority</th>
    <th>Component</th>
    <th>Automatic</th>
    <td rowspan="2">
      <table>
        <tr>
          <th align="right">Assignee Contains</th>
          <td><input type="hidden" name="assignee_type" value="substring" />
              <input name="assignee">
          </td>
        </tr>
        <tr>
          <th align="right">Tested By Contains</th>
          <td><input type="hidden" name="testedby_type" value="substring" />
              <input name="testedby">
          </td>
        </tr>
        <tr>
          <th align="right">Summary Contains</th>
          <td><input type="hidden" name="case_summary_type" value="allwordssubstr" />
              <input name="case_summary">
          </td>
        </tr>
        <tr>
          <th align="right">Requirement</th>
          <td><input type="hidden" name="requirement_type" value="substring" />
              <input name="requirement">
          </td>
        </tr>
        <tr>
          <th align="right">Environment</th>
          <td><input type="hidden" name="environment_type" value="anyexact" />
              <input name="environment">
          </td>
        </tr>
        <tr>
          <th align="right">Case Tags</th>
          <td><input type="hidden" name="tags_type" value="anywords" />
              <input name="tags">
          </td>
        </tr>
      </table>
    </td>
  </tr>
  <tr>
    <td valign="top">
      [% PROCESS select sel = { name => "case_run_status_id", 
                                list => table.list.0.get_status_list,
                                elements => 6,
                                mult => 1, }
      %]
    </td>
    <td valign="top">
      [% PROCESS select sel = { name => "category", 
                                list => run.filter_case_categories,
                                byname => 1,
                                elements => 6,
                                mult => 1, }
      
      %]
    </td>
    <td valign="top">
      [% PROCESS select sel = { name => "build", 
                                list => run.filter_builds,
                                byname => 1,
                                elements => 6,
                                mult => 1, }
      %]
    </td>
    <td valign="top">
      [% PROCESS select sel = { name => "priority_id", 
                                list => table.list.0.case.get_priority_list,
                                elements => 6,
                                mult => 1, }
      %]
    </td>
    <td valign="top">
      [% PROCESS select sel = { name => "component", 
                                list => run.filter_components,
                                byname => 1,
                                elements => 6,
                                mult => 1, }
      %]
    </td>
    <td valign="top">
    [% PROCESS select sel = { name  => 'isautomated',
                  accesskey => 'a', 
                  list      => 
                    [   { id => "0", name => "Manual" },
                        { id => "1", name => "Automatic" }  ]
                  elements  => 5,
                  mult      => 1 } %]
    </td>
    <td valign="bottom"><input type="reset" value="Clear" /><br/><input type="submit" value="Filter" /></td>
  </tr>
</table>
</div>
</form>