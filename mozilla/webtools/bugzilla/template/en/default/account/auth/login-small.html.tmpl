[%# The contents of this file are subject to the Mozilla Public
  # License Version 1.1 (the "License"); you may not use this file
  # except in compliance with the License. You may obtain a copy of
  # the License at http://www.mozilla.org/MPL/
  #
  # Software distributed under the License is distributed on an "AS
  # IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or
  # implied. See the License for the specific language governing
  # rights and limitations under the License.
  #
  # The Original Code is the Bugzilla Bug Tracking System.
  #
  # The Initial Developer of the Original Code is Netscape Communications
  # Corporation. Portions created by Netscape are
  # Copyright (C) 1998 Netscape Communications Corporation. All
  # Rights Reserved.
  #
  # Contributor(s): Jacob Steenhagen <jake@bugzilla.org>
  #%]

[% PROCESS global/variables.none.tmpl %]

[%# Use the current script name. If an empty name is returned,
  # then we are accessing the home page. %]

[% target = cgi.url("-relative" => 1, "-query" => 1) %]
[% IF !target %]
 [% target = "index.cgi" %]
[% END %]

[% target = urlbase _ target %]
<li>
  <form name="login" action="[% target FILTER html %]" 
        class="mini_login"
        method="POST" id="mini_login[% qs_suffix FILTER html %]"
        onsubmit="return check_mini_login_fields( '[% qs_suffix FILTER html %]' );"
  >
    <span class="separator">| </span>
    <input id="Bugzilla_login[% qs_suffix FILTER html %]" 
           class="bz_login"
           name="Bugzilla_login"
           onfocus="mini_login_on_focus( this )"
    >
    <input class="bz_password" 
           id="Bugzilla_password[% qs_suffix FILTER html %]" 
           name="Bugzilla_password"
           type="password"
           onfocus="mini_login_on_focus( this )"
    >
    [% IF Param('rememberlogin') == 'defaulton' ||
          Param('rememberlogin') == 'defaultoff' 
    %]
      <input type="checkbox" id="Bugzilla_remember[% qs_suffix %]" 
             name="Bugzilla_remember" value="on" class="bz_remember"
                 [%+ "checked" IF Param('rememberlogin') == "defaulton" %]>
      <label for="Bugzilla_remember[% qs_suffix %]">Remember</label>
    [% END %]
    <input type="submit" name="GoAheadAndLogIn" value="Log in" id="log_in">
    <div class="bz_default_hidden">
      [% PROCESS "global/hidden-fields.html.tmpl"
                exclude="^Bugzilla_(login|password|restrictlogin|remember)$" %]
    </div>
    <script type="text/javascript">
      mini_login_constants = {
          "login" : "login",
          "password" : "password",
          "warning" : "You must set the login and password before logging in."
      }
      YAHOO.util.Event.onDOMReady(function() {
        init_mini_login_form('[% qs_suffix FILTER html %]');
      } );
    </script>    
  </form>
</li>
