<HTML
><HEAD
><TITLE
>Win32 (Win98+/NT/2K) Installation</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.64
"><LINK
REL="HOME"
TITLE="The Bugzilla Guide"
HREF="index.html"><LINK
REL="UP"
TITLE="Installing Bugzilla"
HREF="installation.html"><LINK
REL="PREVIOUS"
TITLE="UNIX Installation"
HREF="readme.unix.html"><LINK
REL="NEXT"
TITLE="Administering Bugzilla"
HREF="administration.html"></HEAD
><BODY
CLASS="SECTION"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>The Bugzilla Guide</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="readme.unix.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 2. Installing Bugzilla</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="administration.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECTION"
><H1
CLASS="SECTION"
><A
NAME="README.WINDOWS"
>2.2. Win32 (Win98+/NT/2K) Installation</A
></H1
><P
>      These directions have <EM
>not</EM
> been extensively tested.
      We need testers!  Please try these out and post any changes to the
      newsgroup.
    </P
><DIV
CLASS="SECTION"
><H2
CLASS="SECTION"
><A
NAME="NTVERIFIED"
>2.2.1. Win32 Installation: Step-by-step</A
></H2
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>	  You should be familiar with, and cross-reference, the UNIX README
	  while performing your Win32 installation.  Unfortunately, Win32
	  directions are not yet as detailed as those for UNIX.
	</P
><P
>	  The <EM
>most critical</EM
> difference for Win32 users is
	  the lack of support for a crypt() function in MySQL for Windows.  It does not
	  have it!  All ENCRYPT statements must be modified.
	</P
></BLOCKQUOTE
></DIV
><DIV
CLASS="PROCEDURE"
><OL
TYPE="1"
><LI
><P
>	    Install <A
HREF="http://www.apache.org/"
TARGET="_top"
>Apache Web Server</A
>
	    for Windows.
	  </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>	      You may also use Internet Information Server or Personal Web
	      Server for this purpose.  However, setup is slightly more
	      difficult.  If ActivePerl doesn't seem to handle your file
	      associations correctly (for .cgi and .pl files), please
	      consult the FAQ, in the "Win32" section.
	    </P
><P
>	      If you are going to use IIS, if on Windows NT you must be updated
	      to at least Service Pack 4.
	    </P
></BLOCKQUOTE
></DIV
></LI
><LI
><P
>	    Install <A
HREF="http://www.activestate.com/"
TARGET="_top"
>ActivePerl</A
>
	  </P
><P
>	    Please also check the following links to fully understand the status
	    of ActivePerl on Win32:
	    <A
HREF="http://language.perl.com/newdocs/pod/perlport.html"
TARGET="_top"
>	      Perl Porting</A
>, and
	    <A
HREF="http://ftp.univie.ac.at/packages/perl/ports/nt/FAQ/perlwin32faq5.html"
TARGET="_top"
>	      Hixie Click Here</A
>
	  </P
></LI
><LI
><P
>	    Use ppm from your perl\bin directory to install the following packs: DBI,
	    DBD-Mysql, TimeDate, Chart, Date-Calc, Date-Manip, and GD.  You may need
	    to extract them from .zip format using Winzip or other unzip program first.
	    These additional ppm modules can be downloaded from ActiveState.
	  </P
><P
>	    The syntax for ppm is:
	    <TT
CLASS="COMPUTEROUTPUT"
>	      <TT
CLASS="PROMPT"
>C:&#62; </TT
><B
CLASS="COMMAND"
>ppm install &#60;module&#62;.ppd</B
>
	    </TT
>
	  </P
><P
>	    You can find ActiveState ppm modules at
	    <A
HREF="http://www.activestate.com/PPMPackages/5.6plus/"
TARGET="_top"
>	      http://www.activestate.com/PPMPackages/5.6plus</A
>
	  </P
></LI
><LI
><P
>	    Download and install the Windows GNU tools from
	    <A
HREF="http://www.cygwin.com/"
TARGET="_top"
>www.cygwin.com</A
>.
	    Make sure the GNU utilities are in your $PATH.
	  </P
></LI
><LI
><P
>	    Install MySQL for NT.
	    <DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>		Your configuration file for MySQL <EM
>must</EM
> be named C:\MY.CNF.
	      </P
></BLOCKQUOTE
></DIV
>
	  </P
></LI
><LI
><P
>	    Setup MySQL
	  </P
><OL
CLASS="SUBSTEPS"
TYPE="a"
><LI
><P
>		<TT
CLASS="COMPUTEROUTPUT"
>		  <TT
CLASS="PROMPT"
>C:&#62; </TT
>
		  <B
CLASS="COMMAND"
>C:\mysql\bin\mysql -u root mysql</B
>
		</TT
>
	      </P
></LI
><LI
><P
>		<TT
CLASS="COMPUTEROUTPUT"
>		  <TT
CLASS="PROMPT"
>mysql&#62;</TT
>
		  <B
CLASS="COMMAND"
>DELETE FROM user WHERE Host='localhost' AND User='';</B
>
		</TT
>
	      </P
></LI
><LI
><P
>		<TT
CLASS="COMPUTEROUTPUT"
>		  <TT
CLASS="PROMPT"
>mysql&#62;</TT
>
		  <B
CLASS="COMMAND"
>UPDATE user SET Password=PASSWORD ('new_password')
		    WHERE user='root';</B
>
		</TT
>
	      </P
></LI
><LI
><P
>		<TT
CLASS="COMPUTEROUTPUT"
>		  <TT
CLASS="PROMPT"
>mysql&#62;</TT
>
		  <B
CLASS="COMMAND"
>GRANT SELECT, INSERT, UPDATE, DELETE,
		    INDEX, ALTER, CREATE, DROP, REFERENCES
		    ON bugs.* to bugs@localhost
		    IDENTIFIED BY 'bugs_password';</B
>
		</TT
>
	      </P
></LI
><LI
><P
>		<TT
CLASS="COMPUTEROUTPUT"
>		  <TT
CLASS="PROMPT"
>mysql&#62;</TT
>
		  <B
CLASS="COMMAND"
>FLUSH PRIVILEGES;</B
>
		</TT
>
	      </P
></LI
><LI
><P
>		<TT
CLASS="COMPUTEROUTPUT"
>		  <TT
CLASS="PROMPT"
>mysql&#62;</TT
>
		  <B
CLASS="COMMAND"
>create database bugs;</B
>
		</TT
>
	      </P
></LI
><LI
><P
>		<TT
CLASS="COMPUTEROUTPUT"
>		  <TT
CLASS="PROMPT"
>mysql&#62;</TT
>
		  <B
CLASS="COMMAND"
>exit</B
>
		</TT
>
	      </P
></LI
><LI
><P
>		<TT
CLASS="COMPUTEROUTPUT"
>		  <TT
CLASS="PROMPT"
>C:&#62;</TT
>
		  <B
CLASS="COMMAND"
>C:\mysql\bin\mysqladmin -u root -p reload</B
>
		</TT
>
	      </P
></LI
></OL
></LI
><LI
><P
>	    Configure Bugzilla.  For Win32, this involves editing "defparams.pl"
	    and "localconfig" to taste.  Running "checksetup.pl" should create
	    localconfig for you.  Note that getgrnam() doesn't work, and should be
	    deleted.  Change this line:
	    "my $webservergid = getgrnam($my_webservergroup); "
	    to
	    "my $webservergid = $my_webservergroup; "
	  </P
></LI
><LI
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>	      There are several alternatives to Sendmail that will work on Win32.
	      The one mentioned here is a <EM
>suggestion</EM
>, not
	      a requirement.  Some other mail packages that can work include
	      <A
HREF="http://www.blat.net/"
TARGET="_top"
>BLAT</A
>,
	      <A
HREF="http://www.geocel.com/windmail/"
TARGET="_top"
>Windmail</A
>,
	      <A
HREF="http://www.dynamicstate.com/"
TARGET="_top"
>Mercury Sendmail</A
>,
	      and the CPAN Net::SMTP Perl module (available in .ppm).
	      Every option requires some hacking of the Perl scripts for Bugzilla
	      to make it work.  The option here simply requires the least.
	    </P
></BLOCKQUOTE
></DIV
><P
>	    Download NTsendmail, available from<A
HREF="http://www.ntsendmail.com/"
TARGET="_top"
>	    www.ntsendmail.com</A
>.  In order for it to work, you must set up some
	    new environment variables (detailed on the ntsendmail home page).  Figuring
	    out where to put those variables is left as an exercise for the reader.
	    You must have a "real" mail server which allows you to relay off it
	    in your $ENV{"NTsendmail"} (which you should probably place in globals.pl)
	  </P
><P
>	    Once downloaded and installed, modify all open(SENDMAIL) calls to open
	    "| c:\ntsendmail\ntsendmail -t" instead of "|/usr/lib/sendmail -t".
	  </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>	      We need someone to test this and make sure this works as advertised.
	    </P
></BLOCKQUOTE
></DIV
></LI
><LI
><P
>	    Modify globals.pl and CGI.pl to remove the word "encrypt".
	  </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>	      I'm not sure this is all that is involved to remove crypt.  Any
	      NT Bugzilla hackers want to pipe up?
	    </P
></BLOCKQUOTE
></DIV
></LI
><LI
><P
>	    Change all references to "processmail" to "processmail.pl" in
	    all files, and rename "processmail" to "processmail.pl"
	  </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>	      I really think this may be a change we want to make for
	      main-tree Bugzilla.  It's painless for the UNIX folks,
	      and will make the Win32 people happier.
	    </P
></BLOCKQUOTE
></DIV
></LI
><LI
><P
>	    Modify the path to perl on the first line (#!) of all files
	    to point to your Perl installation, and
	    add "perl" to the beginning of all Perl system calls that
	    use a perl script as an argument.  This may take you a while.
	    There is a "setperl.pl" utility to speed part of this procedure,
	    available in the "Patches and Utilities" section of The Bugzilla Guide.
	  </P
></LI
><LI
><P
>	    In processmail.pl, add "binmode(HANDLE)" before all read() calls.
	    This may not be necessary, but in some cases the read() under
	    Win32 doesn't count the EOL's without using a binary read().
	  </P
></LI
></OL
></DIV
></DIV
><DIV
CLASS="SECTION"
><H2
CLASS="SECTION"
><A
NAME="ADDLWINTIPS"
>2.2.2. Additional Windows Tips</A
></H2
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>Tip: </B
>	  From Andrew Pearson:
	  <A
NAME="AEN624"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>	      "You can make Bugzilla work with Personal Web Server for
	      Windows 98 and higher, as well as for IIS 4.0.  Microsoft has
	      information available at
	      <A
HREF=" http://support.microsoft.com/support/kb/articles/Q231/9/98.ASP"
TARGET="_top"
>		http://support.microsoft.com/support/kb/articles/Q231/9/98.ASP</A
>
	    </P
><P
>	      Basically you need to add two String Keys in the
	      registry at the following location:
	    </P
><P
>	      HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\W3SVC\Parameters\ScriptMap
	    </P
><P
>	      The keys should be called ".pl" and ".cgi", and both
	      should have a value something like:
	      <B
CLASS="COMMAND"
>c:/perl/bin/perl.exe "%s" "%s"</B
>
	    </P
><P
>	      The KB article only talks about .pl, but it goes into
	      more detail and provides a perl test script.
	    </P
></BLOCKQUOTE
>
	</P
></BLOCKQUOTE
></DIV
><DIV
CLASS="TIP"
><BLOCKQUOTE
CLASS="TIP"
><P
><B
>Tip: </B
>"Brian" had this to add, about upgrading to Bugzilla 2.12 from previous versions:</P
><A
NAME="AEN634"
></A
><BLOCKQUOTE
CLASS="BLOCKQUOTE"
><P
>	    Hi - I am updating bugzilla to 2.12 so I can tell you what I did (after I
	    deleted the current dir and copied the files in).
	  </P
><P
>	    In checksetup.pl, I did the following...
	  </P
><DIV
CLASS="PROCEDURE"
><OL
TYPE="1"
><LI
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>my $webservergid = getgrnam($my_webservergroup);
	      </PRE
></TD
></TR
></TABLE
><P
>to</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>my $webservergid = 'Administrators'		
	      </PRE
></TD
></TR
></TABLE
></LI
><LI
><P
>		I then ran checksetup.pl
	      </P
></LI
><LI
><P
>		I removed all the encrypt()
		<DIV
CLASS="EXAMPLE"
><A
NAME="AEN646"
></A
><P
><B
>Example 2-1. Removing encrypt() for Windows NT installations</B
></P
><P
>		    Replace this:
		    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>SendSQL("SELECT encrypt(" . SqlQuote($enteredpwd) . ", " .
    SqlQuote(substr($realcryptpwd, 0, 2)) . ")");
my $enteredcryptpwd = FetchOneColumn();
		    </PRE
></TD
></TR
></TABLE
>
		    with this:
		    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>my $enteredcryptpwd = $enteredpwd
		    </PRE
></TD
></TR
></TABLE
>
		    in cgi.pl.
		  </P
></DIV
>
	      </P
></LI
><LI
><P
>		I renamed processmail to processmail.pl
	      </P
></LI
><LI
><P
>		I altered the sendmail statements to windmail:
		<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>  
open SENDMAIL, "|\"C:/General/Web/tools/Windmail 4.0 Beta/windmail\" -t &#62; mail.log";
		</PRE
></TD
></TR
></TABLE
>
	      </P
><P
>		The quotes around the dir is for the spaces. mail.log is for the output
	      </P
></LI
></OL
></DIV
></BLOCKQUOTE
></BLOCKQUOTE
></DIV
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="readme.unix.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="administration.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>UNIX Installation</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="installation.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Administering Bugzilla</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>