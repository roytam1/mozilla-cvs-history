[%# ***** BEGIN LICENSE BLOCK *****
  # Version: MPL 1.1
  #
  # The contents of this file are subject to the Mozilla Public License Version
  # 1.1 (the "License"); you may not use this file except in compliance with
  # the License. You may obtain a copy of the License at
  # http://www.mozilla.org/MPL/
  #
  # Software distributed under the License is distributed on an "AS IS" basis,
  # WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
  # for the specific language governing rights and limitations under the
  # License.
  #
  # The Original Code is Litmus.
  #
  # The Initial Developer of the Original Code is
  # The Mozilla Corporation.
  # Portions created by the Initial Developer are Copyright (C) 2006
  # the Initial Developer. All Rights Reserved.
  #
  # Contributor(s):
  #   Chris Cooper <ccooper@deadsquid.com>
  #   Zach Lipton <zach@zachlipton.com>
  #
  # ***** END LICENSE BLOCK *****
#%]
  
[%# INTERFACE:
  # $return_to - the CGI script to redirect to after the login is complete
  # $params - the CGI object containing parameters to pass to the 
  #	  script in $redirect_to	  
  #	$email - email address of the user to convert
#%]

[% INCLUDE global/html_header.tmpl js_files=['js/FormValidation.js']%] 
[% INCLUDE global/litmus_header.tmpl %] 

[% # Dump CGI data into hidden fields for safekeeping as the user 
   # logs in
%]
[% BLOCK create_hidden_fields %]
	[% IF params %]
    	[% FOREACH curdata = params.param() %]
    		[% IF ! params.param(curdata) %] [% NEXT %] [% END %]
        	<input name="[%curdata FILTER html %]" type="hidden" 
            	value="[% params.param(curdata) FILTER html %]">
    	[% END %]
	[% END %]
[% END %]

<script type="text/javascript">
function checkConvertFormContents(f) { 
  return (
	  checkString(f.realname,"Real Name",true) &&
	  checkString(f.irc_nickname,"IRC Nickname",true) &&
          comparePasswords(f.password,f.password_confirm)          
         );
}
</script>

<div id="page">

[% INCLUDE sidebar/sidebar.tmpl %]

  <div id="content">

    <h1 class="firstHeading">[% title | html %]</h1>

    <div class="section-full">
      <div class="section-content">

        <div class="login_form" style="left: 10px;right: 20px; width: auto;height: auto;margin-top: 10px;">
    	  <form name="litmus_login" action="[% return_to | none %]" method="post" onSubmit="return checkConvertFormContents(this);">
            <input name="login_type" type="hidden" value="reallyconvert">
            <input name="login_loc" type="hidden" value="[% return_to FILTER html %]">
            [% INCLUDE create_hidden_fields params=params %]
    		
            <table cellpadding="0" width="100%" border=0>
              <tr>
                <td valign="top" colspan="2">
                  <h2 class="login_sectitle">Update your Litmus account:</h2>
                </td>
                <td width="60%" class="login_info" rowspan="7">
<h2 class="login_sectitle">Concerning Privacy:</h2>

<p>In order to address the privacy concerns of our users, we have introduced a
new system for managing user accounts.</p>

<p>Even if testers don't plan to join us on IRC, we highly recommend that they supply an IRC nickname (any unique nickname will do) when they create their testing account. Wherever possible in Litmus, we will use the IRC nickname instead of your email address to identify your results or comments in an effort to reduce the potential for spam. If no nickname is supplied, we will display your Real Name, and if no name is supplied, we will default to displaying the email address.</p>

<p>Like <a href="https://bugzilla.mozilla.org/">Bugzilla</a>, Litmus is an open system used by the Mozilla community. All testing results you submit will be visible to the public, including the email addresses of those involved and any comments you enter. Although Litmus takes steps to prevent spammers from harvesting your email address, spam cannot be eliminated entirely. We recommend using a free web email service (such as Yahoo, Gmail, or similar) and not your primary email address if this concerns you.</p>

<p>Thank you for your contribution to Mozilla QA.</p>
                </td>
              </tr>
              <tr>
                <td>Email:</td>
    		<td><b>[% email FILTER html %]</b></td>
                <input name="email" type="hidden" value="[% email FILTER html %]">
              </tr>
              <tr>
                <td>Real Name:</td>
                <td><input name="realname" type="text" size="25"></td>
              </tr>
              <tr>
                <td>IRC Nickname:</td>
                <td><input name="irc_nickname" type="text" size="25"></td>
              </tr>
              <tr>
                <td>Password:</td>
                <td><input name="password" type="password" size="25"></td>
              </tr>
              <tr>
                <td>Confirm Password:</td>
                <td><input name="password_confirm" type="password" size="25"></td>
              </tr>
              <tr>
                <td colspan="2"><input type="submit" name="Submit" value="Update Account"></td>
              </tr>
            </table>

    	  </form>

        </div>

        <br clear="all" />

        <p align="center">If you require assistance with your login, please contact an operator in <a href="http://irc.mozilla.org/">irc.mozilla.org</a>, channel #qa.</p>

      </div>
    </div>

  </div> <!--END content-->

</div> <!--END page-->

[% INCLUDE global/html_footer.tmpl %]
