[%# ***** BEGIN LICENSE BLOCK *****
  # Version: MPL 1.1
  #
  # The contents of this file are subject to the Mozilla Public License Version
  # 1.1 (the "License"); you may not use this file except in compliance with
  # the License. You may obtain a copy of the License at
  # http://www.mozilla.org/MPL/
  #
  # Software distributed under the License is distributed on an "AS IS" basis,
  # WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
  # for the specific language governing rights and limitations under the
  # License.
  #
  # The Original Code is Litmus.
  #
  # The Initial Developer of the Original Code is
  # The Mozilla Corporation.
  # Portions created by the Initial Developer are Copyright (C) 2006
  # the Initial Developer. All Rights Reserved.
  #
  # Contributor(s):
  #   Chris Cooper <ccooper@deadsquid.com>
  #   Zach Lipton <zach@zachlipton.com>
  #
  # ***** END LICENSE BLOCK *****
#%]

<div class="section-full">
  <div class="section-header">
Summary Information
  </div>
  <div class="section-content">

<table class="single-result">
<tr class="[% result.result_status.class_name | html %]">
<td width="20%">Status:</td><td>[% result.result_status.name | html %]</td>
</tr>
<tr class="even">
<td>Test Summary:</td><td>[% result.testcase.summary | html %]</td>
</tr>
<tr class="odd">
<td>Testcase ID#:</td><td><a href="show_test.cgi?id=[% result.testcase_id | uri | html%]">
  [% result.testcase_id | html %]</a></td>
</tr>
<tr class="even">
<td>Submitted on:</td><td>[% result.submission_time | html %]</td>
</tr>
<tr class="odd">
[% display_name = result.user.getDisplayName %]
<td>Submitted by:</td><td>[% IF display_name != "" %]
[% IF show_admin %]<a href="mailto:[% result.user.email | html | uri | email %]?subject='Litmus test result submission #[% result.testresult_id | html | uri %]'">[% END %][% display_name.replace('\@.*','') %][% IF show_admin %]</a>[% END %]
[% ELSE %]
Not provided
[% END %]</td>
</tr>
</table>

  </div> <!--END section-content-->

</div> <!--END section-full-->

<div class="section-full">
  <div class="section-header">
Product and Platform
  </div>
  <div class="section-content">

<table class="single-result">
<tr class="odd">
<td width="20%">Product:</td><td>
  [% result.testcase.product.name | html %]</td>
</tr>
<tr class="even">
<td>Platform:</td><td>[% result.opsys.platform.name | html %]</td>
</tr>
<tr class="odd">
<td>Operating System:</td><td>[% result.opsys.name | html %]</td>
</tr>
<tr class="even">
<td>Build ID:</td><td>[% result.build_id | html %]</td>
</tr>
<tr class="odd">
<td>Locale:</td><td>[% result.locale_abbrev.name | html %] ([% result.locale_abbrev | html %])</td>
</tr>
<tr class="even">
<td>User Agent:</td><td>[% result.user_agent | html %]</td>
</tr>
</table>

  </div> <!--END section-content-->

</div> <!--END section-full-->

<form id="update_result" name="update_result" method="post" action="single_result.cgi">
<input type="hidden" name="id" value="[% result.testresult_id | html %]">

<div class="section-full">
  <div class="section-header">
Referenced Bugs
  </div>
  <div class="section-content">

<table class="single-result">
<tr class="odd">
[% IF defaultemail %]
<td>
Add bug references: <input name="new_bugs" type="text" value=""> (bug #,bug #,...) 
  <input class="button" type="submit" value="Add Bug References">
</td>
[% ELSE %]
<td colspan="2" class="no-results">
You must log in before you can add bug references.
</td>
[% END %]
</tr>
<tr class="even">
<td>
[% IF result.bugs %]
Bug IDs: 
  [% FOREACH bug=result.bugs %]
    <a target="bugzilla" href="https://bugzilla.mozilla.org/show_bug.cgi?id=[% bug.bug_id | uri | html%]">
      [% bug.bug_id | html%]</a>[% UNLESS loop.last %], [% END %] 
  [% END %]
[% ELSE %]
No bugs on file.
[% END %]
</td>
</tr>
</table>

  </div> <!--END section-content-->

</div> <!--END section-full-->

<div class="section-full">
  <div class="section-header">
Comments
  </div>
  <div class="section-content">

<table class="comments">
<tr class="odd">
[% IF defaultemail %]
<td width="20%"><a name="add_comment"></a>Add a Comment:</td>
<td><textarea wrap="hard" name="new_comment" id="new_comment" rows="10" cols="80" accesskey="c"></textarea></td>
</tr>
<tr class="odd">
<td><td><input class="button" type="submit" value="Add Comment"></td>
[% ELSE %]
<td colspan="2" class="no-results">
You must log in before you can leave comments.
</td>
[% END %]
</tr>

[% IF result.comments %]
  [% comment_num=1 %]
  [% FOREACH comment=result.comments %]
<tr [% IF not (loop.count % 2) %]class="odd"[% ELSE %]class="even"[% END %]>
<td colspan="2">
<p><em>------- Comment <a name="c[% comment_num | uri | html %]" 
  href="#c[% comment_num | uri | html%]">#[% comment_num | html %]</a> From 
    [% IF comment.user.email %]
<a href="mailto:[% comment.user.email FILTER html | uri | email %]">
  [% comment.user.email FILTER html | email %]</a>
    [% ELSE %]
Anonymous
    [% END %]
 [% comment.submission_time.strftime("%Y-%m-%d %T %Z") | html %] -------</em></p>

<p>[% comment.comment FILTER html %]</p>

[% comment_num=comment_num+1 %]
  [% END %]
</td>
</tr>
[% ELSE %]
<tr class="even">
<td colspan="2">
No comments.
</td>
</tr>
[% END %]

</table>

  </div> <!--END section-content-->

</div> <!--END section-full-->

</form>

<div class="section-full">
  <div class="section-header">
Logs
  </div>
  <div class="section-content">

<table class="single-result">
<tr class="odd">
<td>
[% logs = result.logs %]
[% IF logs %]
[% c = 0 %]
  [% FOREACH log=logs %]
     [% log.log_type.name | html %]: [% log.log_text | html %]<br/>
     [% UNLESS c == logs.size - 1 %]
    	<hr />
     [% END %]
     [% c = c+1 %]
  [% END %]
[% ELSE %]
No logs available.
[% END %]
</td>
</tr>
</table>

  </div> <!--END section-content-->

</div> <!--END section-full-->



