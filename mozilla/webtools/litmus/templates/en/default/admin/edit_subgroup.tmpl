[%# ***** BEGIN LICENSE BLOCK *****
  # Version: MPL 1.1
  #
  # The contents of this file are subject to the Mozilla Public License Version
  # 1.1 (the "License"); you may not use this file except in compliance with
  # the License. You may obtain a copy of the License at
  # http://www.mozilla.org/MPL/
  #
  # Software distributed under the License is distributed on an "AS IS" basis,
  # WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
  # for the specific language governing rights and limitations under the
  # License.
  #
  # The Original Code is Litmus.
  #
  # The Initial Developer of the Original Code is
  # The Mozilla Corporation.
  # Portions created by the Initial Developer are Copyright (C) 2006
  # the Initial Developer. All Rights Reserved.
  #
  # Contributor(s):
  #   Chris Cooper <ccooper@deadsquid.com>
  #   Zach Lipton <zach@zachlipton.com>
  #
  # ***** END LICENSE BLOCK *****
#%]

[%# INTERFACE:
  # $testcase   - the testcase object to show
#%]

<script type="text/javascript">
function checkFormContents(f) {
  return (
          checkString(f.editform_name, 'Name') &&
          verifySelected(f.product, 'Product') &&
          verifySelected(f.testgroup, 'Testgroup')
         );
}

function previewTestcase(selectID) {
  var selectBox = document.getElementById(selectID);
  if (selectBox) {
    if (selectBox.selectedIndex >= 0) {
      if (selectBox.options[selectBox.selectedIndex].value != '') {
        window.open('show_test.cgi?id=' + selectBox.options[selectBox.selectedIndex].value,
                    'testcase_preview');
      }
    } else {
      toggleMessage('failure','No testcase selected!');
    }
  }
}

var manageTestcasesHelpTitle="Help with Managing Testcases";
var manageTestcasesHelpText="<p>The select box on the left contains all the testcases for the chosen product, <strong><em>INCLUDING</em></strong> any testcases already contained in the subgroup. You can use the <input type='button' value='&rArr;' disabled> button to add testcases to the subgroup, and the <input type='button' value='&lArr;' disabled> button to remove testcases from the subgroup. <strong>NOTE</strong>: neither of the actions will alter the list of testcases on the left.</p><p>You can preview any testcase from the left-hand select box by selecting the testcase, and then clicking on  the 'Preview Testcase' link below the select box. If more than one testcase is selected, only the first testcase will be previewed.</p><p>You can change the display order of testcases within the subgroup using the <input type='button' value='&uArr;' disabled> and <input type='button' value='&dArr;' disabled> buttons to the right of the right-hand select box. Testcases can be re-ordered singly or in groups by selecting multiple testcases in the right-hand select box.</p>";

</script>

      <form id="edit_subgroup_form" name="edit_subgroup_form" method="post" action="manage_subgroups.cgi" onSubmit="selectNone('editform_testcases_for_product');selectAll('editform_subgroup_testcases');return checkFormContents(this);">
      <input id="editform_mode" name="editform_mode" type="hidden" value="edit">
      <input id="editform_subgroup_id" name="editform_subgroup_id" type="hidden" value="">

      <table class="manage">
	<tr>
	<td class="headerleft">Subgroup ID#:</td>
	<td name="editform_subgroup_id_display" id="editform_subgroup_id_display"></td>
	</tr>
        <tr>
        <td class="headerleft">Name:</td>
        <td><input name="editform_name"
                   id="editform_name"
                   value=""
                   size="35"/ disabled></td>
        </tr>
	<tr>
	<td class="headerleft">Product:</td>
	<td>[% INCLUDE productbox onchange="changeProduct();populateAllTestcases();" %]</td>
	</tr>
	<tr>
	<td class="headerleft">Test Group(s):</td>
	<td>[% INCLUDE testgroupbox %]</td>
        </tr>
        <tr>
          <td class="headerleft">Enabled?</td>
          <td>
            <input name="editform_enabled" 
                   type="checkbox"
                   id="editform_enabled"
                   value="1" disabled
		   onChange="if (this.checked == false) {document.getElementById('editform_communityenabled').checked =false;}">
          </td>
          <td>&lArr;&nbsp;Uncheck this to completely disable this subgroup.</td>
        </tr>
        <tr>
          <td class="headerleft">Testrunner Group ID#:</td>
          <td name="editform_testrunner_group_id" id="editform_testrunner_group_id"></td>
        </tr>
	<tr>
	<td colspan="3"><hr/></td>
        </tr> 
	<tr>
	<td class="headerleft" colspan="3">Manage Testcases for this Subgroup</td>
        </tr> 
	<tr>
	<td colspan="3">
	<div class="manage">
          <table border="0" cellspacing="10" cellpadding="0">
            <tr>
            <td id="editform_testcases_for_product_header" name="editform_testcases_for_product_header" class="headerleft">All Testcases For Product</td>
            <td></td>
            <td class="headerleft">Testcases in Subgroup</td>
            </tr>
            <tr>
            <td><select multiple class="testcase-subgroups" id="editform_testcases_for_product" name="editform_testcases_for_product" size="15">
            <option value="">--No product selected--</option>
            </select></td>
            <td align="center" valign="middle"><input id="add_testcase_button" name="add_testcase_button" type="button" value="&rArr;" onClick="copyToList('editform_testcases_for_product','editform_subgroup_testcases');"><br/><br/><input id="remove_testcase_button" name="remove_testcase_button" type="button" value="&lArr;" onClick="removeSelectedFromList('editform_subgroup_testcases',true);"></td>
            <td><select multiple class="testcase-subgroups" id="editform_subgroup_testcases" name="editform_subgroup_testcases" size="15">
            <option value="">--No subgroup selected--</option>
            </select></td>
            <td align="center" valign="middle"><input id="move_testcase_up_button" name="move_testcase_up_button" type="button" value="&uArr;" onClick="up('editform_subgroup_testcases');"><br/><br/><input id="move_testcase_down_button" name="move_testcase_down_button" type="button" value="&dArr;" onClick="down('editform_subgroup_testcases');"></td>
            </tr>
            <tr>
            <td align="right">&uArr;&nbsp;<a name="previewTestcase" onclick="previewTestcase('editform_testcases_for_product');">Preview Testcase</a></td>
            <td></td>
            <td align="right">&uArr;&nbsp;<a name="showManageTestcasesHelp" onclick="toggleHelp(manageTestcasesHelpTitle,manageTestcasesHelpText);">Help with Managing Testcases</a></td>
            <td></td>
            </tr>            
          </table>
          </div>
        </td>
	</tr>
        <tr>
          <td colspan="3" align="right"><input id="editform_reset" class="button" type="button" value="Reset" disabled />&nbsp;<input class="button" type="submit" id="editform_submit" name="editform_submit" value="Submit Edits" disabled /></div> 
          </td>
        </tr>	
      </table>

      </form>