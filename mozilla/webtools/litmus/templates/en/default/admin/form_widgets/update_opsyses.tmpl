<script type="text/javascript">
function checkAddOpsysForm(f) {
   return (
           checkString(f.new_opsys_name,"operating system name",false) &&
           checkPlatform(f.opsys_add_platform) &&
           checkString(f.new_opsys_detect_regexp,"detect regexp",false)
          );
}

function getOpsysByName(opsysName) {
    http.open('get', 'rpc.cgi?action=getOpsysByName&opsysName='+opsysName);
    http.onreadystatechange = updateOpsysForm;
    http.send(null);
}

function updateOpsysForm() {
    if(http.readyState == 4){
        var response = http.responseText;
        var update = new Array();

        var em = document.getElementById("notification-content")
        if(response.indexOf('|' != -1)) {
            update = response.split('|');
            document.getElementById("modify_opsys_id").value = update[0];
            document.getElementById("modify_opsys_name").disabled = false;
            document.getElementById("modify_opsys_name").value = update[1];
            // lookup platform
            document.getElementById("modify_opsys_detect_regexp").disabled = false;
            document.getElementById("modify_opsys_detect_regexp").value = update[2];
            document.getElementById("modify_opsys_icon_path").disabled = false;
            document.getElementById("modify_opsys_icon_path").value = update[3];
            document.getElementById("delete_opsys").disabled = false;
            document.getElementById("update_opsys").disabled = false;
        } else {
            document.getElementById("notification").style.display = 'block';
            em.innerHTML = response;
        }
    }
}
</script>

<div id="opsyses" class="category">

<h2>Operating Systems</h2>

<h3 class="display opsys_add"><a name="#opsys_add">Add&nbsp;&raquo;</a></h3>
<div id="opsys_add" class="collapsable">
<form name="opsys_add_form" id="opsys_add_form" action="edit_categories.cgi" method="post" onSubmit="return checkAddOpsysForm(this);">
<table class="category">
<tr>
<td>Name:</td>
<td><input d="new_opsys_name" name="new_opsys_name" type="text" size="30"></td>
</tr>
<tr>
<td>Platform:</td>
<td>
[% INCLUDE form_widgets/select_platform.tmpl name="opsys_add_platform" placeholder=1 %]
</td>
</tr>
<tr>
<td>Detect Regexp:</td>
<td><input id="new_opsys_detect_regexp" name="new_opsys_detect_regexp" type="text" size="30"></td>
</tr>
<tr>
<td colspan="2" align="right">
<input class="category" name="reset" type="reset" value="Reset">&nbsp;<input class="category" name="add_opsys" type="submit" value="Add New Operating System">
</td>
</tr>
</table>
</form>
</div>

<h3 class="display opsys_modify"><a name="#opsys_modify">Modify / Delete&nbsp;&raquo;</a></h3>
<div id="opsys_modify" class="collapsable">
<form id="opsys_modify_form" name="opsys_modify_form" action="edit_categories.cgi" method="post">
<input id="modify_opsys_id" name="modify_opsys_id" type="hidden" value="">
<table class="category">
<tr>
<td colspan="2" align="left">
Select Existing Operating System:<br/>
[% INCLUDE form_widgets/select_opsys.tmpl size=5 name="opsys_modify_existing" onChange="getOpsysByName(this.options[this.selectedIndex].value);" %]
</td>
</tr>
<tr>
<td>Name:</td>
<td><input disabled id="modify_opsys_name" name="modify_opsys_name" type="text" size="30"></td>
</tr>
<tr>
<td>Platform:</td>
<td>
[% INCLUDE form_widgets/select_platform.tmpl name="opsys_modify_platform" placeholder=1 disabled=1 %]
</td>
</tr>
<tr>
<td>Detect Regexp:</td>
<td><input disabled id="modify_opsys_detect_regexp" name="modify_opsys_detect_regexp" type="text" size="30"></td>
</tr>
<tr>
<td colspan="2" align="right">
<input disabled class="category" name="delete_opsys" type="submit" value="Delete Opsys">&nbsp;<input disabled class="category" name="update_opsys" type="submit" value="Update Operating System">
</td>
</tr>
</table>
</form>

</div>

</div>





