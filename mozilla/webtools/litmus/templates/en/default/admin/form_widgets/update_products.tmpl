<script type="text/javascript">
function checkAddProductForm(f) {
   return (
           checkString(f.new_product_name,"product name",false) &&
           checkString(f.new_product_icon_path,"icon path",true)
          );
}

function getProductByName(productName) {
    http.open('get', 'rpc.cgi?action=getProductByName&productName='+productName);
    http.onreadystatechange = updateProductForm;
    http.send(null);
}

function updateProductForm() {
    if(http.readyState == 4){
        var response = http.responseText;
        var update = new Array();

	var em = document.getElementById("notification-content")
        if(response.indexOf('|' != -1)) {
            update = response.split('|');
            document.getElementById("modify_product_id").value = update[0];
            document.getElementById("modify_product_name").disabled = false;
            document.getElementById("modify_product_name").value = update[1];
            document.getElementById("modify_product_icon_path").disabled = false;
            document.getElementById("modify_product_icon_path").value = update[2];
            document.getElementById("modify_product_enabled").disabled = false;
            document.getElementById("modify_product_enabled").checked = update[3] == 'Yes' ? true : false;
            document.getElementById("delete_product").disabled = false;
            document.getElementById("update_product").disabled = false;
        } else {
 	    document.getElementById("notification").style.display = 'block';
            em.innerHTML = response;
        }
    }
}
</script>

<div id="products" class="category">

<h2>Products</h2>

<h3 class="display product_add"><a name="#product_add">Add&nbsp;&raquo;</a></h3>
<div id="product_add" class="collapsable">
<form name="product_add_form" id="product_add_form" action="edit_categories.cgi" method="post" onSubmit="return checkAddProductForm(this);">
<table class="category">
<tr>
<td>Name:</td>
<td><input id="new_product_name" name="new_product_name" type="text" size="30"></td>
</tr>
<tr>
<td>Icon Path:</td>
<td><input id="new_product_icon_path" name="new_product_icon_path" type="text" size="30"></td>
</tr>
<tr>
<td>Enabled:</td>
<td><input id="new_product_enabled" name="new_product_enabled" type="checkbox" class="category" checked></td>
</tr>
<tr>
<td colspan="2" align="right">
<input class="category" name="reset" type="reset" value="Reset">&nbsp;<input class="category" name="add_product" type="submit" value="Add New Product">
</td>
</tr>
</table>
</form>
</div>

<h3 class="display product_modify"><a name="#product_modify">Modify / Delete&nbsp;&raquo;</a></h3>
<div id="product_modify" class="collapsable">
<form id="product_modify_form" name="product_modify_form" action="edit_categories.cgi" method="post">
<input id="modify_product_id" name="modify_product_id" type="hidden" value="">
<table class="category">
<tr>
<td colspan="2" align="left">
Select Existing Product:<br/>
[% INCLUDE form_widgets/select_product.tmpl name="product_modify_existing" size=5 onChange="getProductByName(this.options[this.selectedIndex].value);" %]
</td>
</tr>
<tr>
<td>Name:</td>
<td><input disabled id="modify_product_name" name="modify_product_name" type="text" size="30"></td>
</tr>
<tr>
<td>Icon Path:</td>
<td><input disabled id="modify_product_icon_path" name="modify_product_icon_path" type="text" size="30"></td>
</tr>
<tr>
<td>Enabled:</td>
<td><input disabled id="modify_product_enabled" name="modify_product_enabled" type="checkbox" class="category"></td>
</tr>
<tr>
<td colspan="2" align="right">
<input disabled class="category" id="delete_product" name="delete_product" type="submit" value="Delete Product">&nbsp;<input disabled class="category" id="update_product" name="update_product" type="submit" value="Update Product">
</td>
</tr>
</table>
</form>

</div>

</div>





