--- cairo-0.4.0/src/cairo_gstate.c	2005-03-04 11:57:53.000000000 -0600
+++ cairo/src/cairo_gstate.c	2005-03-30 11:16:57.576419878 -0600
@@ -1695,16 +1695,18 @@ _cairo_gstate_show_page (cairo_gstate_t 
 cairo_status_t
 _cairo_gstate_stroke_extents (cairo_gstate_t *gstate,
                               double *x1, double *y1,
 			      double *x2, double *y2)
 {
     cairo_status_t status;
     cairo_traps_t traps;
     cairo_box_t extents;
+
+    _cairo_pen_init (&gstate->pen_regular, gstate->line_width / 2.0, gstate);
   
     _cairo_traps_init (&traps);
   
     status = _cairo_path_stroke_to_traps (&gstate->path, gstate, &traps);
     if (status)
 	goto BAIL;
 
     _cairo_traps_extents (&traps, &extents);
