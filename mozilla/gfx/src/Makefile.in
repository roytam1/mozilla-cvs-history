#!gmake
#
# The contents of this file are subject to the Netscape Public License
# Version 1.0 (the "NPL"); you may not use this file except in
# compliance with the NPL.  You may obtain a copy of the NPL at
# http://www.mozilla.org/NPL/
#
# Software distributed under the NPL is distributed on an "AS IS" basis,
# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the NPL
# for the specific language governing rights and limitations under the
# NPL.
#
# The Initial Developer of this code under the NPL is Netscape
# Communications Corporation.  Portions created by Netscape are
# Copyright (C) 1998 Netscape Communications Corporation.  All Rights
# Reserved.

DEPTH = ../..
topsrcdir	= @top_srcdir@
srcdir		= @srcdir@
VPATH		= @srcdir@

include $(DEPTH)/config/autoconf.mk

include $(topsrcdir)/config/config.mk

# Build xlibrgb only for X toolkits
ifneq (,$(filter gtk xlib motif qt,$(MOZ_WIDGET_TOOLKIT)))
XLIB_RGB_DIRS = xlibrgb
endif

DIRS = ps $(XLIB_RGB_DIRS) $(MOZ_GFX_TOOLKIT)

ifndef MOZ_MONOLITHIC_TOOLKIT
DIRS = ps $(XLIB_RGB_DIRS) 

ifdef MOZ_ENABLE_GTK
  DIRS += gtk
endif

ifdef MOZ_ENABLE_MOTIF
  DIRS += motif
endif

ifdef MOZ_ENABLE_XLIB
  DIRS += xlib
endif

ifdef MOZ_ENABLE_QT
  DIRS += qt
endif

else
DIRS = ps $(XLIB_RGB_DIRS) $(MOZ_GFX_TOOLKIT)
endif

LIBRARY_NAME = raptorgfx

MODULE=raptor 

REQUIRES=util img xpcom raptor netlib dom js

DEFINES += -D_IMPL_NS_GFX 

# Alphabetical list of source files
CPPSRCS =				\
	nsBlender.cpp			\
	nsColor.cpp			\
	nsColorNames.cpp		\
	nsDeviceContext.cpp		\
	nsFont.cpp			\
	nsImageGroup.cpp		\
	nsImageManager.cpp		\
	nsImageNetContextAsync.cpp	\
	nsImageNetContextSync.cpp	\
	nsImageRenderer.cpp		\
	nsImageRequest.cpp		\
	nsImageSystemServices.cpp	\
	nsImageURL.cpp			\
	nsRect.cpp			\
	nsTransform2D.cpp		\
	$(NULL)

EXTRA_DSO_LDOPTS =	\
	-L$(DIST)/lib	\
	-limg_s		\
	-lneckoutil_s	\
	-lmozutil_s	\
	$(MOZ_TIMER_LIBS) \
	$(NULL)

include $(topsrcdir)/config/rules.mk
