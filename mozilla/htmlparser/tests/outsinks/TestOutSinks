#! /bin/tcsh -f

# The contents of this file are subject to the Netscape Public
# License Version 1.1 (the "License"); you may not use this file
# except in compliance with the License. You may obtain a copy of
# the License at http://www.mozilla.org/NPL/
#  
# Software distributed under the License is distributed on an "AS
# IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or
# implied. See the License for the specific language governing
# rights and limitations under the License.
#  
# The Original Code is Mozilla Communicator client code, released
# March 31, 1998.
# 
# The Initial Developer of the Original Code is Netscape
# Communications Corporation. Portions created by Netscape are
# Copyright (C) 1998-1999 Netscape Communications Corporation. All
# Rights Reserved.
# 
# Contributor(s): Akkana Peck.

#
# This is a collection of test files to guard against regressions
# in the Gecko output system.
#

set errmsg = ""

echo "Testing simple html to html ..."
TestOutput -i text/html -o text/html -f 0 -c OutTestData/simple.html OutTestData/simple.html
if ($status != 0) then
  echo "Simple html to html failed.\n"
  set errmsg = ($errmsg "simple.html")
endif

echo "Testing simple copy case ..."
TestOutput -i text/html -o text/plain -f 0 -w 0 -c OutTestData/simplecopy.out OutTestData/simple.html
if ($status != 0) then
  echo "Simple copy test failed.\n"
  set errmsg = ($errmsg "simplecopy.out")
endif

echo "Testing simple html to plaintext formatting ..."
TestOutput -i text/html -o text/plain -f 34 -w 70 -c OutTestData/simplefmt.out OutTestData/simple.html
if ($status != 0) then
  echo "Simple copy test failed.\n"
  set errmsg = ($errmsg "simplefmt.out")
endif

echo "Testing non-wrapped plaintext in preformatted mode ..."
TestOutput -i text/html -o text/plain -f 16 -c OutTestData/plainnowrap.out OutTestData/plain.html
if ($status != 0) then
  echo "Non-wrapped plaintext test failed."
  set errmsg = ($errmsg "plainnowrap.out")
endif

# echo "Testing wrapped and formatted plaintext ..."
# TestOutput -i text/html -o text/plain -f 32 -c OutTestData/plainwrap.out OutTestData/plain.html
# if ($status != 0) then
#   echo "Wrapped plaintext test failed."
#   set errmsg = ($errmsg "plainwrap.out")
# endif

echo "Testing mail quoting ..."
TestOutput -i text/html -o text/plain -f 2 -w 50 -c OutTestData/mailquote.out OutTestData/mailquote.html
if ($status != 0) then
  echo "Mail quoting test failed."
  set errmsg = ($errmsg "mailquote.out")
endif

echo "Testing conversion of XIF entities ..."
TestOutput -i text/xif -o text/plain -c OutTestData/entityxif.out OutTestData/entityxif.xif
if ($status != 0) then
  echo "XIF entity conversion test failed."
  set errmsg = ($errmsg "entityxif.out")
endif

echo "Testing XIF to HTML ..."
TestOutput -i text/xif -o text/html -c OutTestData/xifstuff.out OutTestData/xifstuff.xif
if ($status != 0) then
  echo "XIF to HTML conversion test failed."
  set errmsg = ($errmsg "xifstuff.out")
endif

echo "Testing HTML Table to Text ..."
TestOutput -i text/html -o text/plain -f 2 -c OutTestData/htmltable.out OutTestData/htmltable.html
if ($status != 0) then
  echo "HTML Table to Plain text failed."
  set errmsg = ($errmsg "htmltable.out")
endif

if ($errmsg != "") then
  echo " "
  echo TESTS FAILED: $errmsg
  exit 1
else
  echo ALL TESTS SUCCEEDED
endif
