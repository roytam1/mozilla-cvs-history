%!PS-Adobe-3.0
%%Creator: groff version 1.11
%%CreationDate: Sun May 31 22:58:23 1998
%%DocumentNeededResources: font Times-Bold
%%+ font Times-Roman
%%+ font Times-Italic
%%DocumentSuppliedResources: procset grops 1.11 0
%%Pages: 11
%%PageOrder: Ascend
%%Orientation: Portrait
%%EndComments
%%BeginProlog
%%BeginResource: procset grops 1.11 0
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/FL{
currentgray exch setgray fill setgray
}bind def
/BL/fill load def
/LW/setlinewidth load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%IncludeResource: font Times-Bold
%%IncludeResource: font Times-Roman
%%IncludeResource: font Times-Italic
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Italic@0 ENC0/Times-Italic RE/Times-Roman@0 ENC0/Times-Roman RE
/Times-Bold@0 ENC0/Times-Bold RE
%%EndProlog
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Bold@0 SF -.18(NA)72 28.8 S(ME).18 E/F1 10/Times-Roman@0 SF
(db_mpool \255 shared memory b)108 40.8 Q(uf)-.2 E(fer pool)-.25 E F0
(SYNOPSIS)72 57.6 Q/F2 10/Times-Bold@0 SF(#include <db)108 69.6 Q(.h>)
-.4 E(int)108 93.6 Q(memp_open\(char *dir)108 105.6 Q(,)-.92 E
(u_int32_t \215ags, int mode, DB_ENV *dben)158 117.6 Q 1.1 -.55(v, D)-.4
H(B_MPOOL **r).55 E(egionp\);)-.18 E(int)108 141.6 Q
(memp_close\(DB_MPOOL *mp\);)108 153.6 Q(int)108 177.6 Q(memp_f)108
189.6 Q(open\(DB_MPOOL *mp, char *\214le, u_int32_t \215ags, int mode,)
-.25 E(size_t pagesize, DB_MPOOL_FINFO *\214nf)158 201.6 Q
(op, DB_MPOOLFILE **mpf\);)-.25 E(int)108 225.6 Q
(memp_fclose\(DB_MPOOLFILE *mpf\);)108 237.6 Q(int)108 261.6 Q
(memp_fget\(DB_MPOOLFILE *mpf)108 273.6 Q(,)-.15 E(db_pgno_t *pgnoaddr)
158 285.6 Q 2.5(,u)-.92 G(_int32_t \215ags, v)-2.5 E(oid **pagep\);)-.1
E(int)108 309.6 Q(memp_fput\(DB_MPOOLFILE *mpf)108 321.6 Q 2.5(,v)-.15 G
(oid *pgaddr)-2.6 E 2.5(,u)-.92 G(_int32_t \215ags\);)-2.5 E(int)108
345.6 Q(memp_fset\(DB_MPOOLFILE *mpf)108 357.6 Q 2.5(,v)-.15 G
(oid *pgaddr)-2.6 E 2.5(,u)-.92 G(_int32_t \215ags\);)-2.5 E(int)108
381.6 Q(memp_fsync\(DB_MPOOLFILE *mpf\);)108 393.6 Q(int)108 417.6 Q
(memp_unlink\(const char *dir)108 429.6 Q 2.5(,i)-.92 G(nt f)-2.5 E(or)
-.25 E(ce, DB_ENV *\);)-.18 E(int)108 453.6 Q(memp_r)108 465.6 Q
(egister\(DB_MPOOL *mp, int ftype,)-.18 E
(int \(*pgin\)\(db_pgno_t pgno, v)158 477.6 Q(oid *pgaddr)-.1 E 2.5(,D)
-.92 G(BT *pgcookie\),)-2.5 E(int \(*pgout\)\(db_pgno_t pgno, v)158
489.6 Q(oid *pgaddr)-.1 E 2.5(,D)-.92 G(BT *pgcookie\)\);)-2.5 E(int)108
513.6 Q(memp_trickle\(DB_MPOOL *mp, int pct, int *nwr)108 525.6 Q
(otep\);)-.18 E(int)108 549.6 Q(memp_sync\(DB_MPOOL *mp, LSN *lsn\);)108
561.6 Q(int)108 585.6 Q(memp_stat\(DB_MPOOL *mp, DB_MPOOL_ST)108 597.6 Q
1.9 -.95(AT *)-.9 H(*gsp,).95 E(DB_MPOOL_FST)158 609.6 Q 1.9 -.95(AT *)
-.9 H(\(*fsp\)[], v).95 E(oid *\(*db_malloc\)\(size_t\)\);)-.1 E F0
(DESCRIPTION)72 626.4 Q F1 .486(The DB library is a f)108 638.4 R .485
(amily of groups of functions that pro)-.1 F .485
(vides a modular programming interf)-.15 F .485(ace to trans-)-.1 F .523
(actions and record-oriented \214le access.)108 650.4 R .523
(The library includes support for transactions, locking, logging and)
5.523 F .507(\214le page caching, as well as v)108 662.4 R .507
(arious inde)-.25 F -.15(xe)-.15 G 3.007(da).15 G .506(ccess methods.)
-3.007 F(Man)5.506 E 3.006(yo)-.15 G 3.006(ft)-3.006 G .506
(he functional groups \(e.g., the \214le)-3.006 F .168(page caching functions\) are useful independent of the other DB functions, although some functional groups)
108 674.4 R .122(are e)108 686.4 R .121(xplicitly based on other functional groups \(e.g., transactions and logging\).)
-.15 F -.15(Fo)5.121 G 2.621(rag).15 G .121(eneral description of)-2.621
F(the DB package, see)108 698.4 Q/F3 10/Times-Italic@0 SF(db_intr)2.5 E
(o)-.45 E F1(\(3\).).18 E(This manual page describes the speci\214c details of the memory pool interf)
108 715.2 Q(ace.)-.1 E(1)535 768 Q EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 334.4(DB_MPOOL\(3\) DB_MPOOL\(3\))72 48 R(The)
108 84 Q/F1 10/Times-Italic@0 SF(db_mpool)2.896 E F0 .396
(functions are the library interf)2.896 F .397(ace intended to pro)-.1 F
.397(vide general-purpose, page-oriented b)-.15 F(uf)-.2 E(fer)-.25 E
.16(management of one or more \214les.)108 96 R .16(While designed to w)
5.16 F .16(ork with the other DB functions, these functions are)-.1 F
.107(also useful for more general purposes.)108 108 R .107
(The memory pools \(DB_MPOOL)5.107 F -.55('s)-.92 G 2.607(\)a).55 G .108
(re referred to in this document)-2.607 F .29(as simply `)108 120 R
(`pools')-.74 E 2.79('. Pools)-.74 F .29
(may be shared between processes.)2.79 F .29
(Pools are usually \214lled by pages from one or)5.29 F .873
(more \214les \(DB_MPOOLFILE')108 132 R 3.374(s\). P)-.55 F .874
(ages in the pool are replaced in LR)-.15 F 3.374(U\()-.4 G .874
(least-recently-used\) order)-3.374 F 3.374(,w)-.4 G(ith)-3.374 E .971
(each ne)108 144 R 3.471(wp)-.25 G .971
(age replacing the page that has been unused the longest.)-3.471 F -.15
(Pa)5.97 G .97(ges retrie).15 F -.15(ve)-.25 G 3.47(df).15 G .97
(rom the pool using)-3.47 F F1(memp_fg)108 156 Q(et)-.1 E F0 1.552
(are `)4.052 F(`pinned')-.74 E 4.052('i)-.74 G 4.052(nt)-4.052 G 1.552
(he pool, by def)-4.052 F 1.552(ault, until the)-.1 F 4.052(ya)-.15 G
1.553(re returned to the pool')-4.052 F 4.053(sc)-.55 G 1.553
(ontrol using the)-4.053 F F1(memp_fput)108 168 Q F0(function.)2.5 E F1
(memp_open)92 184.8 Q F0(The)108 196.8 Q F1(memp_open)3.834 E F0 1.334
(function copies a pointer)3.834 F 3.834(,t)-.4 G 3.834(ot)-3.834 G
1.334(he memory pool identi\214ed by the)-3.834 F/F2 10/Times-Bold@0 SF
(dir)3.833 E(ectory)-.18 E F1(dir)3.833 E F0 3.833(,i).73 G 1.333
(nto the)-3.833 F(memory location referenced by)108 208.8 Q F1 -.37(re)
2.5 G(gionp)-.03 E F0(.).19 E 1.1(If the)108 225.6 R F1(dben)3.6 E(v)-.4
E F0(ar)3.6 E 1.1(gument to)-.18 F F1(memp_open)3.6 E F0 -.1(wa)3.6 G
3.6(si).1 G 1.1(nitialized using)-3.6 F F1(db_appinit)3.6 E F0(,).68 E
F1(dir)3.6 E F0 1.1(is interpreted as described by)3.6 F F1(db_appinit)
108 237.6 Q F0(\(3\).).68 E .668(Otherwise, if)108 254.4 R F1(dir)3.168
E F0 .668(is not NULL, it is interpreted relati)3.168 F .968 -.15(ve t)
-.25 H 3.168(ot).15 G .668(he current w)-3.168 F .667
(orking directory of the process.)-.1 F(If)5.667 E F1(dir)108 266.4 Q F0
2.387(is NULL, the follo)4.887 F 2.388(wing en)-.25 F 2.388(vironment v)
-.4 F 2.388(ariables are check)-.25 F 2.388(ed in order: `)-.1 F
(`TMPDIR')-.74 E 2.388(', `)-.74 F(`TEMP')-.74 E 2.388(', and)-.74 F
-.74(``)108 278.4 S(TMP').74 E 2.546('. If)-.74 F .046
(one of them is set, memory pool \214les are created relati)2.546 F .345
-.15(ve t)-.25 H 2.545(ot).15 G .045(he directory it speci\214es.)-2.545
F .045(If none of)5.045 F 1.5
(them are set, the \214rst possible one of the follo)108 290.4 R 1.501
(wing directories is used:)-.25 F F1(/var/tmp)4.001 E F0(,).19 E F1
(/usr/tmp)4.001 E F0(,).19 E F1(/temp)4.001 E F0(,).19 E F1(/tmp)4.001 E
F0(,).19 E F1(C:/temp)108 302.4 Q F0(and)2.5 E F1(C:/tmp)2.5 E F0(.).19
E .943(All \214les associated with the memory pool are created in this directory)
108 319.2 R 5.942(.T)-.65 G .942(his directory must already e)-5.942 F
(xist)-.15 E(when)108 331.2 Q .455(memory pool_open is called.)108 355.2
R .455(If the memory pool already e)5.455 F .455
(xists, the process must ha)-.15 F .755 -.15(ve p)-.2 H .455
(ermission to read).15 F .67(and write the e)108 367.2 R .67
(xisting \214les.)-.15 F .67(If the memory pool does not already e)5.67
F .67(xist, it is optionally created and initial-)-.15 F(ized.)108 379.2
Q(The)108 396 Q F1<8d61>3.76 E(gs)-.1 E F0(and)3.76 E F1(mode)3.76 E F0
(ar)3.76 E 1.26(guments specify ho)-.18 F 3.761<778c>-.25 G 1.261
(les will be opened and/or created when the)-3.761 F 3.761(yd)-.15 G
(on')-3.761 E 3.761(ta)-.18 G(lready)-3.761 E -.15(ex)108 408 S 2.5
(ist. The).15 F(\215ags v)2.5 E(alue is speci\214ed by)-.25 E F2(or)2.5
E F0('ing together one or more of the follo)A(wing v)-.25 E(alues:)-.25
E(DB_CREA)108 424.8 Q(TE)-1.11 E .484(Create an)133 436.8 R 2.984(yu)
-.15 G .483(nderlying \214les, as necessary)-2.984 F 5.483(.I)-.65 G
2.983(ft)-5.483 G .483(he \214les do not already e)-2.983 F .483
(xist and the DB_CREA)-.15 F .483(TE \215ag)-1.11 F
(is not speci\214ed, the call will f)133 448.8 Q(ail.)-.1 E
(DB_MPOOL_PRIV)108 465.6 Q -1.11(AT)-1.35 G(E)1.11 E .829(Create a pri)
133 477.6 R -.25(va)-.25 G .829(te MPOOL that is not shared with an).25
F 3.329(yo)-.15 G .83(ther process \(although it may be shared with)
-3.329 F(other threads\).)133 489.6 Q(DB_NOMMAP)108 506.4 Q(Al)133 518.4
Q -.1(wa)-.1 G 1.257(ys cop).1 F 3.757<798c>-.1 G 1.257(les in this memory pool into the local cache instead of mapping them into process)
-3.757 F .148(memory \(see the description of the)133 530.4 R F1
(mp_mmapsize)2.648 E F0 .149
(\214eld of the DB_ENV structure for further informa-)2.649 F(tion\).)
133 542.4 Q(DB_THREAD)108 571.2 Q 2.273
(Cause the DB_MPOOL handle returned by the)133 583.2 R F1(memp_open)
4.773 E F0 2.273(function to be useable by multiple)4.773 F
(threads within a single address space, i.e., to be `)133 595.2 Q
(`free-threaded')-.74 E('.)-.74 E 1.693(All \214les created by the memory pool subsystem \(other than \214les created by the)
108 612 R F1(memp_fopen)4.193 E F0(function,)4.193 E .059
(which are separately speci\214ed\) are created with mode)108 624 R F1
(mode)2.559 E F0 .059(\(as described in)2.559 F F1 -.15(ch)2.559 G(mod)
.15 E F0 .058(\(2\)\) and modi\214ed by the).77 F .293(process' umask v)
108 636 R .293(alue at the time of creation \(see)-.25 F F1(umask)2.794
E F0 2.794(\(2\)\). The).67 F .294(group o)2.794 F .294
(wnership of created \214les is based)-.25 F
(on the system and directory def)108 648 Q
(aults, and is not further speci\214ed by DB.)-.1 E .341
(The memory pool subsystem is con\214gured based on the)108 664.8 R F1
(dben)2.841 E(v)-.4 E F0(ar)2.841 E .34(gument to)-.18 F F1(memp_open)
2.84 E F0 2.84(,w).24 G .34(hich is a pointer)-2.84 F .519
(to a structure of type DB_ENV \(typedef)108 676.8 R 1.519 -.5('d i).55
H 3.019(n<).5 G(db)-3.019 E 3.019(.h>\). Applications)-.4 F .52
(will normally use the same DB_ENV)3.019 F(structure \(initialized by)
108 688.8 Q F1(db_appinit)2.5 E F0(\(3\)\), as an ar).68 E
(gument to all of the subsystems in the DB package.)-.18 E .439(References to the DB_ENV structure are maintained by DB, so it may not be discarded until the last close)
108 705.6 R .286
(function, corresponding to an open function for which it w)108 717.6 R
.287(as an ar)-.1 F .287(gument, has returned.)-.18 F .287
(In order to ensure)5.287 F 1.578(compatibility with future releases of DB, all \214elds of the DB_ENV structure that are not e)
108 729.6 R 1.578(xplicitly set)-.15 F(May 10, 1998)278.085 768 Q(2)
201.085 E EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 334.4(DB_MPOOL\(3\) DB_MPOOL\(3\))72 48 R .17(should be initialized to 0 before the \214rst time the structure is used.)
108 84 R .171(Do this by declaring the structure e)5.171 F(xter)-.15 E
(-)-.2 E(nal or static, or by calling the C library routine)108 96 Q/F1
10/Times-Italic@0 SF(bzer)2.5 E(o)-.45 E F0(\(3\) or).18 E F1(memset)2.5
E F0(\(3\).).68 E .259(The \214elds of the DB_ENV structure used by)108
112.8 R F1(memp_open)2.759 E F0 .259(are described belo)2.759 F 4.059
-.65(w. I)-.25 H(f).65 E F1(dben)2.759 E(v)-.4 E F0 .259(is NULL or an)
2.759 F 2.758(yo)-.15 G(f)-2.758 E(its \214elds are set to 0, def)108
124.8 Q(aults appropriate for the system are used where possible.)-.1 E
(The follo)108 141.6 Q(wing \214elds in the DB_ENV structure may be initialized before calling)
-.25 E F1(memp_open)2.5 E F0(:).24 E -.2(vo)108 158.4 S
(id *\(*db_errcall\)\(char *db_errpfx, char *b).2 E(uf)-.2 E(fer\);)-.25
E(FILE *db_err\214le;)108 170.4 Q(const char *db_errpfx;)108 182.4 Q
(int db_v)108 194.4 Q(erbose;)-.15 E
(The error \214elds of the DB_ENV beha)133 206.4 Q .3 -.15(ve a)-.2 H
2.5(sd).15 G(escribed for)-2.5 E F1(db_appinit)2.5 E F0(\(3\).).68 E
(size_t mp_mmapsize;)108 247.2 Q 1.63
(Files that are opened read-only in the pool \(and that satisfy a fe)133
259.2 R 4.131(wo)-.25 G 1.631(ther criteria\) are, by def)-4.131 F
(ault,)-.1 E .041(mapped into the process address space instead of being copied into the local cache.)
133 271.2 R .04(This can result in)5.04 F(better)133 283.2 Q 1.33
(-than-usual performance, as a)-.2 F -.25(va)-.2 G 1.331
(ilable virtual memory is normally much lar).25 F 1.331
(ger than the local)-.18 F .851(cache, and page f)133 295.2 R .851
(aults are f)-.1 F .851(aster than page cop)-.1 F .851(ying on man)-.1 F
3.35(ys)-.15 G 3.35(ystems. Ho)-3.35 F(we)-.25 E -.15(ve)-.25 G 1.65 -.4
(r, i).15 H 3.35(nt).4 G .85(he presence of)-3.35 F .262
(limited virtual memory it can cause resource starv)133 307.2 R .262
(ation, and in the presence of lar)-.25 F .262(ge databases, it can)-.18
F .636(result in immense process sizes.)133 319.2 R(If)5.636 E F1
(mp_mmapsize)3.136 E F0 .636
(is non-zero, it speci\214es the maximum \214le size, in)3.136 F
(bytes, for a \214le to be mapped into the process address space.)133
331.2 Q(By def)5 E(ault, it is set to 10Mb)-.1 E(.)-.4 E
(size_t mp_size;)108 348 Q .756
(The suggested size of the pool, in bytes.)133 360 R .756
(This should be the size of the normal w)5.756 F .757
(orking data set of)-.1 F 1.502(the application, with some small amount of additional memory for unusual situations.)
133 372 R 1.501(\(Note, the)6.501 F -.1(wo)133 384 S .324(rking set is not the same as the number of simultaneously referenced pages, and should be quite a)
.1 F .549(bit lar)133 396 R 3.049(ger!\) The)-.18 F(def)3.049 E .548(ault cache size is 128K bytes \(16 8K byte pages\), and may not be less than 20K)
-.1 F(bytes.)133 408 Q(The)108 424.8 Q F1(memp_open)2.5 E F0
(function returns the v)2.5 E(alue of)-.25 E F1(errno)2.5 E F0(on f)2.5
E(ailure and 0 on success.)-.1 E F1(memp_close)92 441.6 Q F0(The)108
453.6 Q F1(memp_close)5.113 E F0 2.613
(function closes the pool indicated by the DB_MPOOL pointer)5.113 F F1
(mp)5.114 E F0 5.114(,a).19 G 5.114(sr)-5.114 G 2.614(eturned by)-5.114
F F1(memp_open)108 465.6 Q F0 5.395(.T).24 G .394
(his function does not imply a call to)-5.395 F F1(memp_fsync)2.894 E F0
2.894(,b).31 G .394(ut does imply a call to)-3.094 F F1(memp_fclose)
2.894 E F0(for)2.894 E(an)108 477.6 Q 2.5(yr)-.15 G(emaining open DB_MPOOLFILE pointers returned to this process by calls to)
-2.5 E F1(memp_fopen)2.5 E F0(.).24 E .515(In addition, if the)108 494.4
R F1(dir)3.015 E F0(ar)3.015 E .515(gument to)-.18 F F1(memp_open)3.016
E F0 -.1(wa)3.016 G 3.016(sN).1 G .516(ULL and)-3.016 F F1(dben)3.016 E
(v)-.4 E F0 -.1(wa)3.016 G 3.016(sn).1 G .516(ot initialized using)
-3.016 F F1(db_appinit)3.016 E F0(,).68 E .969(or the DB_MPOOL_PRIV)108
506.4 R -1.11(AT)-1.35 G 3.469<458d>1.11 G .969(ag w)-3.469 F .968
(as set, all \214les created for this shared re)-.1 F .968
(gion will be remo)-.15 F -.15(ve)-.15 G .968(d, as if).15 F F1
(memp_unlink)108 518.4 Q F0(were called.)2.5 E .958
(When multiple threads are using the DB_MPOOL handle concurrently)108
535.2 R 3.459(,o)-.65 G .959(nly a single thread may call the)-3.459 F
F1(memp_close)108 547.2 Q F0(function.)2.5 E(The)108 564 Q F1
(memp_close)2.5 E F0(function returns the v)2.5 E(alue of)-.25 E F1
(errno)2.5 E F0(on f)2.5 E(ailure and 0 on success.)-.1 E F1(memp_fopen)
92 580.8 Q F0(The)108 592.8 Q F1(memp_fopen)3.84 E F0 1.34
(function opens a \214le in the pool speci\214ed by the DB_MPOOL ar)3.84
F 1.34(gument, cop)-.18 F 1.34(ying the)-.1 F(DB_MPOOLFILE pointer representing it into the memory location referenced by)
108 604.8 Q F1(mpf)2.5 E F0(.)1.96 E(The)108 621.6 Q F1(\214le)2.966 E
F0(ar)2.966 E .466(gument is the name of the \214le to be opened.)-.18 F
(If)5.466 E F1(\214le)2.966 E F0 .467(is NULL, a pri)2.966 F -.25(va)
-.25 G .467(te \214le is created that cannot).25 F(be shared with an)108
633.6 Q 2.5(yo)-.15 G
(ther process \(although it may be shared with other threads\).)-2.5 E
(The)108 650.4 Q F1<8d61>3.761 E(gs)-.1 E F0(and)3.761 E F1(mode)3.761 E
F0(ar)3.761 E 1.261(guments specify ho)-.18 F 3.761<778c>-.25 G 1.26
(les will be opened and/or created when the)-3.761 F 3.76(yd)-.15 G(on')
-3.76 E 3.76(ta)-.18 G(lready)-3.76 E -.15(ex)108 662.4 S 2.5(ist. The)
.15 F(\215ags v)2.5 E(alue is speci\214ed by)-.25 E/F2 10/Times-Bold@0
SF(or)2.5 E F0('ing together one or more of the follo)A(wing v)-.25 E
(alues:)-.25 E(DB_CREA)108 679.2 Q(TE)-1.11 E .483(Create an)133 691.2 R
2.983(yu)-.15 G .483(nderlying \214les, as necessary)-2.983 F 5.483(.I)
-.65 G 2.983(ft)-5.483 G .483(he \214les do not already e)-2.983 F .483
(xist and the DB_CREA)-.15 F .484(TE \215ag)-1.11 F
(is not speci\214ed, the call will f)133 703.2 Q(ail.)-.1 E
(May 10, 1998)278.085 768 Q(3)201.085 E EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 334.4(DB_MPOOL\(3\) DB_MPOOL\(3\))72 48 R
(DB_NOMMAP)108 84 Q(Al)133 96 Q -.1(wa)-.1 G .058(ys cop).1 F 2.557(yt)
-.1 G .057(his \214le into the local cache instead of mapping it into process memory \(see the descrip-)
-2.557 F(tion of the)133 108 Q/F1 10/Times-Italic@0 SF(mp_mmapsize)2.5 E
F0(\214eld of the DB_ENV structure for further information\).)2.5 E
(DB_RDONL)108 124.8 Q(Y)-1 E 1.123(Open an)133 136.8 R 3.623(yu)-.15 G
1.123(nderlying \214les for reading only)-3.623 F 6.124(.A)-.65 G 1.424
-.15(ny a)-6.124 H 1.124
(ttempt to write the \214le using the pool functions).15 F(will f)133
148.8 Q(ail, re)-.1 E -.05(ga)-.15 G
(rdless of the actual permissions of the \214le.).05 E .614
(All \214les created by the function)108 165.6 R F1(memp_fopen)3.114 E
F0 .614(are created with mode)3.114 F F1(mode)3.114 E F0 .613
(\(as described in)3.114 F F1 -.15(ch)3.113 G(mod).15 E F0 .613
(\(2\)\) and).77 F .391(modi\214ed by the process' umask v)108 177.6 R
.391(alue at the time of creation \(see)-.25 F F1(umask)2.891 E F0 2.891
(\(2\)\). The).67 F .392(group o)2.891 F .392(wnership of cre-)-.25 F
(ated \214les is based on the system and directory def)108 189.6 Q
(aults, and is not further speci\214ed by DB.)-.1 E(The)108 206.4 Q F1
(pa)3.578 E -.1(ge)-.1 G(size).1 E F0(ar)3.578 E 1.077(gument is the size, in bytes, of the unit of transfer between the application and the pool,)
-.18 F(although it is not necessarily the unit of transfer between the pool and the source \214le.)
108 218.4 Q .095
(Files opened in the pool may be further con\214gured based on the)108
235.2 R F1(\214nfop)2.596 E F0(ar)2.596 E .096(gument to)-.18 F F1
(memp_fopen)2.596 E F0 2.596(,w).24 G .096(hich is a)-2.596 F .04
(pointer to a structure of type DB_MPOOL_FINFO \(typedef)108 247.2 R
1.039 -.5('d i).55 H 2.539(n<).5 G(db)-2.539 E 2.539(.h>\). No)-.4 F
.039(references to the)2.539 F F1(\214nfop)2.539 E F0(struc-)2.539 E
1.364(ture are maintained by DB, so it may be discarded when the)108
259.2 R F1(memp_fopen)3.864 E F0 1.364(function returns.)3.864 F 1.365
(In order to)6.364 F .137(ensure compatibility with future releases of DB, all \214elds of the DB_MPOOL_FINFO structure that are not)
108 271.2 R -.15(ex)108 283.2 S .656(plicitly set should be initialized to 0 before the \214rst time the structure is used.)
.15 F .656(Do this by declaring the)5.656 F(structure e)108 295.2 Q
(xternal or static, or by calling the C library routine)-.15 E F1(bzer)
2.5 E(o)-.45 E F0(\(3\) or).18 E F1(memset)2.5 E F0(\(3\).).68 E 1.382
(The \214elds of the DB_MPOOL_FINFO structure used by)108 312 R F1
(memp_fopen)3.882 E F0 1.382(are described)3.882 F(belo)6.382 E 5.182
-.65(w. I)-.25 H(f).65 E F1(\214nfop)3.882 E F0(is)3.882 E(NULL or an)
108 324 Q 2.5(yo)-.15 G 2.5(fi)-2.5 G(ts \214elds are set to their def)
-2.5 E(ault v)-.1 E(alue, def)-.25 E
(aults appropriate for the system are used.)-.1 E(int ftype;)108 340.8 Q
(The)133 352.8 Q F1(ftype)3.92 E F0 1.42
(\214eld should be the same as a)3.92 F F1(ftype)3.921 E F0(ar)3.921 E
1.421(gument pre)-.18 F 1.421(viously speci\214ed to the)-.25 F F1
(memp_r)3.921 E -.4(eg)-.37 G(ister).4 E F0 1.766
(function, unless no input or output processing of the \214le')133 364.8
R 4.266(sp)-.55 G 1.766(ages are necessary)-4.266 F 4.266(,i)-.65 G
4.266(nw)-4.266 G 1.766(hich case it)-4.266 F(should be 0.)133 376.8 Q
(\(See the description of the)5 E F1(memp_r)2.5 E -.4(eg)-.37 G(ister).4
E F0(function for more information.\))2.5 E(DBT *pgcookie;)108 393.6 Q
(The)133 405.6 Q F1(pgcookie)2.782 E F0 .282
(\214eld contains the byte string that is passed to the)2.782 F F1(pgin)
2.782 E F0(and)2.782 E F1(pgout)2.782 E F0 .283
(functions for this \214le,)2.783 F 1.345(if an)133 417.6 R 5.145 -.65
(y. I)-.15 H 3.845(fn).65 G(o)-3.845 E F1(pgin)3.845 E F0(or)3.845 E F1
(pgout)3.845 E F0 1.345(functions are speci\214ed, the)3.845 F F1
(pgcookie)3.845 E F0 1.344(\214eld should be NULL.)3.845 F 1.344
(\(See the)6.344 F(description of the)133 429.6 Q F1(memp_r)2.5 E -.4
(eg)-.37 G(ister).4 E F0(function for more information.\))2.5 E
(u_int8_t *\214leid;)108 446.4 Q(The)133 458.4 Q F1(\214leid)2.797 E F0
.298(\214eld is a unique identi\214er for the \214le.)2.797 F .298
(The mpool functions must be able to uniquely iden-)5.298 F .176(tify \214les in order that multiple processes sharing a \214le will correctly share its underlying pages.)
133 470.4 R(Nor)5.175 E(-)-.2 E(mally)133 482.4 Q 3.358(,t)-.65 G(he)
-3.358 E F1(\214leid)3.358 E F0 .858
(\214eld should be NULL and the mpool functions will use the \214le')
3.358 F 3.359(sd)-.55 G -.25(ev)-3.359 G .859(ice and inode).25 F .044
(numbers \(see)133 494.4 R F1(stat)2.544 E F0 .043
(\(2\)\) for this purpose.).68 F .043(On some \214lesystems, \(e.g., F)
5.043 F 2.263 -1.11(AT o)-.74 H 2.543(rN)1.11 G .043(FS\) \214le de)
-2.543 F .043(vice and inode)-.25 F 1.578
(numbers are not necessarily unique across system reboots.)133 506.4 R
/F2 10/Times-Bold@0 SF -.25(Ap)6.578 G 1.579
(plications wanting to maintain a).25 F(shar)133 518.4 Q 1.653
(ed memory b)-.18 F 1.653(uffer pool acr)-.2 F 1.652(oss system r)-.18 F
1.652(eboots, wher)-.18 F 4.152(et)-.18 G 1.652
(he pool contains pages fr)-4.152 F 1.652(om \214les)-.18 F(stor)133
530.4 Q .555(ed on such \214lesystems, must specify a unique \214le identi\214er to the)
-.18 F F1(memp_fopen)3.055 E F0 .555(call and each)3.055 F .945
(process opening or re)133 542.4 R .945(gistering the \214le must pro)
-.15 F .944(vide the same unique identi\214er)-.15 F 5.944(.I)-.55 G
3.444(ft)-5.944 G(he)-3.444 E F1(\214leid)3.444 E F0 .944(\214eld is)
3.444 F .522
(non-NULL, it must reference a DB_FILE_ID_LEN \(as de\214ned in <db)133
554.4 R .522(.h>\) length array of bytes that)-.4 F .058
(will be used to uniquely identify the \214le.)133 566.4 R .057
(This should not be necessary for most applications.)5.058 F(Specif-)
5.057 E(ically)133 578.4 Q 3.051(,i)-.65 G 3.051(ti)-3.051 G 3.052(sn)
-3.051 G .552(ot necessary if the memory pool is re-instantiated after each system reboot, the applica-)
-3.052 F .265(tion is using the DB access methods instead of calling the pool functions e)
133 590.4 R(xplicitly)-.15 E 2.764(,o)-.65 G 2.764(rt)-2.764 G .264
(he \214les in the)-2.764 F .145
(memory pool are stored on \214lesystems where the \214le de)133 602.4 R
.145(vice and inode numbers do not change across)-.25 F(system reboots.)
133 614.4 Q(int32_t lsn_of)108 631.2 Q(fset;)-.25 E(The)133 643.2 Q F1
(lsn_of)4.289 E(fset)-.18 E F0 1.788(\214eld is the zero-based byte of)
4.289 F 1.788(fset in the page of the page')-.25 F 4.288(sl)-.55 G 1.788
(og sequence number)-4.288 F .327(\(LSN\), or \2551 if no LSN of)133
655.2 R .328(fset is speci\214ed.)-.25 F .328
(\(See the description of the)5.328 F F1(memp_sync)2.828 E F0 .328
(function for more)2.828 F(information.\))133 667.2 Q
(u_int32_t clear_len;)108 684 Q(The)133 696 Q F1(clear_len)2.664 E F0
.164(\214eld is the number of initial bytes in a page that should be set to zero when the page is)
2.664 F 1.791(created as a result of the DB_MPOOL_CREA)133 708 R 1.791
(TE or DB_MPOOL_NEW \215ags being speci\214ed to)-1.11 F F1(memp_fg)133
720 Q(et)-.1 E F0 5(.I).68 G(f)-5 E F1(\214nfop)2.5 E F0(is NULL or)2.5
E F1(clear_len)2.5 E F0(is 0, the entire page is cleared.)2.5 E
(May 10, 1998)278.085 768 Q(4)201.085 E EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 334.4(DB_MPOOL\(3\) DB_MPOOL\(3\))72 48 R(The)
108 84 Q/F1 10/Times-Italic@0 SF(memp_fopen)2.5 E F0
(function returns the v)2.5 E(alue of)-.25 E F1(errno)2.5 E F0(on f)2.5
E(ailure and 0 on success.)-.1 E F1(memp_fclose)92 100.8 Q F0(The)108
112.8 Q F1(memp_fclose)4.11 E F0 1.609(function closes the source \214le indicated by the DB_MPOOLFILE pointer)
4.11 F F1(mpf)4.109 E F0 6.609(.T)1.96 G(his)-6.609 E .798
(function does not imply a call to)108 124.8 R F1(memp_fsync)3.298 E F0
3.298(,i).31 G .798
(.e. no pages are written to the source \214le as as a result of)-3.298
F(calling)108 136.8 Q F1(memp_fclose)2.5 E F0(.).18 E 3.333
(In addition, if the)108 153.6 R F1(\214le)5.833 E F0(ar)5.833 E 3.333
(gument to)-.18 F F1(memp_fopen)5.833 E F0 -.1(wa)5.833 G 5.833(sN).1 G
3.333(ULL, an)-5.833 F 5.832(yu)-.15 G 3.332
(nderlying \214les created for this)-5.832 F(DB_MPOOLFILE will be remo)
108 165.6 Q -.15(ve)-.15 G(d.).15 E(The)108 182.4 Q F1(memp_fclose)2.5 E
F0(function returns the v)2.5 E(alue of)-.25 E F1(errno)2.5 E F0(on f)
2.5 E(ailure and 0 on success.)-.1 E F1(memp_fg)92 199.2 Q(et)-.1 E F0
(The)108 211.2 Q F1(memp_fg)2.551 E(et)-.1 E F0 .052(function copies a pointer to the page with the page number speci\214ed by)
2.551 F F1(pgnoaddr)2.552 E F0 2.552(,f).73 G .052(rom the)-2.552 F .365
(source \214le speci\214ed by the DB_MPOOLFILE pointer)108 223.2 R F1
(mpf)2.865 E F0 2.865(,i)1.96 G .365
(nto the memory location referenced by)-2.865 F F1(pa)2.865 E -.1(ge)-.1
G(p).1 E F0(.).19 E(If the page does not e)108 235.2 Q
(xist or cannot be retrie)-.15 E -.15(ve)-.25 G(d,).15 E F1(memp_fg)2.5
E(et)-.1 E F0(will f)2.5 E(ail.)-.1 E
(The returned page is size_t type aligned.)108 252 Q/F2 10/Times-Bold@0
SF -.1(Pa)108 268.8 S(ge numbers begin at 0, e.g).1 E
(., the \214rst page in the \214le is page number 0, not page number 1.)
-.15 E F0(The)108 285.6 Q F1<8d61>2.5 E(gs)-.1 E F0(ar)2.5 E
(gument is speci\214ed by)-.18 E F2(or)2.5 E F0
('ing together one or more of the follo)A(wing v)-.25 E(alues:)-.25 E
(DB_MPOOL_CREA)108 302.4 Q(TE)-1.11 E
(If the speci\214ed page does not e)133 314.4 Q(xist, create it.)-.15 E
(In this case, the)5 E F1(pgin)2.5 E F0
(function, if speci\214ed, is called.)2.5 E(DB_MPOOL_LAST)108 331.2 Q
2.105(Return the last page of the source \214le and cop)133 343.2 R
4.605(yi)-.1 G 2.106(ts page number to the location referenced by)-4.605
F F1(pgnoaddr)133 355.2 Q F0(.).73 E(DB_MPOOL_NEW)108 372 Q .743
(Create a ne)133 384 R 3.243(wp)-.25 G .743(age in the \214le and cop)
-3.243 F 3.243(yi)-.1 G .743
(ts page number to the location referenced by)-3.243 F F1(pgnoaddr)3.242
E F0 5.742(.I).73 G(n)-5.742 E(this case, the)133 396 Q F1(pgin)2.5 E F0
(function, if speci\214ed, is not called.)2.5 E(The DB_MPOOL_CREA)108
412.8 Q(TE, DB_MPOOL_LAST and DB_MPOOL_NEW \215ags are mutually e)-1.11
E(xclusi)-.15 E -.15(ve)-.25 G(.).15 E(Created pages ha)108 429.6 Q .3
-.15(ve a)-.2 H(ll their bytes set to 0, unless otherwise speci\214ed when the \214le w)
.15 E(as opened.)-.1 E 1.44(All pages returned by)108 446.4 R F1
(memp_fg)3.94 E(et)-.1 E F0 1.44(will be retained \(i.e. `)3.94 F
(`pinned')-.74 E 1.44('\) in the pool until a subsequent call to)-.74 F
F1(memp_fput)108 458.4 Q F0(.).68 E(The)108 475.2 Q F1(memp_fg)2.5 E(et)
-.1 E F0(function returns the v)2.5 E(alue of)-.25 E F1(errno)2.5 E F0
(on f)2.5 E(ailure and 0 on success.)-.1 E F1(memp_fput)92 492 Q F0(The)
108 504 Q F1(memp_fput)4.804 E F0 2.304
(function indicates that the page referenced by)4.804 F F1(pgaddr)4.804
E F0 2.304(can be e)4.804 F 2.304(victed from the pool.)-.25 F F1
(Pgaddr)108 516 Q F0(must be an address pre)2.5 E(viously returned by)
-.25 E F1(memp_fg)2.5 E(et)-.1 E F0(.).68 E(The)108 532.8 Q F1<8d61>2.5
E(gs)-.1 E F0(ar)2.5 E(gument is speci\214ed by)-.18 E F2(or)2.5 E F0
('ing together one or more of the follo)A(wing v)-.25 E(alues:)-.25 E
(DB_MPOOL_CLEAN)108 549.6 Q 1.556(Clear an)133 561.6 R 4.056(yp)-.15 G
(re)-4.056 E 1.556(viously set modi\214cation information \(i.e., don')
-.25 F 4.056(tb)-.18 G 1.557(other writing the page back to the)-4.056 F
(source \214le\).)133 573.6 Q(DB_MPOOL_DIR)108 590.4 Q(TY)-.6 E .052(The page has been modi\214ed and must be written to the source \214le before being e)
133 602.4 R .051(victed from the pool.)-.25 F(DB_MPOOL_DISCARD)108 619.2
Q .144(The page is unlik)133 631.2 R .144(ely to be useful in the near future, and should be discarded before other pages in the)
-.1 F(pool.)133 643.2 Q(The DB_MPOOL_CLEAN and DB_MPOOL_DIR)108 660 Q
(TY \215ags are mutually e)-.6 E(xclusi)-.15 E -.15(ve)-.25 G(.).15 E
(The)108 676.8 Q F1(memp_fput)2.5 E F0(function returns the v)2.5 E
(alue of)-.25 E F1(errno)2.5 E F0(on f)2.5 E(ailure and 0 on success.)
-.1 E F1(memp_fset)92 693.6 Q F0(The)108 705.6 Q F1(memp_fset)3.1 E F0
.6(function sets the \215ags associated with the page referenced by)3.1
F F1(pgaddr)3.1 E F0 .6(without unpinning it)3.1 F 1.818(from the pool.)
108 717.6 R F1(Pgaddr)6.818 E F0 1.819(must be an address pre)4.318 F
1.819(viously returned by)-.25 F F1(memp_fg)4.319 E(et)-.1 E F0 6.819
(.T).68 G(he)-6.819 E F1<8d61>4.319 E(gs)-.1 E F0(ar)4.319 E 1.819
(gument to)-.18 F F1(memp_fset)108 729.6 Q F0 .937(is speci\214ed by)
3.438 F F2(or)3.437 E F0 .937('ing together one or more of the v)B .937
(alues speci\214ed as \215ags for the)-.25 F F1(memp_fput)3.437 E F0
(May 10, 1998)278.085 768 Q(5)201.085 E EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 334.4(DB_MPOOL\(3\) DB_MPOOL\(3\))72 48 R(call.)
108 84 Q(The)108 100.8 Q/F1 10/Times-Italic@0 SF(memp_fset)2.5 E F0
(function returns the v)2.5 E(alue of)-.25 E F1(errno)2.5 E F0(on f)2.5
E(ailure and 0 on success.)-.1 E F1(memp_fsync)92 117.6 Q F0(The)108
129.6 Q F1(memp_fsync)3.704 E F0 1.205
(function writes all pages associated with the DB_MPOOLFILE pointer)
3.704 F F1(mpf)3.705 E F0 3.705(,t)1.96 G 1.205(hat were)-3.705 F(mark)
108 141.6 Q .75(ed as modi\214ed using)-.1 F F1(memp_fput)3.25 E F0(or)
3.25 E F1(memp_fset)3.25 E F0 3.25(,b).68 G .749
(ack to the source \214le.)-3.25 F .749(If an)5.749 F 3.249(yo)-.15 G
3.249(ft)-3.249 G .749(he modi\214ed pages)-3.249 F(are also pinned \(i.e., currently referenced by this or another process\))
108 153.6 Q F1(memp_fsync)2.5 E F0(will ignore them.)2.5 E(The)108 170.4
Q F1(memp_fsync)3.532 E F0 1.032(function returns the v)3.532 F 1.032
(alue of)-.25 F F1(errno)3.532 E F0 1.032(on f)3.532 F 1.032
(ailure, 0 on success, and DB_INCOMPLETE if)-.1 F
(there were pages which were modi\214ed b)108 182.4 Q(ut which)-.2 E F1
(memp_fsync)2.5 E F0 -.1(wa)2.5 G 2.5(su).1 G(nable to write.)-2.5 E F1
(memp_unlink)92 211.2 Q F0(The)108 223.2 Q F1(memp_unlink)2.567 E F0
.067(function destro)2.567 F .067
(ys the memory pool identi\214ed by the directory)-.1 F F1(dir)2.566 E
F0 2.566(,r).73 G(emo)-2.566 E .066(ving all \214les used)-.15 F .405
(to implement the memory pool.)108 235.2 R .406(\(The directory)5.406 F
F1(dir)2.906 E F0 .406(is not remo)2.906 F -.15(ve)-.15 G 2.906(d.\) If)
.15 F .406(there are processes that ha)2.906 F .706 -.15(ve c)-.2 H
(alled).15 E F1(memp_open)108 247.2 Q F0 2.581(without calling)5.081 F
F1(memp_close)5.081 E F0 2.581
(\(i.e., there are processes currently using the memory pool\),)5.081 F
F1(memp_unlink)108 259.2 Q F0 .794(will f)3.294 F .794(ail without further action, unless the force \215ag is set, in which case)
-.1 F F1(memp_unlink)3.295 E F0(will)3.295 E(attempt to remo)108 271.2 Q
.3 -.15(ve t)-.15 H(he memory pool \214les re).15 E -.05(ga)-.15 G
(rdless of an).05 E 2.5(yp)-.15 G(rocesses still using the memory pool.)
-2.5 E .766(The result of attempting to forcibly destro)108 288 R 3.266
(yt)-.1 G .766(he re)-3.266 F .766(gion when a process has the re)-.15 F
.765(gion open is unspeci\214ed.)-.15 F 1.232
(Processes using a shared memory re)108 300 R 1.232
(gion maintain an open \214le descriptor for it.)-.15 F 1.232
(On UNIX systems, the)6.232 F(re)108 312 Q .474(gion remo)-.15 F -.25
(va)-.15 G 2.974(ls).25 G .473(hould succeed and processes that ha)
-2.974 F .773 -.15(ve a)-.2 H .473(lready joined the re).15 F .473
(gion should continue to run in)-.15 F .097(the re)108 324 R .097
(gion without change, ho)-.15 F(we)-.25 E -.15(ve)-.25 G 2.597(rp).15 G
.098(rocesses attempting to join the memory pool will either f)-2.597 F
.098(ail or attempt)-.1 F .587(to create a ne)108 336 R 3.087(wr)-.25 G
-.15(eg)-3.087 G 3.087(ion. On).15 F .586(other systems, e.g., WNT)3.087
F 3.086(,w)-.74 G .586(here the)-3.086 F F1(unlink)3.086 E F0 .586
(\(2\) system call will f).67 F .586(ail if an)-.1 F 3.086(yp)-.15 G
(ro-)-3.086 E(cess has an open \214le descriptor for the \214le, the re)
108 348 Q(gion remo)-.15 E -.25(va)-.15 G 2.5(lw).25 G(ill f)-2.5 E
(ail.)-.1 E .929(In the case of catastrophic or system f)108 364.8 R
.929(ailure, database reco)-.1 F -.15(ve)-.15 G .93
(ry must be performed \(see).15 F F1(db_r)3.43 E(eco)-.37 E(ver)-.1 E F0
.93(\(1\) or).73 F .74(the DB_RECO)108 376.8 R .74(VER and DB_RECO)-.5 F
(VER_F)-.5 E -1.21 -1.11(AT A)-.74 H 3.24<4c8d>1.11 G .74(ags to)-3.24 F
F1(db_appinit)3.24 E F0 3.24(\(3\)\). Alternati).68 F -.15(ve)-.25 G(ly)
.15 E 3.24(,i)-.65 G 3.24(fr)-3.24 G(eco)-3.24 E -.15(ve)-.15 G .74
(ry is not).15 F .074
(required because no database state is maintained across f)108 388.8 R
.075(ailures, it is possible to clean up a memory pool by)-.1 F(remo)108
400.8 Q 1.176
(ving all of the \214les in the directory speci\214ed to the)-.15 F F1
(memp_open)3.675 E F0 1.175(function, as memory pool \214les are)3.675 F
(ne)108 412.8 Q -.15(ve)-.25 G 2.882(rc).15 G .383(reated in an)-2.882 F
2.883(yd)-.15 G .383(irectory other than the one speci\214ed to)-2.883 F
F1(memp_open)2.883 E F0 5.383(.N).24 G .383(ote, ho)-5.383 F(we)-.25 E
-.15(ve)-.25 G 1.183 -.4(r, t).15 H .383(hat this has the).4 F
(potential to remo)108 424.8 Q .3 -.15(ve \214)-.15 H
(les created by the other DB subsystems in this database en).15 E
(vironment.)-.4 E(The)108 441.6 Q F1(memp_unlink)2.5 E F0
(function returns the v)2.5 E(alue of)-.25 E F1(errno)2.5 E F0(on f)2.5
E(ailure and 0 on success.)-.1 E F1(memp_r)92 458.4 Q -.4(eg)-.37 G
(ister).4 E F0(The)108 470.4 Q F1(memp_r)2.978 E -.4(eg)-.37 G(ister).4
E F0 .478(function re)2.978 F .477
(gisters page-in and page-out functions for \214les of type)-.15 F F1
(ftype)2.977 E F0 .477(in the speci\214ed)2.977 F(pool.)108 482.4 Q .434
(If the)108 499.2 R F1(pgin)2.934 E F0 .435(function is non-NULL, it is called each time a page is read into the memory pool from a \214le of)
2.934 F(type)108 511.2 Q F1(ftype)4.874 E F0 4.874(,o).18 G 4.874(rap)
-4.874 G 2.374(age is created for a \214le of type)-4.874 F F1(ftype)
4.874 E F0 2.374(\(see the DB_MPOOL_CREA)4.874 F 2.373
(TE \215ag for the)-1.11 F F1(memp_fg)108 523.2 Q(et)-.1 E F0 2.677
(function\). If)2.677 F(the)2.677 E F1(pgout)2.677 E F0 .178(function is non-NULL, it is called each time a page is written to a \214le of)
2.677 F(type)108 535.2 Q F1(ftype)2.5 E F0(.).18 E .082(Both the)108 552
R F1(pgin)2.582 E F0(and)2.582 E F1(pgout)2.582 E F0 .082
(functions are called with the page number)2.582 F 2.582(,ap)-.4 G .082
(ointer to the page being read or writ-)-2.582 F .683(ten, and an)108
564 R 3.183(ya)-.15 G -.18(rg)-3.183 G(ument).18 E F1(pgcookie)3.183 E
F0 .684(that w)3.184 F .684(as speci\214ed to the)-.1 F F1(memp_fopen)
3.184 E F0 .684(function when the \214le w)3.184 F .684(as opened.)-.1 F
(The)108 576 Q F1(pgin)2.562 E F0(and)2.562 E F1(pgout)2.562 E F0 .061
(functions should return 0 on success, and an applicable non-zero)2.561
F F1(errno)2.561 E F0 -.25(va)2.561 G .061(lue on f).25 F(ailure,)-.1 E
(in which case the)108 588 Q F1(db_mpool)2.5 E F0
(function calling it will also f)2.5 E(ail, returning that)-.1 E F1
(errno)2.5 E F0 -.25(va)2.5 G(lue.).25 E .195(The purpose of the)108
604.8 R F1(memp_r)2.695 E -.4(eg)-.37 G(ister).4 E F0 .195(function is to support processing when pages are entered into, or \215ushed)
2.695 F .217(from, the pool.)108 616.8 R 2.717<418c>5.217 G .216
(le type must be speci\214ed to mak)-2.717 F 2.716(ei)-.1 G 2.716(tp)
-2.716 G .216(ossible for unrelated threads or processes, that are)
-2.716 F .656(sharing a pool, to e)108 628.8 R .656(vict each other')
-.25 F 3.156(sp)-.55 G .656(ages from the pool.)-3.156 F .656
(Applications should call)5.656 F F1(memp_r)3.156 E -.4(eg)-.37 G(ister)
.4 E F0 3.156(,d).73 G(uring)-3.156 E .735(initialization, for each type of \214le requiring input or output processing that will be sharing the underlying)
108 640.8 R 2.886(pool. \(No)108 652.8 R(re)2.886 E .386(gistry is necessary for the standard access method types, btree, hash and recno, as)
-.15 F F1(db_open)2.887 E F0(\(3\)).24 E(re)108 664.8 Q
(gisters them separately)-.15 E(.\))-.65 E .034
(If a thread or process does not call)108 681.6 R F1(memp_r)2.534 E -.4
(eg)-.37 G(ister).4 E F0 .034
(for a \214le type, it is impossible for it to e)2.534 F .033
(vict pages for an)-.25 F(y)-.15 E .914
(\214le requiring input or output processing from the pool.)108 693.6 R
-.15(Fo)5.914 G 3.414(rt).15 G .914(his reason,)-3.414 F F1(memp_r)3.414
E -.4(eg)-.37 G(ister).4 E F0 .914(should al)3.414 F -.1(wa)-.1 G .914
(ys be).1 F .209(called by each application sharing a pool for each type of \214le included in the pool, re)
108 705.6 R -.05(ga)-.15 G .208(rdless of whether or).05 F
(not the application itself uses \214les of that type.)108 717.6 Q
(May 10, 1998)278.085 768 Q(6)201.085 E EP
%%Page: 7 7
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 334.4(DB_MPOOL\(3\) DB_MPOOL\(3\))72 48 R .375
(There are no standard v)108 84 R .376(alues for)-.25 F/F1 10
/Times-Italic@0 SF(ftype)2.876 E F0(,).18 E F1(pgin)2.876 E F0(,).24 E
F1(pgout)2.876 E F0(and)2.876 E F1(pgcookie)2.876 E F0 2.876(,e).18 G
.376(xcept that the)-3.026 F F1(ftype)2.876 E F0 -.25(va)2.876 G .376
(lue for a \214le must).25 F .047(be a non-zero positi)108 96 R .346
-.15(ve n)-.25 H(umber).15 E 2.546(,a)-.4 G 2.546(sn)-2.546 G -2.25 -.15
(eg a)-2.546 H(ti).15 E .346 -.15(ve n)-.25 H .046(umbers are reserv).15
F .046(ed for internal use by the DB library)-.15 F 5.046(.F)-.65 G .046
(or this)-5.196 F
(reason, applications sharing a pool must coordinate their v)108 108 Q
(alues amongst themselv)-.25 E(es.)-.15 E(The)108 124.8 Q F1(memp_r)2.5
E -.4(eg)-.37 G(ister).4 E F0(function returns the v)2.5 E(alue of)-.25
E F1(errno)2.5 E F0(on f)2.5 E(ailure and 0 on success.)-.1 E F1
(memp_tric)92 141.6 Q(kle)-.2 E F0(The)108 153.6 Q F1(memp_tric)3.762 E
(kle)-.2 E F0 1.262(function ensures that at least)3.762 F F1(pct)3.762
E F0 1.263(percent of the pages in the shared memory pool are)3.762 F
.844(clean by writing dirty pages to their backing \214les.)108 165.6 R
.844(If the)5.844 F F1(nwr)3.344 E(otep)-.45 E F0(ar)3.344 E .844
(gument is non-NULL, the number of)-.18 F(pages that were written to reach the correct percentage is returned in the memory location it references.)
108 177.6 Q 1.237(The purpose of the)108 194.4 R F1(memp_tric)3.737 E
(kle)-.2 E F0 1.238
(function is to enable a memory pool manager to ensure that a page is)
3.738 F(al)108 206.4 Q -.1(wa)-.1 G(ys a).1 E -.25(va)-.2 G
(ilable for reading in ne).25 E 2.5(wi)-.25 G(nformation without ha)-2.5
E(ving to w)-.2 E(ait for a write.)-.1 E(The)108 223.2 Q F1(memp_tric)
2.5 E(kle)-.2 E F0(function returns the v)2.5 E(alue of)-.25 E F1(errno)
2.5 E F0(on f)2.5 E(ailure and 0 on success.)-.1 E F1(memp_sync)92 240 Q
F0(The)108 252 Q F1(memp_sync)2.629 E F0 .129(function ensures that all the modi\214ed pages in the pool with log sequence numbers \(LSNs\))
2.629 F(less than the)108 264 Q F1(lsn)2.5 E F0(ar)2.5 E
(gument are written to disk.)-.18 E(The)108 280.8 Q F1(memp_sync)3.717 E
F0 1.217(function returns the v)3.717 F 1.217(alue of)-.25 F F1(errno)
3.717 E F0 1.217(on f)3.717 F 1.218
(ailure, 0 on success, and DB_INCOMPLETE if)-.1 F .065
(there were pages which need to be written b)108 292.8 R .065(ut which)
-.2 F F1(memp_sync)2.565 E F0 -.1(wa)2.565 G 2.565(su).1 G .064
(nable to write immediately)-2.565 F 5.064(.I)-.65 G 2.564(na)-5.064 G
(ddi-)-2.564 E .195(tion, if)108 304.8 R F1(memp_sync)2.695 E F0 .195
(returns success, the v)2.695 F .195(alue of)-.25 F F1(lsn)2.695 E F0
.195(will be o)2.695 F -.15(ve)-.15 G .195(rwritten with the lar).15 F
.195(gest LSN from an)-.18 F 2.695(yp)-.15 G(age)-2.695 E(which w)108
316.8 Q(as written by)-.1 E F1(memp_sync)2.5 E F0
(to satisfy this request.)2.5 E .905(The purpose of the)108 333.6 R F1
(memp_sync)3.405 E F0 .904(function is to enable a transaction manager to ensure, as part of a check-)
3.405 F .601(point, that all pages modi\214ed by a certain time ha)108
345.6 R .902 -.15(ve b)-.2 H .602(een written to disk.).15 F -.15(Pa)
5.602 G .602(ges in the pool which cannot).15 F .459(be written back to disk immediately \(e.g., are currently pinned\) are written to disk as soon as it is possible)
108 357.6 R .521(to do so.)108 369.6 R .521(The e)5.521 F .521
(xpected beha)-.15 F .521
(vior of the transaction manager is to call the)-.2 F F1(memp_sync)3.021
E F0 .522(function and then, if)3.021 F .626
(the return indicates that some pages could not be written immediately)
108 381.6 R 3.125(,t)-.65 G 3.125(ow)-3.125 G .625
(ait brie\215y and retry ag)-3.225 F .625(ain with)-.05 F
(the same LSN until the)108 393.6 Q F1(memp_sync)2.5 E F0
(function returns that all pages ha)2.5 E .3 -.15(ve b)-.2 H
(een written.).15 E 2.823 -.8(To s)108 410.4 T 1.223(upport the).8 F F1
(memp_sync)3.723 E F0(functionality)3.723 E 3.724(,i)-.65 G 3.724(ti)
-3.724 G 3.724(sn)-3.724 G 1.224(ecessary that the pool functions kno)
-3.724 F 3.724(wt)-.25 G 1.224(he location of the)-3.724 F 1.146
(LSN on the page for each \214le type.)108 422.4 R 1.146(This location should be speci\214ed when the \214le is opened using the)
6.146 F F1(memp_fopen)108 434.4 Q F0 2.5(function. \(Note,)2.5 F
(it is not required that the LSN be aligned on the page in an)2.5 E 2.5
(yw)-.15 G(ay)-2.6 E(.\))-.65 E F1(memp_stat)92 451.2 Q F0(The)108 463.2
Q F1(memp_stat)3.165 E F0 .665(function creates statistical structures and copies pointers to them into user)
3.165 F .666(-speci\214ed mem-)-.2 F 1.092(ory locations.)108 475.2 R
1.091(The statistics include the number of \214les participating in the pool, the acti)
6.092 F 1.391 -.15(ve p)-.25 H 1.091(ages in the).15 F
(pool, and information as to ho)108 487.2 Q 2.5(we)-.25 G -.25(ff)-2.5 G
(ecti).25 E .3 -.15(ve t)-.25 H(he cache has been.).15 E .048
(Statistical structures are created in allocated memory)108 504 R 5.049
(.I)-.65 G(f)-5.049 E F1(db_malloc)2.549 E F0 .049
(is non-NULL, it is called to allocate the)2.549 F(memory)108 516 Q 2.83
(,o)-.65 G .33(therwise, the library function)-2.83 F F1(malloc)2.829 E
F0 .329(\(3\) is used.).31 F .329(The function)5.329 F F1(db_malloc)
2.829 E F0 .329(must match the calling)2.829 F(con)108 528 Q -.15(ve)-.4
G 2.03(ntions of the).15 F F1(malloc)4.53 E F0 2.031
(\(3\) library routine.).31 F(Re)7.031 E -.05(ga)-.15 G 2.031
(rdless, the caller is responsible for deallocating the).05 F .708
(returned memory)108 540 R 5.708(.T)-.65 G 3.208(od)-6.508 G .708
(eallocate the returned memory)-3.208 F 3.208(,f)-.65 G .707
(ree each returned memory pointer; pointers inside)-3.208 F
(the memory do not need to be indi)108 552 Q(vidually freed.)-.25 E(If)
108 568.8 Q F1(gsp)3.369 E F0 .869
(is non-NULL, the global statistics for the memory pool)3.369 F F1(mp)
3.37 E F0 .87(are copied into the memory location it)3.37 F 2.57
(references. The)108 580.8 R .069
(global statistics are stored in a structure of type DB_MPOOL_ST)2.57 F
2.289 -1.11(AT \()-.93 H -1.95(typedef ')1.11 F 2.569(di)-.5 G 2.569(n<)
-2.569 G(db)-2.569 E(.h>\).)-.4 E(The follo)108 597.6 Q
(wing DB_MPOOL_ST)-.25 E 2.22 -1.11(AT \214)-.93 H
(elds will be \214lled in:)1.11 E(u_int32_t st_refcnt;)108 614.4 Q
(The number of references to the re)133 626.4 Q(gion.)-.15 E
(u_int32_t st_re)108 638.4 Q(gsize;)-.15 E(The size of the re)133 650.4
Q(gion.)-.15 E(size_t st_cachesize;)108 662.4 Q(Cache size in bytes.)133
674.4 Q(u_int32_t st_cache_hit;)108 686.4 Q
(Requested pages found in the cache.)133 698.4 Q(May 10, 1998)278.085
768 Q(7)201.085 E EP
%%Page: 8 8
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 334.4(DB_MPOOL\(3\) DB_MPOOL\(3\))72 48 R
(u_int32_t st_cache_miss;)108 84 Q
(Requested pages not found in the cache.)133 96 Q(u_int32_t st_map;)108
108 Q 1.688
(Requested pages mapped into the process' address space \(there is no a)
133 120 R -.25(va)-.2 G 1.689(ilable information as to).25 F .673
(whether or not this request caused disk I/O, although e)133 132 R .672
(xamining the application page f)-.15 F .672(ault rate may)-.1 F
(be helpful\).)133 144 Q(u_int32_t st_page_create;)108 156 Q -.15(Pa)133
168 S(ges created in the cache.).15 E(u_int32_t st_page_in;)108 180 Q
-.15(Pa)133 192 S(ges read into the cache.).15 E(u_int32_t st_page_out;)
108 204 Q -.15(Pa)133 216 S
(ges written from the cache to the backing \214le.).15 E
(u_int32_t st_ro_e)108 228 Q(vict;)-.25 E
(Clean pages forced from the cache.)133 240 Q(u_int32_t st_rw_e)108 252
Q(vict;)-.25 E(Dirty pages forced from the cache.)133 264 Q
(u_int32_t st_hash_b)108 276 Q(uck)-.2 E(ets;)-.1 E(Number of hash b)133
288 Q(uck)-.2 E(ets in b)-.1 E(uf)-.2 E(fer hash table.)-.25 E
(u_int32_t st_hash_searches;)108 300 Q -.8(To)133 312 S(tal number of b)
.8 E(uf)-.2 E(fer hash table lookups.)-.25 E(u_int32_t st_hash_longest;)
108 324 Q(The longest chain e)133 336 Q -.15(ve)-.25 G 2.5(re).15 G
(ncountered in b)-2.5 E(uf)-.2 E(fer hash table lookups.)-.25 E
(u_int32_t st_hash_e)108 348 Q(xamined;)-.15 E -.8(To)133 360 S
(tal number of hash elements tra).8 E -.15(ve)-.2 G
(rsed during hash table lookups.).15 E(u_int32_t st_page_clean;)108 372
Q(Clean pages currently in the cache.)133 384 Q
(u_int32_t st_page_dirty;)108 396 Q(Dirty pages currently in the cache.)
133 408 Q(u_int32_t st_page_trickle;)108 420 Q
(Dirty pages written using the)133 432 Q/F1 10/Times-Italic@0 SF
(memp_tric)2.5 E(kle)-.2 E F0(interf)2.5 E(ace.)-.1 E(u_int32_t st_re)
108 444 Q(gion_w)-.15 E(ait;)-.1 E
(The number of times that a thread of control w)133 456 Q
(as forced to w)-.1 E(ait before obtaining the re)-.1 E(gion lock.)-.15
E(u_int32_t st_re)108 468 Q(gion_no)-.15 E -.1(wa)-.25 G(it;).1 E
(The number of times that a thread of control w)133 480 Q
(as able to obtain the re)-.1 E(gion lock without w)-.15 E(aiting.)-.1 E
(If)108 496.8 Q F1(fsp)2.503 E F0 .003
(is non-NULL, a pointer to a NULL-terminated v)2.503 F .004
(ariable length array of statistics for indi)-.25 F .004
(vidual \214les, in)-.25 F .264(the memory pool)108 508.8 R F1(mp)2.764
E F0 2.764(,i).19 G 2.764(sc)-2.764 G .264
(opied into the memory location it references.)-2.764 F .263(If no indi)
5.263 F .263(vidual \214les currently e)-.25 F(xist)-.15 E
(in the memory pool,)108 520.8 Q F1(fsp)2.5 E F0(will be set to NULL.)
2.5 E .419(The per)108 537.6 R .419
(-\214le statistics are stored in structures of type DB_MPOOL_FST)-.2 F
2.639 -1.11(AT \()-.93 H -1.95(typedef ')1.11 F 2.92(di)-.5 G 2.92(n<)
-2.92 G(db)-2.92 E 2.92(.h>\). The)-.4 F(fol-)2.92 E(lo)108 549.6 Q
(wing DB_MPOOL_FST)-.25 E 2.22 -1.11(AT \214)-.93 H(elds will be \214lled in for each \214le in the pool, i.e., each element of the array:)
1.11 E(char *\214le_name;)108 566.4 Q(The name of the \214le.)133 578.4
Q(size_t st_pagesize;)108 590.4 Q -.15(Pa)133 602.4 S(ge size in bytes.)
.15 E(u_int32_t st_cache_hit;)108 614.4 Q
(Requested pages found in the cache.)133 626.4 Q
(u_int32_t st_cache_miss;)108 638.4 Q
(Requested pages not found in the cache.)133 650.4 Q(u_int32_t st_map;)
108 662.4 Q(Requested pages mapped into the process' address space.)133
674.4 Q(u_int32_t st_page_create;)108 686.4 Q -.15(Pa)133 698.4 S
(ges created in the cache.).15 E(May 10, 1998)278.085 768 Q(8)201.085 E
EP
%%Page: 9 9
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 334.4(DB_MPOOL\(3\) DB_MPOOL\(3\))72 48 R
(u_int32_t st_page_in;)108 84 Q -.15(Pa)133 96 S
(ges read into the cache.).15 E(u_int32_t st_page_out;)108 108 Q -.15
(Pa)133 120 S(ges written from the cache to the backing \214le.).15 E
(The)108 136.8 Q/F1 10/Times-Italic@0 SF(memp_stat)2.5 E F0
(function returns the v)2.5 E(alue of)-.25 E F1(errno)2.5 E F0(on f)2.5
E(ailure and 0 on success.)-.1 E/F2 9/Times-Bold@0 SF(ENVIR)72 153.6 Q
(ONMENT V)-.27 E(ARIABLES)-1.215 E F0(The follo)108 165.6 Q(wing en)-.25
E(vironment v)-.4 E(ariables af)-.25 E(fect the e)-.25 E -.15(xe)-.15 G
(cution of).15 E F1(db_mpool)2.5 E F0(:).51 E(DB_HOME)108 182.4 Q 1.915
(If the)133 194.4 R F1(dben)4.415 E(v)-.4 E F0(ar)4.415 E 1.915
(gument to)-.18 F F1(memp_open)4.415 E F0 -.1(wa)4.415 G 4.415(si).1 G
1.915(nitialized using)-4.415 F F1(db_appinit)4.415 E F0 4.415(,t).68 G
1.915(he en)-4.415 F 1.915(vironment v)-.4 F(ariable)-.25 E .508(DB_HOME may be used as the path of the database home for the interpretation of the)
133 206.4 R F1(dir)3.009 E F0(ar)3.009 E(gument)-.18 E(to)133 218.4 Q F1
(memp_open)2.5 E F0 2.5(,a).24 G 2.5(sd)-2.5 G(escribed in)-2.5 E F1
(db_appinit)2.5 E F0(\(3\).).68 E(TMPDIR)108 235.2 Q .155(If the)133
247.2 R F1(dben)2.655 E(v)-.4 E F0(ar)2.655 E .155(gument to)-.18 F F1
(memp_open)2.655 E F0 -.1(wa)2.655 G 2.655(sN).1 G .155
(ULL or not initialized using)-2.655 F F1(db_appinit)2.655 E F0 2.655
(,t).68 G .155(he en)-2.655 F(vironment)-.4 E -.25(va)133 259.2 S .529(riable TMPDIR may be used as the directory in which to create the memory pool, as described in)
.25 F(the)133 271.2 Q F1(memp_open)2.5 E F0(section abo)2.5 E -.15(ve)
-.15 G(.).15 E F2(ERR)72 288 Q(ORS)-.27 E F0(The)108 300 Q F1(memp_open)
2.644 E F0 .144(function may f)2.644 F .144(ail and return)-.1 F F1
(errno)2.644 E F0 .144(for an)2.644 F 2.644(yo)-.15 G 2.644(ft)-2.644 G
.144(he errors speci\214ed for the follo)-2.644 F .143(wing DB and)-.25
F(library functions: DBmemp->pgin\(3\), DBmemp->pgout\(3\), close\(2\), db_v)
108 312 Q(ersion\(3\), fcntl\(2\), f)-.15 E(\215ush\(3\),)-.25 E(fsync\(2\), log_compare\(3\), log_\215ush\(3\), lseek\(2\), malloc\(3\), memcmp\(3\), memcp)
108 324 Q(y\(3\), memp_close\(3\),)-.1 E(memp_unlink\(3\), memset\(3\), mmap\(2\), munmap\(2\), open\(2\), sig\214llset\(3\), sigprocmask\(2\), stat\(2\), str)
108 336 Q(-)-.2 E(cp)108 348 Q(y\(3\), strdup\(3\), strerror\(3\), strlen\(3\), time\(3\), unlink\(2\), and write\(2\).)
-.1 E(In addition, the)108 364.8 Q F1(memp_open)2.5 E F0(function may f)
2.5 E(ail and return)-.1 E F1(errno)2.5 E F0(for the follo)2.5 E
(wing conditions:)-.25 E([EA)108 381.6 Q(GAIN])-.4 E
(The shared memory re)133 393.6 Q(gion w)-.15 E(as lock)-.1 E
(ed and \(repeatedly\) una)-.1 E -.25(va)-.2 G(ilable.).25 E([EINV)108
410.4 Q(AL])-1.35 E(An in)133 422.4 Q -.25(va)-.4 G(lid \215ag v).25 E
(alue or parameter w)-.25 E(as speci\214ed.)-.1 E
(The DB_THREAD \215ag w)133 446.4 Q(as speci\214ed and spinlocks are not implemented for this architecture.)
-.1 E 2.5(AN)133 470.4 S(ULL pathname w)-2.5 E
(as speci\214ed without the DB_MPOOL_PRIV)-.1 E -1.11(AT)-1.35 G 2.5
<458d>1.11 G(ag.)-2.5 E(The speci\214ed cache size w)133 494.4 Q
(as impossibly small.)-.1 E(The)108 511.2 Q F1(memp_close)2.583 E F0
.083(function may f)2.583 F .082(ail and return)-.1 F F1(errno)2.582 E
F0 .082(for an)2.582 F 2.582(yo)-.15 G 2.582(ft)-2.582 G .082
(he errors speci\214ed for the follo)-2.582 F .082(wing DB and)-.25 F
(library functions: close\(2\), fcntl\(2\), f)108 523.2 Q
(\215ush\(3\), memp_fclose\(3\), munmap\(2\), and strerror\(3\).)-.25 E
(The)108 540 Q F1(memp_fopen)3.485 E F0 .985(function may f)3.485 F .985
(ail and return)-.1 F F1(errno)3.485 E F0 .985(for an)3.485 F 3.485(yo)
-.15 G 3.485(ft)-3.485 G .986(he errors speci\214ed for the follo)-3.485
F .986(wing DB)-.25 F(and library functions: DBmemp->pgin\(3\), DBmemp->pgout\(3\), close\(2\), fcntl\(2\), f)
108 552 Q(\215ush\(3\), fsync\(2\),)-.25 E(log_compare\(3\), log_\215ush\(3\), lseek\(2\), malloc\(3\), memcmp\(3\), memcp)
108 564 Q(y\(3\), memset\(3\), mmap\(2\), open\(2\),)-.1 E
(sig\214llset\(3\), sigprocmask\(2\), stat\(2\), strcp)108 576 Q(y\(3\), strdup\(3\), strerror\(3\), strlen\(3\), time\(3\), unlink\(2\), and)
-.1 E(write\(2\).)108 588 Q(In addition, the)108 604.8 Q F1(memp_fopen)
2.5 E F0(function may f)2.5 E(ail and return)-.1 E F1(errno)2.5 E F0
(for the follo)2.5 E(wing conditions:)-.25 E([EINV)108 621.6 Q(AL])-1.35
E(An in)133 633.6 Q -.25(va)-.4 G(lid \215ag v).25 E
(alue or parameter w)-.25 E(as speci\214ed.)-.1 E .001
(The \214le has already been entered into the pool, and the)133 657.6 R
F1(pa)2.501 E -.1(ge)-.1 G(size).1 E F0 -.25(va)2.501 G .001
(lue is not the same as when the \214le).25 F -.1(wa)133 669.6 S 2.5(se)
.1 G(ntered into the pool, or the length of the \214le is not zero or a multiple of the)
-2.5 E F1(pa)2.5 E -.1(ge)-.1 G(size).1 E F0(.).18 E(The DB_RDONL)133
693.6 Q 2.5<598d>-1 G(ag w)-2.5 E(as speci\214ed for an in-memory pool.)
-.1 E(The)108 710.4 Q F1(memp_fclose)3.42 E F0 .92(function may f)3.42 F
.92(ail and return)-.1 F F1(errno)3.42 E F0 .92(for an)3.42 F 3.42(yo)
-.15 G 3.42(ft)-3.42 G .92(he errors speci\214ed for the follo)-3.42 F
.92(wing DB)-.25 F(and library functions: close\(2\), fcntl\(2\), f)108
722.4 Q(\215ush\(3\), munmap\(2\), and strerror\(3\).)-.25 E
(May 10, 1998)278.085 768 Q(9)201.085 E EP
%%Page: 10 10
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 334.4(DB_MPOOL\(3\) DB_MPOOL\(3\))72 48 R(The)
108 84 Q/F1 10/Times-Italic@0 SF(memp_fg)2.896 E(et)-.1 E F0 .396
(function may f)2.896 F .396(ail and return)-.1 F F1(errno)2.896 E F0
.396(for an)2.896 F 2.896(yo)-.15 G 2.896(ft)-2.896 G .396
(he errors speci\214ed for the follo)-2.896 F .397(wing DB and)-.25 F(library functions: DBmemp->pgin\(3\), DBmemp->pgout\(3\), close\(2\), fcntl\(2\), f)
108 96 Q(\215ush\(3\), fsync\(2\), log_com-)-.25 E(pare\(3\), log_\215ush\(3\), lseek\(2\), malloc\(3\), memcmp\(3\), memcp)
108 108 Q(y\(3\), memset\(3\), mmap\(2\), open\(2\), read\(2\),)-.1 E
(sig\214llset\(3\), sigprocmask\(2\), stat\(2\), strcp)108 120 Q(y\(3\), strdup\(3\), strerror\(3\), strlen\(3\), time\(3\), unlink\(2\), and)
-.1 E(write\(2\).)108 132 Q(In addition, the)108 148.8 Q F1(memp_fg)2.5
E(et)-.1 E F0(function may f)2.5 E(ail and return)-.1 E F1(errno)2.5 E
F0(for the follo)2.5 E(wing conditions:)-.25 E([EA)108 165.6 Q(GAIN])-.4
E 1.568(The page reference count has o)133 177.6 R -.15(ve)-.15 G
(r\215o).15 E 4.068(wed. \(This)-.25 F 1.568(should ne)4.068 F -.15(ve)
-.25 G 4.068(rh).15 G 1.568(appen unless there')-4.068 F 4.068(sab)-.55
G 1.568(ug in the)-4.268 F(application.\))133 189.6 Q([EINV)108 206.4 Q
(AL])-1.35 E(An in)133 218.4 Q -.25(va)-.4 G(lid \215ag v).25 E
(alue or parameter w)-.25 E(as speci\214ed.)-.1 E
(The DB_MPOOL_NEW \215ag w)133 242.4 Q(as set and the source \214le w)
-.1 E(as not opened for writing.)-.1 E(The requested page does not e)133
266.4 Q(xist and DB_MPOOL_CREA)-.15 E(TE w)-1.11 E(as not set.)-.1 E
(More than one of DB_MPOOL_CREA)133 290.4 Q
(TE, DB_MPOOL_LAST and DB_MPOOL_NEW w)-1.11 E(as set.)-.1 E([ENOMEM])108
307.2 Q(The cache is full and no more pages will \214t in the pool.)133
319.2 Q(The)108 336 Q F1(memp_fput)2.86 E F0 .36(function may f)2.86 F
.36(ail and return)-.1 F F1(errno)2.86 E F0 .359(for an)2.86 F 2.859(yo)
-.15 G 2.859(ft)-2.859 G .359(he errors speci\214ed for the follo)-2.859
F .359(wing DB and)-.25 F(library functions: DBmemp->pgin\(3\), DBmemp->pgout\(3\), close\(2\), fcntl\(2\), f)
108 348 Q(\215ush\(3\), fsync\(2\), log_com-)-.25 E(pare\(3\), log_\215ush\(3\), lseek\(2\), malloc\(3\), memcmp\(3\), memcp)
108 360 Q(y\(3\), memset\(3\), mmap\(2\), open\(2\), sig-)-.1 E
(\214llset\(3\), sigprocmask\(2\), stat\(2\), strcp)108 372 Q(y\(3\), strdup\(3\), strerror\(3\), strlen\(3\), time\(3\), unlink\(2\), and)
-.1 E(write\(2\).)108 384 Q(In addition, the)108 400.8 Q F1(memp_fput)
2.5 E F0(function may f)2.5 E(ail and return)-.1 E F1(errno)2.5 E F0
(for the follo)2.5 E(wing conditions:)-.25 E([EA)108 417.6 Q(CCES])-.4 E
(The DB_MPOOL_DIR)133 429.6 Q(TY \215ag w)-.6 E
(as set and the source \214le w)-.1 E(as not opened for writing.)-.1 E
([EINV)108 446.4 Q(AL])-1.35 E(An in)133 458.4 Q -.25(va)-.4 G
(lid \215ag v).25 E(alue or parameter w)-.25 E(as speci\214ed.)-.1 E
(The)133 482.4 Q F1(pgaddr)2.5 E F0
(parameter does not reference a page returned by)2.5 E F1(memp_fg)2.5 E
(et)-.1 E F0(.).68 E(More than one of DB_MPOOL_CLEAN and DB_MPOOL_DIR)
133 506.4 Q(TY w)-.6 E(as set.)-.1 E(The)108 523.2 Q F1(memp_fset)2.953
E F0 .453(function may f)2.953 F .452(ail and return)-.1 F F1(errno)
2.952 E F0 .452(for an)2.952 F 2.952(yo)-.15 G 2.952(ft)-2.952 G .452
(he errors speci\214ed for the follo)-2.952 F .452(wing DB and)-.25 F
(library functions: fcntl\(2\), and f)108 535.2 Q(\215ush\(3\).)-.25 E
(In addition, the)108 552 Q F1(memp_fset)2.5 E F0(function may f)2.5 E
(ail and return)-.1 E F1(errno)2.5 E F0(for the follo)2.5 E
(wing conditions:)-.25 E([EINV)108 568.8 Q(AL])-1.35 E(An in)133 580.8 Q
-.25(va)-.4 G(lid \215ag v).25 E(alue or parameter w)-.25 E
(as speci\214ed.)-.1 E(The)108 597.6 Q F1(memp_fsync)2.582 E F0 .082
(function may f)2.582 F .082(ail and return)-.1 F F1(errno)2.582 E F0
.082(for an)2.582 F 2.582(yo)-.15 G 2.582(ft)-2.582 G .082
(he errors speci\214ed for the follo)-2.582 F .083(wing DB and)-.25 F(library functions: DBmemp->pgin\(3\), DBmemp->pgout\(3\), close\(2\), fcntl\(2\), f)
108 609.6 Q(\215ush\(3\), fsync\(2\), log_com-)-.25 E
(pare\(3\), log_\215ush\(3\), lseek\(2\), malloc\(3\), memcp)108 621.6 Q
(y\(3\), memset\(3\), open\(2\), qsort\(3\), realloc\(3\), sig-)-.1 E
(\214llset\(3\), sigprocmask\(2\), stat\(2\), strcp)108 633.6 Q(y\(3\), strdup\(3\), strerror\(3\), strlen\(3\), unlink\(2\), and write\(2\).)
-.1 E(The)108 650.4 Q F1(memp_unlink)3.322 E F0 .822(function may f)
3.322 F .822(ail and return)-.1 F F1(errno)3.322 E F0 .822(for an)3.322
F 3.322(yo)-.15 G 3.322(ft)-3.322 G .821
(he errors speci\214ed for the follo)-3.322 F .821(wing DB)-.25 F
(and library functions: close\(2\), fcntl\(2\), f)108 662.4 Q
(\215ush\(3\), malloc\(3\), memcp)-.25 E
(y\(3\), memset\(3\), mmap\(2\), mun-)-.1 E(map\(2\), open\(2\), sig\214llset\(3\), sigprocmask\(2\), stat\(2\), strcp)
108 674.4 Q(y\(3\), strdup\(3\), strerror\(3\), strlen\(3\), and)-.1 E
(unlink\(2\).)108 686.4 Q(In addition, the)108 703.2 Q F1(memp_unlink)
2.5 E F0(function may f)2.5 E(ail and return)-.1 E F1(errno)2.5 E F0
(for the follo)2.5 E(wing conditions:)-.25 E(May 10, 1998)278.085 768 Q
(10)196.085 E EP
%%Page: 11 11
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 334.4(DB_MPOOL\(3\) DB_MPOOL\(3\))72 48 R([EB)
108 84 Q(USY])-.1 E(The shared memory re)133 96 Q(gion w)-.15 E
(as in use and the force \215ag w)-.1 E(as not set.)-.1 E(The)108 112.8
Q/F1 10/Times-Italic@0 SF(memp_r)3.007 E -.4(eg)-.37 G(ister).4 E F0
.507(function may f)3.007 F .507(ail and return)-.1 F F1(errno)3.008 E
F0 .508(for an)3.008 F 3.008(yo)-.15 G 3.008(ft)-3.008 G .508
(he errors speci\214ed for the follo)-3.008 F .508(wing DB)-.25 F
(and library functions: fcntl\(2\), and malloc\(3\).)108 124.8 Q(The)108
141.6 Q F1(memp_tric)3.302 E(kle)-.2 E F0 .802(function may f)3.302 F
.801(ail and return)-.1 F F1(errno)3.301 E F0 .801(for an)3.301 F 3.301
(yo)-.15 G 3.301(ft)-3.301 G .801(he errors speci\214ed for the follo)
-3.301 F .801(wing DB)-.25 F(and library functions: DBmemp->pgin\(3\), DBmemp->pgout\(3\), close\(2\), fcntl\(2\), f)
108 153.6 Q(\215ush\(3\), fsync\(2\),)-.25 E(log_compare\(3\), log_\215ush\(3\), lseek\(2\), malloc\(3\), memcmp\(3\), memcp)
108 165.6 Q(y\(3\), memset\(3\), mmap\(2\), open\(2\),)-.1 E
(sig\214llset\(3\), sigprocmask\(2\), stat\(2\), strcp)108 177.6 Q(y\(3\), strdup\(3\), strerror\(3\), strlen\(3\), time\(3\), unlink\(2\), and)
-.1 E(write\(2\).)108 189.6 Q(In addition, the)108 206.4 Q F1(memp_tric)
2.5 E(kle)-.2 E F0(function may f)2.5 E(ail and return)-.1 E F1(errno)
2.5 E F0(for the follo)2.5 E(wing conditions:)-.25 E([EINV)108 223.2 Q
(AL])-1.35 E(An in)133 235.2 Q -.25(va)-.4 G(lid \215ag v).25 E
(alue or parameter w)-.25 E(as speci\214ed.)-.1 E(The)108 252 Q F1
(memp_sync)2.737 E F0 .237(function may f)2.737 F .237(ail and return)
-.1 F F1(errno)2.737 E F0 .237(for an)2.737 F 2.737(yo)-.15 G 2.737(ft)
-2.737 G .236(he errors speci\214ed for the follo)-2.737 F .236
(wing DB and)-.25 F(library functions: DBmemp->pgin\(3\), DBmemp->pgout\(3\), close\(2\), fcntl\(2\), f)
108 264 Q(\215ush\(3\), fsync\(2\), log_com-)-.25 E(pare\(3\), log_\215ush\(3\), lseek\(2\), malloc\(3\), memcmp\(3\), memcp)
108 276 Q(y\(3\), memset\(3\), mmap\(2\), open\(2\),)-.1 E(qsort\(3\), realloc\(3\), sig\214llset\(3\), sigprocmask\(2\), stat\(2\), strcp)
108 288 Q(y\(3\), strdup\(3\), strerror\(3\), strlen\(3\), time\(3\),)
-.1 E(unlink\(2\), and write\(2\).)108 300 Q(In addition, the)108 316.8
Q F1(memp_sync)2.5 E F0(function may f)2.5 E(ail and return)-.1 E F1
(errno)2.5 E F0(for the follo)2.5 E(wing conditions:)-.25 E([EINV)108
333.6 Q(AL])-1.35 E(An in)133 345.6 Q -.25(va)-.4 G(lid \215ag v).25 E
(alue or parameter w)-.25 E(as speci\214ed.)-.1 E(The)133 369.6 Q F1
(memp_sync)2.5 E F0(function w)2.5 E(as called without logging ha)-.1 E
(ving been initialized in the en)-.2 E(vironment.)-.4 E(The)108 386.4 Q
F1(memp_stat)2.922 E F0 .421(function may f)2.922 F .421(ail and return)
-.1 F F1(errno)2.921 E F0 .421(for an)2.921 F 2.921(yo)-.15 G 2.921(ft)
-2.921 G .421(he errors speci\214ed for the follo)-2.921 F .421
(wing DB and)-.25 F(library functions: fcntl\(2\), malloc\(3\), memcp)
108 398.4 Q(y\(3\), and strlen\(3\).)-.1 E/F2 9/Times-Bold@0 SF
(SEE ALSO)72 415.2 Q F1(db_ar)108 427.2 Q -.15(ch)-.37 G(ive).15 E F0
(\(1\),).18 E F1(db_c)2.5 E(hec)-.15 E(kpoint)-.2 E F0(\(1\),).68 E F1
(db_deadloc)2.5 E(k)-.2 E F0(\(1\),).67 E F1(db_dump)2.5 E F0(\(1\),).19
E F1(db_load)2.5 E F0(\(1\),).77 E F1(db_r)2.5 E(eco)-.37 E(ver)-.1 E F0
(\(1\),).73 E F1(db_stat)2.5 E F0(\(1\),).68 E F1(db_intr)108 439.2 Q(o)
-.45 E F0(\(3\),).18 E F1(db_appinit)2.5 E F0(\(3\),).68 E F1(db_cur)2.5
E(sor)-.1 E F0(\(3\),).73 E F1(db_dbm)2.5 E F0(\(3\),).32 E F1
(db_internal)2.5 E F0(\(3\),).51 E F1(db_loc)2.5 E(k)-.2 E F0(\(3\),).67
E F1(db_lo)2.5 E(g)-.1 E F0(\(3\),).22 E F1(db_mpool)2.5 E F0(\(3\),).51
E F1(db_open)108 451.2 Q F0(\(3\),).24 E F1(db_thr)2.5 E(ead)-.37 E F0
(\(3\),).77 E F1(db_txn)2.5 E F0(\(3\)).24 E(May 10, 1998)278.085 768 Q
(11)196.085 E EP
%%Trailer
end
%%EOF
