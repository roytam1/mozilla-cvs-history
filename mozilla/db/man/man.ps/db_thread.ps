%!PS-Adobe-3.0
%%Creator: groff version 1.11
%%CreationDate: Sun May 31 22:58:24 1998
%%DocumentNeededResources: font Times-Bold
%%+ font Times-Roman
%%+ font Times-Italic
%%DocumentSuppliedResources: procset grops 1.11 0
%%Pages: 2
%%PageOrder: Ascend
%%Orientation: Portrait
%%EndComments
%%BeginProlog
%%BeginResource: procset grops 1.11 0
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/FL{
currentgray exch setgray fill setgray
}bind def
/BL/fill load def
/LW/setlinewidth load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%IncludeResource: font Times-Bold
%%IncludeResource: font Times-Roman
%%IncludeResource: font Times-Italic
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Italic@0 ENC0/Times-Italic RE/Times-Roman@0 ENC0/Times-Roman RE
/Times-Bold@0 ENC0/Times-Bold RE
%%EndProlog
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Bold@0 SF -.18(NA)72 28.8 S(ME).18 E/F1 10/Times-Roman@0 SF
(db_thread \255 using threads in the DB library)108 40.8 Q(.)-.65 E F0
(DESCRIPTION)72 57.6 Q F1 .486(The DB library is a f)108 69.6 R .485
(amily of groups of functions that pro)-.1 F .485
(vides a modular programming interf)-.15 F .485(ace to trans-)-.1 F .523
(actions and record-oriented \214le access.)108 81.6 R .523
(The library includes support for transactions, locking, logging and)
5.523 F .507(\214le page caching, as well as v)108 93.6 R .507
(arious inde)-.25 F -.15(xe)-.15 G 3.007(da).15 G .506(ccess methods.)
-3.007 F(Man)5.506 E 3.006(yo)-.15 G 3.006(ft)-3.006 G .506
(he functional groups \(e.g., the \214le)-3.006 F .168(page caching functions\) are useful independent of the other DB functions, although some functional groups)
108 105.6 R .122(are e)108 117.6 R .121(xplicitly based on other functional groups \(e.g., transactions and logging\).)
-.15 F -.15(Fo)5.121 G 2.621(rag).15 G .121(eneral description of)-2.621
F(the DB package, see)108 129.6 Q/F2 10/Times-Italic@0 SF(db_intr)2.5 E
(o)-.45 E F1(\(3\).).18 E(This manual pages describes the speci\214c details of using DB from within threaded programs.)
108 146.4 Q 1.57(The DB library is not itself multi-threaded.)108 163.2
R 1.571(The library w)6.571 F 1.571
(as deliberately architected to not use threads)-.1 F .233(internally because of the portability problems that using threads within the library w)
108 175.2 R .232(ould introduce.)-.1 F(Object)5.232 E .059(handles returned from DB library functions are free-threaded, i.e., threads may use handles concurrently)
108 187.2 R 2.559(,b)-.65 G(y)-2.559 E .69
(specifying the DB_THREAD \215ag to)108 199.2 R F2(db_appinit)3.189 E F1
.689(\(3\) \(or).68 F 3.189(,i)-.4 G 3.189(nt)-3.189 G .689(he C++ API,)
-3.189 F F2(DbEn)3.189 E(v::appinit)-.4 E F1 .689(\(3\)\) and the other)
.68 F .36(subsystem open functions.)108 211.2 R .36
(Threading is assumed in the Ja)5.36 F .86 -.25(va A)-.2 H .36
(PI, so no special \215ags are required, and DB).25 F(functions will al)
108 223.2 Q -.1(wa)-.1 G(ys beha).1 E .3 -.15(ve a)-.2 H 2.5(si).15 G
2.5(ft)-2.5 G(he DB_THREAD \215ag w)-2.5 E(as speci\214ed.)-.1 E .178
(DB supports multi-threaded applications with the ca)108 240 R -.15(ve)
-.2 G .178(at that it loads and calls functions that are commonly).15 F
-.2(av)108 252 S .168(ailable in C language en)-.05 F .168
(vironments and which may not themselv)-.4 F .168(es be thread-safe.)
-.15 F .168(Other than this usage,)5.168 F .044
(DB has no static data and maintains no local conte)108 264 R .044
(xt between calls to DB functions.)-.15 F 1.644 -.8(To e)5.044 H .043
(nsure that applica-).8 F .429
(tions can safely use threads in the conte)108 276 R .429
(xt of DB, porters to ne)-.15 F 2.93(wo)-.25 G .43
(perating systems and/or C libraries must)-2.93 F(con\214rm that the system and C library functions used by the DB library are thread-safe.)
108 288 Q(There are some additional ca)108 304.8 Q -.15(ve)-.2 G
(ats about using threads to access the DB library:).15 E 6.5<8354>108
321.6 S 2.06
(he DB_THREAD \215ag must be speci\214ed for all subsystems either e)
-6.5 F 2.06(xplicitly or via the)-.15 F F2(db_appinit)4.56 E F1(\()118
333.6 Q F2(DbEn)A(v::appinit)-.4 E F1 2.947(\)f).68 G .447
(unction in the C and C++ APIs.)-2.947 F .447
(Threading is assumed in the Ja)5.447 F .947 -.25(va A)-.2 H .447
(PI, so no special).25 F(\215ags are required, and DB functions will al)
118 345.6 Q -.1(wa)-.1 G(ys beha).1 E .3 -.15(ve a)-.2 H 2.5(si).15 G
2.5(ft)-2.5 G(he DB_THREAD \215ag w)-2.5 E(as speci\214ed.)-.1 E(Setting the DB_THREAD \215ag inconsistently may result in database corruption.)
118 369.6 Q 6.5<834f>108 386.4 S 1.936(nly a single thread may call the close function for a returned database or subsystem handle.)
-6.5 F(See)6.935 E F2(db_open)118 398.4 Q F1(\(3\) \().24 E F2(Db::open)
A F1(\(3\)\) and the appropriate subsystem manual pages for more information.)
.24 E 6.5<8345>108 415.2 S 1.096(ither the DB_DBT_MALLOC or DB_DBT_USERMEM \215ags must be set in a DBT used for k)
-6.5 F 1.396 -.15(ey o)-.1 H(r).15 E(data retrie)118 427.2 Q -.25(va)
-.25 G 2.5(l. See).25 F F2(db_dbt)2.5 E F1(\(3\) \().68 E F2(Dbt)A F1
(\(3\)\) for more information.).68 E 6.5<8354>108 444 S .534
(he DB_CURRENT)-6.5 F 3.033(,D)-.74 G .533
(B_NEXT and DB_PREV \215ags to the)-3.033 F F2(lo)3.033 E(g_g)-.1 E(et)
-.1 E F1(\()3.033 E F2(DbLo)A(g::g)-.1 E(et)-.1 E F1 3.033(\)f).68 G
.533(unction may not be)-3.033 F 1.172(used by a free-threaded handle.)
118 456 R 1.172(If such calls are necessary)6.172 F 3.673(,at)-.65 G
1.173(hread should e)-3.673 F 1.173(xplicitly create a unique)-.15 F
.824(DB_LOG handle by calling)118 468 R F2(lo)3.324 E(g_open)-.1 E F1
.824(\(3\) \().24 F F2(DbLo)A(g::open)-.1 E F1 3.324(\). See).24 F F2
(db_lo)3.324 E(g)-.1 E F1 .823(\(3\) \().22 F F2(DbLo)A(g)-.1 E F1 .823
(\(3\)\) for more informa-).22 F(tion.)118 480 Q 6.5<8345>108 496.8 S
.652(ach database operation \(i.e., an)-6.5 F 3.152(yc)-.15 G .652
(all to a function underlying the handles returned by)-3.152 F F2
(db_open)3.152 E F1 .652(\(3\) and).24 F F2(db_cur)118 508.8 Q(sor)-.1 E
F1 .533(\(3\)\) \().73 F F2(Db)A F1 .533(\(3\) and).23 F F2(Dbc)3.033 E
F1 .533(\(3\)\) is normally performed on behalf of a unique lock).31 F
(er)-.1 E 5.532(.I)-.55 G .532(f, within a sin-)-5.532 F .765
(gle thread of control, multiple calls on behalf of the same lock)118
520.8 R .766(er are desired, then transactions must be)-.1 F 2.558
(used. F)118 532.8 R .058(or e)-.15 F .058(xample, consider the case where a cursor scan locates a record, and then based on that record,)
-.15 F .112(accesses some other item in the database.)118 544.8 R .113
(If these are done using the def)5.113 F .113(ault lock)-.1 F .113
(ers for the handle, there)-.1 F .242(is no guarantee that these tw)118
556.8 R 2.741(oo)-.1 G .241(perations will not con\215ict.)-2.741 F .241
(If the application wishes to guarantee that the)5.241 F .149(operations do not con\215ict, locks must be obtained on behalf of a transaction, instead of the def)
118 568.8 R .15(ault lock)-.1 F(er)-.1 E(id, and a transaction must be speci\214ed to the cursor creation and the subsequent db call.)
118 580.8 Q 6.5<8354>108 597.6 S .054
(ransactions may not span threads, i.e., each transaction must be)-6.85
F .054(gin and end in the same thread, and each)-.15 F
(transaction may only be used by a single thread.)118 609.6 Q 6.5<8353>
108 626.4 S .647(pinlocks must ha)-6.5 F .947 -.15(ve b)-.2 H .647
(een implemented for the compiler/architecture combination.).15 F .648
(Attempting to spec-)5.648 F(ify the DB_THREAD \215ag will f)118 638.4 Q
(ail if spinlocks are not a)-.1 E -.25(va)-.2 G(ilable.).25 E 6.5<8354>
108 655.2 S .615(he DB library mak)-6.5 F .614(es a system call to pause for some number of microseconds when it is necessary to)
-.1 F -.1(wa)118 667.2 S .496(it on a lock.).1 F .497
(This may not be optimal, especially in a thread-only en)5.496 F .497
(vironment where it will be more)-.4 F(ef)118 679.2 Q .075
(\214cient to e)-.25 F .075
(xplicitly yield the processor to another thread.)-.15 F .074
(It is possible to specify a yield function on an)5.074 F(per)118 691.2
Q(-application basis, see)-.2 E F2(db_jump_set)2.5 E F1
(\(3\) for more information.).68 E(1)535 768 Q EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 323.3(DB_THREAD\(3\) DB_THREAD\(3\))72 48 R/F1 9
/Times-Bold@0 SF(COMPILING THREADED APPLICA)72 84 Q(TIONS)-.855 E F0
.479(Special compile-time \215ags are required when compiling threaded applications with the UNIX include \214les)
108 96 R(on some architectures.)108 108 Q .701(On IRIX, if you are compiling a threaded application, you must compile with the -D_SGI_MP_SOURCE)
108 124.8 R(\215ag:)108 136.8 Q(cc -D_SGI_MP_SOURCE ...)158 153.6 Q(On OSF/1, if you are compiling a threaded application, you must compile with the -D_REENTRANT \215ag:)
108 170.4 Q(cc -D_REENTRANT ...)158 187.2 Q .377(On Solaris, if you are compiling a threaded application, you must compile with the -D_REENTRANT \215ag)
108 204 R(and link with the -lthread library:)108 216 Q
(cc -D_REENTRANT ... -lthread)158 232.8 Q F1(SEE ALSO)72 249.6 Q/F2 10
/Times-Italic@0 SF(db_ar)108 261.6 Q -.15(ch)-.37 G(ive).15 E F0(\(1\),)
.18 E F2(db_c)2.5 E(hec)-.15 E(kpoint)-.2 E F0(\(1\),).68 E F2
(db_deadloc)2.5 E(k)-.2 E F0(\(1\),).67 E F2(db_dump)2.5 E F0(\(1\),).19
E F2(db_load)2.5 E F0(\(1\),).77 E F2(db_r)2.5 E(eco)-.37 E(ver)-.1 E F0
(\(1\),).73 E F2(db_stat)2.5 E F0(\(1\),).68 E F2(db_intr)108 273.6 Q(o)
-.45 E F0(\(3\),).18 E F2(db_appinit)2.5 E F0(\(3\),).68 E F2(db_cur)2.5
E(sor)-.1 E F0(\(3\),).73 E F2(db_dbm)2.5 E F0(\(3\),).32 E F2
(db_internal)2.5 E F0(\(3\),).51 E F2(db_loc)2.5 E(k)-.2 E F0(\(3\),).67
E F2(db_lo)2.5 E(g)-.1 E F0(\(3\),).22 E F2(db_mpool)2.5 E F0(\(3\),).51
E F2(db_open)108 285.6 Q F0(\(3\),).24 E F2(db_thr)2.5 E(ead)-.37 E F0
(\(3\),).77 E F2(db_txn)2.5 E F0(\(3\)).24 E(April 10, 1998)276.695 768
Q(2)199.695 E EP
%%Trailer
end
%%EOF
