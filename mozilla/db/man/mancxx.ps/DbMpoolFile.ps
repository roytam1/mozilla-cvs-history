%!PS-Adobe-3.0
%%Creator: groff version 1.11
%%CreationDate: Sun May 31 22:58:36 1998
%%DocumentNeededResources: font Times-Bold
%%+ font Times-Roman
%%+ font Times-Italic
%%DocumentSuppliedResources: procset grops 1.11 0
%%Pages: 5
%%PageOrder: Ascend
%%Orientation: Portrait
%%EndComments
%%BeginProlog
%%BeginResource: procset grops 1.11 0
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/FL{
currentgray exch setgray fill setgray
}bind def
/BL/fill load def
/LW/setlinewidth load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%IncludeResource: font Times-Bold
%%IncludeResource: font Times-Roman
%%IncludeResource: font Times-Italic
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Italic@0 ENC0/Times-Italic RE/Times-Roman@0 ENC0/Times-Roman RE
/Times-Bold@0 ENC0/Times-Bold RE
%%EndProlog
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Bold@0 SF -.18(NA)72 28.8 S(ME).18 E/F1 10/Times-Roman@0 SF
(DbMpoolFile \255 shared memory b)108 40.8 Q(uf)-.2 E(fer pool)-.25 E F0
(SYNOPSIS)72 57.6 Q/F2 10/Times-Bold@0 SF(#include <db_cxx.h>)108 69.6 Q
(static int)108 93.6 Q(DbMpoolFile::open\(DbMpool *mp, char *\214le, u_int32_t \215ags, int mode,)
108 105.6 Q(size_t pagesize, DbMpoolFinf)158 117.6 Q 2.5(o*)-.25 G
(\214nf)-2.5 E(op, DbMpoolFile **mpf\);)-.25 E(int)108 141.6 Q
(DbMpoolFile::close\(\);)108 153.6 Q(int)108 177.6 Q
(DbMpoolFile::get\(db_pgno_t *pgnoaddr)108 189.6 Q 2.5(,u)-.92 G
(_int32_t \215ags, v)-2.5 E(oid **pagep\);)-.1 E(int)108 213.6 Q
(DbMpoolFile::put\(v)108 225.6 Q(oid *pgaddr)-.1 E 2.5(,u)-.92 G
(_int32_t \215ags\);)-2.5 E(int)108 249.6 Q(DbMpoolFile::set\(v)108
261.6 Q(oid *pgaddr)-.1 E 2.5(,u)-.92 G(_int32_t \215ags\);)-2.5 E(int)
108 285.6 Q(DbMpoolFile::sync\(\);)108 297.6 Q F0(DESCRIPTION)72 314.4 Q
F1 1.02(The DB library is a f)108 326.4 R 1.019
(amily of classes that pro)-.1 F 1.019
(vides a modular programming interf)-.15 F 1.019
(ace to transactions and)-.1 F 1.377(record-oriented \214le access.)108
338.4 R 1.378(The library includes support for transactions, locking, logging and \214le page)
6.377 F .443(caching, as well as v)108 350.4 R .443(arious inde)-.25 F
-.15(xe)-.15 G 2.943(da).15 G .442(ccess methods.)-2.943 F(Man)5.442 E
2.942(yo)-.15 G 2.942(ft)-2.942 G .442
(he classes \(e.g., the \214le page caching class\))-2.942 F .4(are useful independent of the other DB classes, although some classes are e)
108 362.4 R .4(xplicitly based on other classes)-.15 F
(\(e.g., transactions and logging\).)108 374.4 Q -.15(Fo)5 G 2.5(rag).15
G(eneral description of the DB package, see)-2.5 E/F3 10/Times-Italic@0
SF(db_intr)2.5 E(o)-.45 E F1(\(3\).).18 E
(This manual page describes the speci\214c details of the per)108 391.2
Q(-\214le memory pool interf)-.2 E(ace.)-.1 E(The)108 408 Q F3(DbMpool)
2.7 E F1 .2(\(3\) and).51 F F3(DbMpoolF)2.7 E(ile)-.45 E F1 .2
(\(3\) classes are the library interf).18 F .2(ace intended to pro)-.1 F
.2(vide general-purpose,)-.15 F 1.033(page-oriented b)108 420 R(uf)-.2 E
1.033(fer management of one or more \214les.)-.25 F 1.033
(While designed to w)6.033 F 1.033(ork with the other Db func-)-.1 F
1.518(tions, these functions are also useful for more general purposes.)
108 432 R 1.518(The memory pools \()6.518 F F3(DbMpool::)A F1 -.55('s)C
4.017(\)a).55 G(re)-4.017 E .117
(referred to in this document as simply `)108 444 R(`pools')-.74 E 2.617
('. Pools)-.74 F .118(may be shared between processes.)2.618 F .118
(Pools are usually)5.118 F 1.461
(\214lled by pages from one or more \214les \()108 456 R F3(DbMpoolF)A
(ile)-.45 E F1 -.55('s).18 G 3.961(\). P).55 F 1.46
(ages in the pool are replaced in LR)-.15 F 3.96(U\()-.4 G(least-)-3.96
E 1.971(recently-used\) order)108 468 R 4.471(,w)-.4 G 1.971
(ith each ne)-4.471 F 4.471(wp)-.25 G 1.971
(age replacing the page that has been unused the longest.)-4.471 F -.15
(Pa)6.972 G(ges).15 E(retrie)108 480 Q -.15(ve)-.25 G 2.52(df).15 G .02
(rom the pool using)-2.52 F F3(DbMpoolF)2.52 E(ile::g)-.45 E(et)-.1 E F1
.02(are `)2.52 F(`pinned')-.74 E 2.52('i)-.74 G 2.52(nt)-2.52 G .02
(he pool, by def)-2.52 F .02(ault, until the)-.1 F 2.52(ya)-.15 G .02
(re returned)-2.52 F(to the pool')108 492 Q 2.5(sc)-.55 G
(ontrol using the)-2.5 E F3(DbMpoolF)2.5 E(ile::put)-.45 E F1(method.)
2.5 E F3(DbMpoolF)92 508.8 Q(ile::open)-.45 E F1(The)108 520.8 Q F3
(DbMpoolF)3.166 E(ile::open)-.45 E F1 .667
(method opens a \214le in the pool speci\214ed by the)3.166 F F3
(DbMpool)3.167 E F1(ar)3.167 E .667(gument, cop)-.18 F .667(ying the)-.1
F(DbMpoolFile pointer representing it into the memory location referenced by)
108 532.8 Q F3(mpf)2.5 E F1(.)1.96 E(The)108 549.6 Q F3(\214le)2.967 E
F1(ar)2.967 E .467(gument is the name of the \214le to be opened.)-.18 F
(If)5.466 E F3(\214le)2.966 E F1 .466(is NULL, a pri)2.966 F -.25(va)
-.25 G .466(te \214le is created that cannot).25 F(be shared with an)108
561.6 Q 2.5(yo)-.15 G
(ther process \(although it may be shared with other threads\).)-2.5 E
(The)108 578.4 Q F3<8d61>3.76 E(gs)-.1 E F1(and)3.76 E F3(mode)3.76 E F1
(ar)3.76 E 1.26(guments specify ho)-.18 F 3.761<778c>-.25 G 1.261
(les will be opened and/or created when the)-3.761 F 3.761(yd)-.15 G
(on')-3.761 E 3.761(ta)-.18 G(lready)-3.761 E -.15(ex)108 590.4 S 2.5
(ist. The).15 F(\215ags v)2.5 E(alue is speci\214ed by)-.25 E F2(or)2.5
E F1('ing together one or more of the follo)A(wing v)-.25 E(alues:)-.25
E(DB_CREA)108 607.2 Q(TE)-1.11 E .484(Create an)133 619.2 R 2.984(yu)
-.15 G .483(nderlying \214les, as necessary)-2.984 F 5.483(.I)-.65 G
2.983(ft)-5.483 G .483(he \214les do not already e)-2.983 F .483
(xist and the DB_CREA)-.15 F .483(TE \215ag)-1.11 F
(is not speci\214ed, the call will f)133 631.2 Q(ail.)-.1 E(DB_NOMMAP)
108 660 Q(Al)133 672 Q -.1(wa)-.1 G .057(ys cop).1 F 2.557(yt)-.1 G .057
(his \214le into the local cache instead of mapping it into process memory \(see the descrip-)
-2.557 F(tion of the)133 684 Q F3(mp_mmapsize)2.5 E F1
(\214eld of the DbEn)2.5 E 2.5(vo)-.4 G
(bject for further information\).)-2.5 E(DB_RDONL)108 712.8 Q(Y)-1 E
1.124(Open an)133 724.8 R 3.624(yu)-.15 G 1.124
(nderlying \214les for reading only)-3.624 F 6.124(.A)-.65 G 1.424 -.15
(ny a)-6.124 H 1.124
(ttempt to write the \214le using the pool functions).15 F(1)535 768 Q
EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 333.28(DbMpoolFile\(3\) DbMpoolFile\(3\))72 48 R
(will f)133 84 Q(ail, re)-.1 E -.05(ga)-.15 G
(rdless of the actual permissions of the \214le.).05 E .073
(All \214les created by the method)108 100.8 R/F1 10/Times-Italic@0 SF
(DbMpoolF)2.573 E(ile::open)-.45 E F0 .073(are created with mode)2.573 F
F1(mode)2.574 E F0 .074(\(as described in)2.574 F F1 -.15(ch)2.574 G
(mod).15 E F0(\(2\)\)).77 E .456(and modi\214ed by the process' umask v)
108 112.8 R .456(alue at the time of creation \(see)-.25 F F1(umask)
2.956 E F0 2.956(\(2\)\). The).67 F .455(group o)2.956 F .455
(wnership of)-.25 F
(created \214les is based on the system and directory def)108 124.8 Q
(aults, and is not further speci\214ed by DB.)-.1 E(The)108 141.6 Q F1
(pa)3.577 E -.1(ge)-.1 G(size).1 E F0(ar)3.577 E 1.077(gument is the size, in bytes, of the unit of transfer between the application and the pool,)
-.18 F(although it is not necessarily the unit of transfer between the pool and the source \214le.)
108 153.6 Q .096
(Files opened in the pool may be further con\214gured based on the)108
170.4 R F1(\214nfop)2.595 E F0(ar)2.595 E .095(gument to)-.18 F F1
(memp_fopen)2.595 E F0 2.595(,w).24 G .095(hich is a)-2.595 F .039
(pointer to a structure of type DB_MPOOL_FINFO \(typedef)108 182.4 R
1.039 -.5('d i).55 H 2.539(n<).5 G(db)-2.539 E 2.539(.h>\). No)-.4 F .04
(references to the)2.54 F F1(\214nfop)2.54 E F0(struc-)2.54 E 1.364
(ture are maintained by DB, so it may be discarded when the)108 194.4 R
F1(memp_fopen)3.864 E F0 1.364(function returns.)3.864 F 1.364
(In order to)6.364 F .137(ensure compatibility with future releases of DB, all \214elds of the DB_MPOOL_FINFO structure that are not)
108 206.4 R -.15(ex)108 218.4 S .656(plicitly set should be initialized to 0 before the \214rst time the structure is used.)
.15 F .655(Do this by declaring the)5.656 F(structure e)108 230.4 Q
(xternal or static, or by calling the C library routine)-.15 E F1(bzer)
2.5 E(o)-.45 E F0(\(3\) or).18 E F1(memset)2.5 E F0(\(3\).).68 E .691
(The \214elds of the DB_MPOOL_FINFO structure used by)108 247.2 R F1
(DbMpoolF)3.191 E(ile::open)-.45 E F0 .691(are described)3.191 F(belo)
5.691 E 4.491 -.65(w. I)-.25 H(f).65 E F1(\214n-)3.191 E(fop)108 259.2 Q
F0(is NULL or an)2.5 E 2.5(yo)-.15 G 2.5(fi)-2.5 G
(ts \214elds are set to their def)-2.5 E(ault v)-.1 E(alue, def)-.25 E
(aults appropriate for the system are used.)-.1 E(int ftype;)108 276 Q
(The)133 288 Q F1(ftype)6.277 E F0 3.777
(\214eld should be the same as a)6.277 F F1(ftype)6.277 E F0(ar)6.277 E
3.776(gument pre)-.18 F 3.776(viously speci\214ed to the)-.25 F F1(DbM-)
6.276 E(pool::db_r)133 300 Q -.4(eg)-.37 G(ister).4 E F0 1.001
(method, unless no input or output processing of the \214le')3.501 F
3.502(sp)-.55 G 1.002(ages are necessary)-3.502 F 3.502(,i)-.65 G(n)
-3.502 E .406(which case it should be 0.)133 312 R .406
(\(See the description of the)5.406 F F1(DbMpool::db_r)2.906 E -.4(eg)
-.37 G(ister).4 E F0 .406(method for more infor)2.906 F(-)-.2 E
(mation.\))133 324 Q(DBT *pgcookie;)108 340.8 Q(The)133 352.8 Q F1
(pgcookie)2.679 E F0(ar)2.679 E .179
(gument contains the byte string that is passed to the)-.18 F F1(pgin)
2.68 E F0(and)2.68 E F1(pgout)2.68 E F0 .18(functions for this)2.68 F
.283(\214le, if an)133 364.8 R 4.083 -.65(y. I)-.15 H 2.783(fn).65 G(o)
-2.783 E F1(pgin)2.782 E F0(or)2.782 E F1(pgout)2.782 E F0 .282
(functions are speci\214ed, the)2.782 F F1(pgcookie)2.782 E F0 .282
(\214eld should be NULL.)2.782 F .282(\(See the)5.282 F
(description of the)133 376.8 Q F1(DbMpool::db_r)2.5 E -.4(eg)-.37 G
(ister).4 E F0(method for more information.\))2.5 E(u_int8_t *\214leid;)
108 393.6 Q(The)133 405.6 Q F1(\214leid)2.797 E F0 .298
(\214eld is a unique identi\214er for the \214le.)2.797 F .298
(The mpool functions must be able to uniquely iden-)5.298 F .176(tify \214les in order that multiple processes sharing a \214le will correctly share its underlying pages.)
133 417.6 R(Nor)5.175 E(-)-.2 E(mally)133 429.6 Q 3.358(,t)-.65 G(he)
-3.358 E F1(\214leid)3.358 E F0 .858
(\214eld should be NULL and the mpool functions will use the \214le')
3.358 F 3.359(sd)-.55 G -.25(ev)-3.359 G .859(ice and inode).25 F .044
(numbers \(see)133 441.6 R F1(stat)2.544 E F0 .043
(\(2\)\) for this purpose.).68 F .043(On some \214lesystems, \(e.g., F)
5.043 F 2.263 -1.11(AT o)-.74 H 2.543(rN)1.11 G .043(FS\) \214le de)
-2.543 F .043(vice and inode)-.25 F 1.578
(numbers are not necessarily unique across system reboots.)133 453.6 R
/F2 10/Times-Bold@0 SF -.25(Ap)6.578 G 1.579
(plications wanting to maintain a).25 F(shar)133 465.6 Q 1.653
(ed memory b)-.18 F 1.653(uffer pool acr)-.2 F 1.652(oss system r)-.18 F
1.652(eboots, wher)-.18 F 4.152(et)-.18 G 1.652
(he pool contains pages fr)-4.152 F 1.652(om \214les)-.18 F(stor)133
477.6 Q .011(ed on such \214lesystems, must specify a unique \214le identi\214er to the)
-.18 F F1(DbMpoolF)2.511 E(ile::open)-.45 E F0 .011(call and)2.511 F
.217(each process opening or re)133 489.6 R .216
(gistering the \214le must pro)-.15 F .216
(vide the same unique identi\214er)-.15 F 5.216(.I)-.55 G 2.716(ft)
-5.216 G(he)-2.716 E F1(\214leid)2.716 E F0(\214eld)2.716 E 1.493(is non-NULL, it must reference a DB_FILE_ID_LEN \(as de\214ned in <db_cxx.h>\) length array of)
133 501.6 R .724
(bytes that will be used to uniquely identify the \214le.)133 513.6 R
.724(This should not be necessary for most applica-)5.724 F 2.92
(tions. Speci\214cally)133 525.6 R 2.92(,i)-.65 G 2.92(ti)-2.92 G 2.92
(sn)-2.92 G .421(ot necessary if the memory pool is re-instantiated after each system reboot,)
-2.92 F .438(the application is using the Db access methods instead of calling the pool functions e)
133 537.6 R(xplicitly)-.15 E 2.937(,o)-.65 G 2.937(rt)-2.937 G(he)-2.937
E .968(\214les in the memory pool are stored on \214lesystems where the \214le de)
133 549.6 R .969(vice and inode numbers do not)-.25 F
(change across system reboots.)133 561.6 Q(int32_t lsn_of)108 578.4 Q
(fset;)-.25 E(The)133 590.4 Q F1(lsn_of)3.05 E(fset)-.18 E F0(ar)3.05 E
.55(gument is the zero-based byte of)-.18 F .55
(fset in the page of the page')-.25 F 3.05(sl)-.55 G .55
(og sequence number)-3.05 F .99(\(LSN\), or \2551 if no LSN of)133 602.4
R .99(fset is speci\214ed.)-.25 F .99(\(See the description of the)5.99
F F1(DbMpool::sync)3.49 E F0 .99(method for)3.49 F(more information.\))
133 614.4 Q(u_int32_t clear_len;)108 631.2 Q(The)133 643.2 Q F1
(clear_len)2.664 E F0 .164(\214eld is the number of initial bytes in a page that should be set to zero when the page is)
2.664 F 1.791(created as a result of the DB_MPOOL_CREA)133 655.2 R 1.791
(TE or DB_MPOOL_NEW \215ags being speci\214ed to)-1.11 F F1(DbMpoolF)133
667.2 Q(ile::g)-.45 E(et)-.1 E F0 5(.I).68 G(f)-5 E F1(\214nfop)2.5 E F0
(is NULL or)2.5 E F1(clear_len)2.5 E F0
(is 0, the entire page is cleared.)2.5 E(The)108 684 Q F1(DbMpoolF)2.82
E(ile::open)-.45 E F0 .32(method thro)2.82 F .32(ws a)-.25 F F1
(DbException)2.82 E F0 .32(\(3\) or returns the v).24 F .32(alue of)-.25
F F1(errno)2.82 E F0 .32(on f)2.82 F .32(ailure and 0 on)-.1 F(success.)
108 696 Q F1(DbMpoolF)92 712.8 Q(ile::close)-.45 E F0(The)108 724.8 Q F1
(DbMpoolF)3.012 E(ile::close)-.45 E F0 .512
(method closes the source \214le indicated by the DbMpoolFile object.)
3.012 F .513(This method)5.513 F(May 2, 1998)280.585 768 Q(2)203.585 E
EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 333.28(DbMpoolFile\(3\) DbMpoolFile\(3\))72 48 R
.159(does not imply a call to)108 84 R/F1 10/Times-Italic@0 SF(DbMpoolF)
2.659 E(ile::sync)-.45 E F0 2.659(,i).31 G .158
(.e. no pages are written to the source \214le as as a result of call-)
-2.659 F(ing)108 96 Q F1(DbMpoolF)2.5 E(ile::close)-.45 E F0(.).18 E 1.4
(In addition, if the)108 112.8 R F1(\214le)3.9 E F0(ar)3.9 E 1.4
(gument to)-.18 F F1(DbMpoolF)3.9 E(ile::open)-.45 E F0 -.1(wa)3.9 G 3.9
(sN).1 G 1.4(ULL, an)-3.9 F 3.9(yu)-.15 G 1.4
(nderlying \214les created for this)-3.9 F(DbMpoolFile will be remo)108
124.8 Q -.15(ve)-.15 G(d.).15 E(The)108 141.6 Q F1(DbMpoolF)2.751 E
(ile::close)-.45 E F0 .251(method thro)2.751 F .251(ws a)-.25 F F1
(DbException)2.751 E F0 .251(\(3\) or returns the v).24 F .251(alue of)
-.25 F F1(errno)2.75 E F0 .25(on f)2.75 F .25(ailure and 0 on)-.1 F
(success.)108 153.6 Q F1(DbMpoolF)92 170.4 Q(ile::g)-.45 E(et)-.1 E F0
(The)108 182.4 Q F1(DbMpoolF)3.292 E(ile::g)-.45 E(et)-.1 E F0 .792(method copies a pointer to the page with the page number speci\214ed by)
3.292 F F1(pgnoaddr)3.292 E F0(,).73 E .199(from the source \214le speci\214ed by the DbMpoolFile object into the memory location referenced by)
108 194.4 R F1(pa)2.699 E -.1(ge)-.1 G(p).1 E F0 5.199(.I).19 G(f)-5.199
E(the page does not e)108 206.4 Q(xist or cannot be retrie)-.15 E -.15
(ve)-.25 G(d,).15 E F1(DbMpoolF)2.5 E(ile::g)-.45 E(et)-.1 E F0(will f)
2.5 E(ail.)-.1 E(The returned page is size_t type aligned.)108 223.2 Q
/F2 10/Times-Bold@0 SF -.1(Pa)108 240 S(ge numbers begin at 0, e.g).1 E
(., the \214rst page in the \214le is page number 0, not page number 1.)
-.15 E F0(The)108 256.8 Q F1<8d61>2.5 E(gs)-.1 E F0(ar)2.5 E
(gument is speci\214ed by)-.18 E F2(or)2.5 E F0
('ing together one or more of the follo)A(wing v)-.25 E(alues:)-.25 E
(DB_MPOOL_CREA)108 285.6 Q(TE)-1.11 E
(If the speci\214ed page does not e)133 297.6 Q(xist, create it.)-.15 E
(In this case, the)5 E F1(pgin)2.5 E F0
(method, if speci\214ed, is called.)2.5 E(DB_MPOOL_LAST)108 326.4 Q
2.105(Return the last page of the source \214le and cop)133 338.4 R
4.605(yi)-.1 G 2.106(ts page number to the location referenced by)-4.605
F F1(pgnoaddr)133 350.4 Q F0(.).73 E(DB_MPOOL_NEW)108 379.2 Q .743
(Create a ne)133 391.2 R 3.243(wp)-.25 G .743(age in the \214le and cop)
-3.243 F 3.243(yi)-.1 G .743
(ts page number to the location referenced by)-3.243 F F1(pgnoaddr)3.242
E F0 5.742(.I).73 G(n)-5.742 E(this case, the)133 403.2 Q F1(pgin)2.5 E
F0(method, if speci\214ed, is not called.)2.5 E(The DB_MPOOL_CREA)108
420 Q(TE, DB_MPOOL_LAST and DB_MPOOL_NEW \215ags are mutually e)-1.11 E
(xclusi)-.15 E -.15(ve)-.25 G(.).15 E(Created pages ha)108 436.8 Q .3
-.15(ve a)-.2 H(ll their bytes set to 0, unless otherwise speci\214ed when the \214le w)
.15 E(as opened.)-.1 E .36(All pages returned by)108 453.6 R F1
(DbMpoolF)2.86 E(ile::g)-.45 E(et)-.1 E F0 .361
(will be retained \(i.e. `)2.86 F(`pinned')-.74 E .361
('\) in the pool until a subsequent call)-.74 F(to)108 465.6 Q F1
(DbMpoolF)2.5 E(ile::put)-.45 E F0(.).68 E(The)108 482.4 Q F1(DbMpoolF)
3.278 E(ile::g)-.45 E(et)-.1 E F0 .778(method thro)3.278 F .778(ws a)
-.25 F F1(DbException)3.278 E F0 .778(\(3\) or returns the v).24 F .777
(alue of)-.25 F F1(errno)3.277 E F0 .777(on f)3.277 F .777
(ailure and 0 on)-.1 F(success.)108 494.4 Q F1(DbMpoolF)92 511.2 Q
(ile::put)-.45 E F0(The)108 523.2 Q F1(DbMpoolF)3.093 E(ile::put)-.45 E
F0 .593(method indicates that the page referenced by)3.093 F F1(pgaddr)
3.093 E F0 .594(can be e)3.093 F .594(victed from the pool.)-.25 F F1
(Pgaddr)108 535.2 Q F0(must be an address pre)2.5 E(viously returned by)
-.25 E F1(DbMpoolF)2.5 E(ile::g)-.45 E(et)-.1 E F0(.).68 E(The)108 552 Q
F1<8d61>2.5 E(gs)-.1 E F0(ar)2.5 E(gument is speci\214ed by)-.18 E F2
(or)2.5 E F0('ing together one or more of the follo)A(wing v)-.25 E
(alues:)-.25 E(DB_MPOOL_CLEAN)108 580.8 Q 1.557(Clear an)133 592.8 R
4.057(yp)-.15 G(re)-4.057 E 1.557
(viously set modi\214cation information \(i.e., don')-.25 F 4.056(tb)
-.18 G 1.556(other writing the page back to the)-4.056 F
(source \214le\).)133 604.8 Q(DB_MPOOL_DIR)108 633.6 Q(TY)-.6 E .052(The page has been modi\214ed and must be written to the source \214le before being e)
133 645.6 R .052(victed from the pool.)-.25 F(DB_MPOOL_DISCARD)108 674.4
Q .145(The page is unlik)133 686.4 R .144(ely to be useful in the near future, and should be discarded before other pages in the)
-.1 F(pool.)133 698.4 Q(The DB_MPOOL_CLEAN and DB_MPOOL_DIR)108 715.2 Q
(TY \215ags are mutually e)-.6 E(xclusi)-.15 E -.15(ve)-.25 G(.).15 E
(May 2, 1998)280.585 768 Q(3)203.585 E EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 333.28(DbMpoolFile\(3\) DbMpoolFile\(3\))72 48 R
(The)108 84 Q/F1 10/Times-Italic@0 SF(DbMpoolF)3.236 E(ile::put)-.45 E
F0 .736(method thro)3.236 F .736(ws a)-.25 F F1(DbException)3.236 E F0
.736(\(3\) or returns the v).24 F .736(alue of)-.25 F F1(errno)3.236 E
F0 .737(on f)3.236 F .737(ailure and 0 on)-.1 F(success.)108 96 Q F1
(DbMpoolF)92 112.8 Q(ile::set)-.45 E F0(The)108 124.8 Q F1(DbMpoolF)
2.918 E(ile::set)-.45 E F0 .418
(method sets the \215ags associated with the page referenced by)2.918 F
F1(pgaddr)2.918 E F0 .417(without unpin-)2.917 F 1.354
(ning it from the pool.)108 136.8 R F1(Pgaddr)6.354 E F0 1.355
(must be an address pre)3.855 F 1.355(viously returned by)-.25 F F1
(DbMpoolF)3.855 E(ile::g)-.45 E(et)-.1 E F0 6.355(.T).68 G(he)-6.355 E
F1<8d61>3.855 E(gs)-.1 E F0(ar)108 148.8 Q .775(gument to)-.18 F F1
(DbMpoolF)3.275 E(ile::set)-.45 E F0 .775(is speci\214ed by)3.275 F/F2
10/Times-Bold@0 SF(or)3.275 E F0 .774
('ing together one or more of the v)B .774(alues speci\214ed as \215ags)
-.25 F(for the)108 160.8 Q F1(DbMpoolF)2.5 E(ile::put)-.45 E F0(call.)
2.5 E(The)108 177.6 Q F1(DbMpoolF)3.34 E(ile::set)-.45 E F0 .84
(method thro)3.34 F .84(ws a)-.25 F F1(DbException)3.34 E F0 .841
(\(3\) or returns the v).24 F .841(alue of)-.25 F F1(errno)3.341 E F0
.841(on f)3.341 F .841(ailure and 0 on)-.1 F(success.)108 189.6 Q F1
(DbMpoolF)92 206.4 Q(ile::sync)-.45 E F0(The)108 218.4 Q F1(DbMpoolF)
2.809 E(ile::sync)-.45 E F0 .308(method writes all pages associated with the DbMpoolFile object that were mark)
2.809 F(ed)-.1 E .828(as modi\214ed using)108 230.4 R F1(DbMpoolF)3.328
E(ile::put)-.45 E F0(or)3.328 E F1(DbMpoolF)3.328 E(ile::set)-.45 E F0
3.328(,b).68 G .828(ack to the source \214le.)-3.328 F .828(If an)5.828
F 3.328(yo)-.15 G 3.328(ft)-3.328 G .828(he modi\214ed)-3.328 F .481(pages are also pinned \(i.e., currently referenced by this or another process\))
108 242.4 R F1(DbMpoolF)2.98 E(ile::sync)-.45 E F0 .48(will ignore)2.98
F(them.)108 254.4 Q(The)108 271.2 Q F1(DbMpoolF)2.629 E(ile::sync)-.45 E
F0 .129(method thro)2.629 F .129(ws a)-.25 F F1(DbException)2.629 E F0
.129(\(3\) or returns the v).24 F .129(alue of)-.25 F F1(errno)2.63 E F0
.13(on f)2.63 F .13(ailure, 0 on suc-)-.1 F .389
(cess, and DB_INCOMPLETE if there were pages which were modi\214ed b)108
283.2 R .389(ut which)-.2 F F1(DbMpoolF)2.889 E(ile::sync)-.45 E F0 -.1
(wa)2.889 G(s).1 E(unable to write.)108 295.2 Q/F3 9/Times-Bold@0 SF
(ERR)72 312 Q(ORS)-.27 E F0 .049(Methods mark)108 324 R .049
(ed as returning)-.1 F F1(errno)2.549 E F0 .049(will, by def)2.549 F
.049(ault, thro)-.1 F 2.549(wa)-.25 G 2.549(ne)-2.549 G .05
(xception that encapsulates the error informa-)-2.699 F 2.5(tion. The)
108 336 R(def)2.5 E(ault error beha)-.1 E(vior can be changed, see)-.2 E
F1(DbException)2.5 E F0(\(3\).).24 E(The)108 352.8 Q F1(DbMpoolF)2.5 E
(ile::open)-.45 E F0(method may f)2.5 E(ail and thro)-.1 E 2.5(wa)-.25 G
F1(DbException)A F0(\(3\)).24 E(or return)108 376.8 Q F1(errno)2.5 E F0
(for an)2.5 E 2.5(yo)-.15 G 2.5(ft)-2.5 G
(he errors speci\214ed for the follo)-2.5 E
(wing DB and library functions:)-.25 E(DBmemp->pgin\(3\), DBmemp->pgout\(3\), DbLog::compare\(3\), DbLog::\215ush\(3\), close\(2\), fcntl\(2\),)
108 388.8 Q -.25<668d>108 400.8 S
(ush\(3\), fsync\(2\), lseek\(2\), malloc\(3\), memcmp\(3\), memcp).25 E
(y\(3\), memset\(3\), mmap\(2\), open\(2\), sig-)-.1 E
(\214llset\(3\), sigprocmask\(2\), stat\(2\), strcp)108 412.8 Q(y\(3\), strdup\(3\), strerror\(3\), strlen\(3\), time\(3\), unlink\(2\), and)
-.1 E(write\(2\).)108 424.8 Q .917(In addition, the)108 441.6 R F1
(DbMpoolF)3.417 E(ile::open)-.45 E F0 .917(method may f)3.417 F .917
(ail and thro)-.1 F 3.417(wa)-.25 G F1(DbException)A F0 .916
(\(3\) or return).24 F F1(errno)3.416 E F0 .916(for the)3.416 F(follo)
108 453.6 Q(wing conditions:)-.25 E([EINV)108 470.4 Q(AL])-1.35 E(An in)
133 482.4 Q -.25(va)-.4 G(lid \215ag v).25 E(alue or parameter w)-.25 E
(as speci\214ed.)-.1 E .001
(The \214le has already been entered into the pool, and the)133 506.4 R
F1(pa)2.501 E -.1(ge)-.1 G(size).1 E F0 -.25(va)2.501 G .001
(lue is not the same as when the \214le).25 F -.1(wa)133 518.4 S 2.5(se)
.1 G(ntered into the pool, or the length of the \214le is not zero or a multiple of the)
-2.5 E F1(pa)2.5 E -.1(ge)-.1 G(size).1 E F0(.).18 E(The DB_RDONL)133
542.4 Q 2.5<598d>-1 G(ag w)-2.5 E(as speci\214ed for an in-memory pool.)
-.1 E(The)108 559.2 Q F1(DbMpoolF)2.5 E(ile::close)-.45 E F0
(method may f)2.5 E(ail and thro)-.1 E 2.5(wa)-.25 G F1(DbException)A F0
(\(3\)).24 E(or return)108 583.2 Q F1(errno)2.5 E F0(for an)2.5 E 2.5
(yo)-.15 G 2.5(ft)-2.5 G(he errors speci\214ed for the follo)-2.5 E
(wing DB and library functions: close\(2\), fcntl\(2\),)-.25 E -.25
<668d>108 595.2 S(ush\(3\), munmap\(2\), and strerror\(3\).).25 E(The)
108 612 Q F1(DbMpoolF)2.5 E(ile::g)-.45 E(et)-.1 E F0(method may f)2.5 E
(ail and thro)-.1 E 2.5(wa)-.25 G F1(DbException)A F0(\(3\)).24 E
(or return)108 636 Q F1(errno)2.5 E F0(for an)2.5 E 2.5(yo)-.15 G 2.5
(ft)-2.5 G(he errors speci\214ed for the follo)-2.5 E
(wing DB and library functions:)-.25 E(DBmemp->pgin\(3\), DBmemp->pgout\(3\), DbLog::compare\(3\), DbLog::\215ush\(3\), close\(2\), fcntl\(2\),)
108 648 Q -.25<668d>108 660 S
(ush\(3\), fsync\(2\), lseek\(2\), malloc\(3\), memcmp\(3\), memcp).25 E
(y\(3\), memset\(3\), mmap\(2\), open\(2\), read\(2\),)-.1 E
(sig\214llset\(3\), sigprocmask\(2\), stat\(2\), strcp)108 672 Q(y\(3\), strdup\(3\), strerror\(3\), strlen\(3\), time\(3\), unlink\(2\), and)
-.1 E(write\(2\).)108 684 Q .258(In addition, the)108 700.8 R F1
(DbMpoolF)2.758 E(ile::g)-.45 E(et)-.1 E F0 .258(method may f)2.758 F
.258(ail and thro)-.1 F 2.758(wa)-.25 G F1(DbException)A F0 .258
(\(3\) or return).24 F F1(errno)2.758 E F0 .259(for the fol-)2.758 F(lo)
108 712.8 Q(wing conditions:)-.25 E(May 2, 1998)280.585 768 Q(4)203.585
E EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF 333.28(DbMpoolFile\(3\) DbMpoolFile\(3\))72 48 R
([EA)108 84 Q(GAIN])-.4 E 1.568(The page reference count has o)133 96 R
-.15(ve)-.15 G(r\215o).15 E 4.068(wed. \(This)-.25 F 1.568(should ne)
4.068 F -.15(ve)-.25 G 4.068(rh).15 G 1.568(appen unless there')-4.068 F
4.068(sab)-.55 G 1.568(ug in the)-4.268 F(application.\))133 108 Q
([EINV)108 124.8 Q(AL])-1.35 E(An in)133 136.8 Q -.25(va)-.4 G
(lid \215ag v).25 E(alue or parameter w)-.25 E(as speci\214ed.)-.1 E
(The DB_MPOOL_NEW \215ag w)133 160.8 Q(as set and the source \214le w)
-.1 E(as not opened for writing.)-.1 E(The requested page does not e)133
184.8 Q(xist and DB_MPOOL_CREA)-.15 E(TE w)-1.11 E(as not set.)-.1 E
(More than one of DB_MPOOL_CREA)133 208.8 Q
(TE, DB_MPOOL_LAST and DB_MPOOL_NEW w)-1.11 E(as set.)-.1 E([ENOMEM])108
225.6 Q(The cache is full and no more pages will \214t in the pool.)133
237.6 Q(The)108 254.4 Q/F1 10/Times-Italic@0 SF(DbMpoolF)2.5 E(ile::put)
-.45 E F0(method may f)2.5 E(ail and thro)-.1 E 2.5(wa)-.25 G F1
(DbException)A F0(\(3\)).24 E(or return)108 278.4 Q F1(errno)2.5 E F0
(for an)2.5 E 2.5(yo)-.15 G 2.5(ft)-2.5 G
(he errors speci\214ed for the follo)-2.5 E
(wing DB and library functions:)-.25 E(DBmemp->pgin\(3\), DBmemp->pgout\(3\), DbLog::compare\(3\), DbLog::\215ush\(3\), close\(2\), fcntl\(2\),)
108 290.4 Q -.25<668d>108 302.4 S
(ush\(3\), fsync\(2\), lseek\(2\), malloc\(3\), memcmp\(3\), memcp).25 E
(y\(3\), memset\(3\), mmap\(2\), open\(2\), sig-)-.1 E
(\214llset\(3\), sigprocmask\(2\), stat\(2\), strcp)108 314.4 Q(y\(3\), strdup\(3\), strerror\(3\), strlen\(3\), time\(3\), unlink\(2\), and)
-.1 E(write\(2\).)108 326.4 Q .216(In addition, the)108 343.2 R F1
(DbMpoolF)2.717 E(ile::put)-.45 E F0 .217(method may f)2.717 F .217
(ail and thro)-.1 F 2.717(wa)-.25 G F1(DbException)A F0 .217
(\(3\) or return).24 F F1(errno)2.717 E F0 .217(for the fol-)2.717 F(lo)
108 355.2 Q(wing conditions:)-.25 E([EA)108 372 Q(CCES])-.4 E
(The DB_MPOOL_DIR)133 384 Q(TY \215ag w)-.6 E
(as set and the source \214le w)-.1 E(as not opened for writing.)-.1 E
([EINV)108 400.8 Q(AL])-1.35 E(An in)133 412.8 Q -.25(va)-.4 G
(lid \215ag v).25 E(alue or parameter w)-.25 E(as speci\214ed.)-.1 E
(The)133 436.8 Q F1(pgaddr)2.5 E F0
(parameter does not reference a page returned by)2.5 E F1(DbMpoolF)2.5 E
(ile::g)-.45 E(et)-.1 E F0(.).68 E
(More than one of DB_MPOOL_CLEAN and DB_MPOOL_DIR)133 460.8 Q(TY w)-.6 E
(as set.)-.1 E(The)108 477.6 Q F1(DbMpoolF)2.5 E(ile::set)-.45 E F0
(method may f)2.5 E(ail and thro)-.1 E 2.5(wa)-.25 G F1(DbException)A F0
(\(3\)).24 E(or return)108 501.6 Q F1(errno)2.5 E F0(for an)2.5 E 2.5
(yo)-.15 G 2.5(ft)-2.5 G(he errors speci\214ed for the follo)-2.5 E
(wing DB and library functions: fcntl\(2\), and)-.25 E -.25<668d>108
513.6 S(ush\(3\).).25 E .321(In addition, the)108 530.4 R F1(DbMpoolF)
2.821 E(ile::set)-.45 E F0 .321(method may f)2.821 F .321(ail and thro)
-.1 F 2.821(wa)-.25 G F1(DbException)A F0 .321(\(3\) or return).24 F F1
(errno)2.822 E F0 .322(for the fol-)2.822 F(lo)108 542.4 Q
(wing conditions:)-.25 E([EINV)108 559.2 Q(AL])-1.35 E(An in)133 571.2 Q
-.25(va)-.4 G(lid \215ag v).25 E(alue or parameter w)-.25 E
(as speci\214ed.)-.1 E(The)108 588 Q F1(DbMpoolF)2.5 E(ile::sync)-.45 E
F0(method may f)2.5 E(ail and thro)-.1 E 2.5(wa)-.25 G F1(DbException)A
F0(\(3\)).24 E(or return)108 612 Q F1(errno)2.5 E F0(for an)2.5 E 2.5
(yo)-.15 G 2.5(ft)-2.5 G(he errors speci\214ed for the follo)-2.5 E
(wing DB and library functions:)-.25 E(DBmemp->pgin\(3\), DBmemp->pgout\(3\), DbLog::compare\(3\), DbLog::\215ush\(3\), close\(2\), fcntl\(2\),)
108 624 Q -.25<668d>108 636 S
(ush\(3\), fsync\(2\), lseek\(2\), malloc\(3\), memcp).25 E(y\(3\), memset\(3\), open\(2\), qsort\(3\), realloc\(3\), sig\214llset\(3\),)
-.1 E(sigprocmask\(2\), stat\(2\), strcp)108 648 Q(y\(3\), strdup\(3\), strerror\(3\), strlen\(3\), unlink\(2\), and write\(2\).)
-.1 E/F2 9/Times-Bold@0 SF(SEE ALSO)72 669.6 Q F1(db_ar)108 681.6 Q -.15
(ch)-.37 G(ive).15 E F0(\(1\),).18 E F1(db_c)2.5 E(hec)-.15 E(kpoint)-.2
E F0(\(1\),).68 E F1(db_deadloc)2.5 E(k)-.2 E F0(\(1\),).67 E F1
(db_dump)2.5 E F0(\(1\),).19 E F1(db_load)2.5 E F0(\(1\),).77 E F1(db_r)
2.5 E(eco)-.37 E(ver)-.1 E F0(\(1\),).73 E F1(db_stat)2.5 E F0(\(1\),)
.68 E F1(db_intr)108 693.6 Q(o)-.45 E F0(\(3\),).18 E F1(db_internal)2.5
E F0(\(3\),).51 E F1(db_thr)2.5 E(ead)-.37 E F0(\(3\),).77 E F1(Db)2.5 E
F0(\(3\),).23 E F1(Dbc)2.5 E F0(\(3\),).31 E F1(DbEn)2.5 E(v)-.4 E F0
(\(3\),).32 E F1(DbException)2.5 E F0(\(3\),).24 E F1(DbInfo)2.5 E F0
(\(3\),).18 E F1(DbLoc)108 705.6 Q(k)-.2 E F0(\(3\),).67 E F1(DbLoc)2.5
E(kT)-.2 E(ab)-.92 E F0(\(3\),).23 E F1(DbLo)2.5 E(g)-.1 E F0(\(3\),).22
E F1(DbLsn)2.5 E F0(\(3\),).24 E F1(DbMpool)2.5 E F0(\(3\),).51 E F1
(DbMpoolF)2.5 E(ile)-.45 E F0(\(3\),).18 E F1(Dbt)2.5 E F0(\(3\),).68 E
F1(DbTxn)2.5 E F0(\(3\),).24 E F1(DbTxnMgr)108 717.6 Q F0(\(3\)).73 E
(May 2, 1998)280.585 768 Q(5)203.585 E EP
%%Trailer
end
%%EOF
