<?xml version="1.0"?>

<bindings id="treeBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:html="http://www.w3.org/TR/REC-html40"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
  
  <binding id="tree">
    <content>
      <children/>
      <xul:treerows>
        <children includes="treehead,treechildren"/>
      </xul:treerows> 
    </content>    
  </binding>

  <binding id="treerows">
    <content flex="1"/>
    <handlers>
      <handler type="click" shift="false" primary="false"
               value="if (event.target.tagName == 'treecell') 
                        parentNode.selectItem(event.target.parentNode.parentNode);"/>
      <handler type="click" shift="false" primary="true"
               value="if (event.target.tagName == 'treecell') 
                        parentNode.toggleItemSelection(event.target.parentNode.parentNode);"/>
      <handler type="click" shift="true" primary="false"
               value="if (event.target.tagName == 'treecell') 
                        parentNode.selectItemRange(null, event.target.parentNode.parentNode);"/>
      <handler type="click" shift="false" primary="false" clickcount="2">
      <![CDATA[
         if (event.target.tagName == 'treecell') {
           var n = event.target.parentNode.parentNode;
           if ((n.getAttribute('container') == 'true') &&
               (n.getAttribute('empty') != 'true')) {
             if (n.getAttribute('open') == 'true')
               n.removeAttribute('open');
             else n.setAttribute('open', 'true');
           }
         }
      ]]>
      </handler>
      <handler type="click" shift="false" primary="false">
      <![CDATA[
         if (event.target.getAttribute('twisty') == 'true') {
           var n = event.target.parentNode.parentNode.parentNode;
           if ((n.getAttribute('container') == 'true') &&
               (n.getAttribute('empty') != 'true')) {
             if (n.getAttribute('open') == 'true')
               n.removeAttribute('open');
             else n.setAttribute('open', 'true');
           }
         }
      ]]>
      </handler>
      
    </handlers>
  </binding>
              
  <binding id="treecell-indented-folder">
    <content autostretch="never">
      <xul:treeindentation/>
      <xul:image class="tree-cell-twisty" twisty="true" allowevents="true"/>
      <xul:image class="tree-cell-primary-icon" inherits="src"/>
      <xul:text class="tree-cell-text" inherits="crop,value,align" flex="1" crop="right"/>
    </content>
  </binding>
  
  <binding id="treecell-indented-leaf">
    <content autostretch="never">
      <xul:treeindentation/>
      <xul:image class="tree-cell-primary-icon" inherits="src"/>
      <xul:text class="tree-cell-text" inherits="crop,value,align" flex="1" crop="right"/>
    </content>
  </binding>

  <binding id="treecell-iconic">
    <content autostretch="never">
      <xul:image class="tree-cell-icon" inherits="src"/>
      <xul:text class="tree-cell-text" inherits="crop,value,align" flex="1" crop="right"/>
    </content>
  </binding>

  <binding id="treecell-image">
    <content autostretch="never">
      <xul:image class="tree-cell-image" inherits="src"/>
    </content>
  </binding>
  
  <binding id="treecell">
    <content autostretch="never">
      <xul:text class="tree-cell-text" inherits="crop,value,align" flex="1" crop="right"/>
    </content>
  </binding>
  
  <binding id="treecell-header">
    <content autostretch="never">
      <xul:image class="tree-header-image" inherits="src"/>
      <xul:text class="tree-header-text" inherits="crop,value" flex="1" crop="right"/>
      <xul:image class="tree-header-sortdirection"/>
    </content>
  </binding>

  <binding id="listbox" extends="xul:tree">
    <content>
      <xul:cols>
        <xul:col flex="1"/>
      </xul:cols>
      <xul:treerows>
        <xul:treerows>
          <children includes="listhead"/>
          <xul:treechildren>
            <children/>
          </xul:treechildren>
        </xul:treerows>
      </xul:treerows> 
    </content>    
  </binding>

  <binding id="listhead" extends="xul:treehead">
    <content>
      <xul:treerow>
        <xul:treecell inherits="value" class="listcell-header"/>
      </xul:treerow>
    </content>
  </binding>

  <binding id="listitem" extends="xul:treeitem">
    <content>
      <xul:treerow>
        <xul:treecell inherits="value" class="listcell-text"/>
      </xul:treerow>
    </content>
  </binding>

</bindings>

