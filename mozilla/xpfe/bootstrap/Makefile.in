#
# The contents of this file are subject to the Netscape Public License
# Version 1.0 (the "NPL"); you may not use this file except in
# compliance with the NPL.  You may obtain a copy of the NPL at
# http://www.mozilla.org/NPL/
#
# Software distributed under the NPL is distributed on an "AS IS" basis,
# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the NPL
# for the specific language governing rights and limitations under the
# NPL.
#
# The Initial Developer of this code under the NPL is Netscape
# Communications Corporation.  Portions created by Netscape are
# Copyright (C) 1998 Netscape Communications Corporation.  All Rights
# Reserved.
#

DEPTH		= ../..
topsrcdir	= @top_srcdir@
srcdir		= @srcdir@
VPATH		= @srcdir@

PROGRAM		= apprunner
MODULE		= apprunner

include $(DEPTH)/config/autoconf.mk

TOOLKIT_GFX_LIB		= -lgfx$(MOZ_TOOLKIT)
TOOLKIT_WIDGET_LIB	= -lwidget$(MOZ_TOOLKIT)
TOOLKIT_BASE_LIB	= -lgmbase$(MOZ_TOOLKIT)
TOOLKIT_CFLAGS		= -DWIDGET_DLL=\"libwidget$(MOZ_TOOLKIT).$(DLL_SUFFIX)\" \
			  -DGFXWIN_DLL=\"libgfx$(MOZ_TOOLKIT).$(DLL_SUFFIX)\" \
			  $(TK_CFLAGS)

LIBS = \
	-L$(DIST)/bin	\
	-lnsappshell	\
	-lxpcom		\
	-lraptorbase	\
	$(TOOLKIT_WIDGET_LIB)\
	-lraptorgfx	\
	$(TOOLKIT_GFX_LIB)\
	-lgfxps         \
	$(TOOLKIT_BASE_LIB)\
	-lreg		\
	-labouturl	\
	-lhttpurl	\
	-lsockstuburl 	\
	-lfileurl	\
	-lgophurl	\
	-lftpurl	\
	-lremoturl	\
	-lxp		\
	-lnetcache	\
	-lnetcnvts	\
	-lmimetype	\
	-lnetwork	\
	-lnetlib	\
	-lraptorwebwidget	\
	-lraptorhtmlpars	\
	-lexpat \
	-lxmltok \
	-ljsdom		\
	-ljsurl		\
	-lraptorbase	\
	-lsecfree	\
	-l$(MOZ_LIB_JS_PREFIX)js		\
	$(JSJ_LIB)	\
	-lpref		\
	-limg		\
	-l$(MOZ_LIB_UTIL_PREFIX)util	\
	-lxp		\
	-lxpcom		\
	$(ZLIB_LIBS)	\
	$(NSPR_LIBS)	\
	-lpwcac		\
	$(TK_LIBS)	\
	$(NULL)

CPPSRCS = \
	nsAppRunner.cpp 	\
	nsSetupRegistry.cpp	\
	nsUnixStubs.cpp		\
	$(NULL)

include $(topsrcdir)/config/rules.mk

CXXFLAGS	+= $(TOOLKIT_CFLAGS)

install:: $(srcdir)/mozilla-apprunner.sh
	$(INSTALL) $< $(DIST)/bin
