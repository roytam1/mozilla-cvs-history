<?xml version="1.0"?> 
<window xmlns:html="http://www.w3.org/TR/REC-html40">
<window xmlns:xul ="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"> 
<?xml-stylesheet href="xul.css" type="text/css"?> 
<!DOCTYPE window> 

<script LANGUAGE="JavaScript">

function SendMailMessage()
{
  var appCore = AppCoresManager.Find("MailCore");
  if (appCore==null) {
    appCore = new MailCore();
    if (appCore != null) {
      appCore.Init("MailCore");
	    appCore.MailCompleteCallback("MailSent()");
	    appCore.SetWindow(window);
	    appCore.SendMail(document.forms[0].elements[1].value, document.forms[0].elements[2].value, document.forms[0].elements[4].value);
    } 
  } else {
	  appCore.SendMail(document.forms[0].elements[1].value, document.forms[0].elements[2].value, document.forms[0].elements[4].value);
  }
  
}

function MailSent()
{

	// Clear Them
	  document.forms[0].elements[1].value = "";
	  document.forms[0].elements[2].value = "";
	  document.forms[0].elements[4].value = "";

    /*dump("top name: "+top.name+"\n");
	  if (window.parent.frames[2] != null) {
		  dump("frame[2] name: "+window.parent.frames[2].name+"\n");
		  var parent = window.parent.frames[0].parent;
		  dump("parent name: "+parent.name+"\n");
		  var doc = window.parent.frames[2].document;
		  var win = window.parent.frames[2];
		  if (doc != null) {
		    //dump("Doc name: "+doc.name);
		    doc.elements[8].value = "xxxxxx";
		  } else {
		    dump("doc was null\n");
		  }
      } else {
	    dump("parent is null\n");
	  }*/
}

</script>


<window>
  <xul:commands>
    <xul:command name="nsCmd:MailSendMsg" onCommand="SendMailMessage()"/>
    <xul:command name="nsCmd:BrowserForward" onCommand="window.forward();"/>
    <xul:command name="nsCmd:BrowserReload" onCommand="window.reload();"/>
    <xul:command name="nsCmd:BrowserStop" onCommand="window.stop();"/>
    <xul:command name="nsCmd:BrowserHome" onCommand="window.home();"/>
    <xul:command name="nsCmd:BrowserPrint" onCommand="window.print();"/>
    <!-- other parameters of command are assumed to have
      some useful initial value -->
  </xul:commands>
  
  <xul:toolbox> 
   
    <xul:toolbar>
          <html:button cmd="nsCmd:MailSendMsg" style="background-color:rgb(192,192,192);">
                          <html:img src="resource:/res/toolbar/Mail_SendMsg.gif"/><html:BR/>Send
          </html:button>
          <html:button cmd="nsCmd:MailGetMsg" style="background-color:rgb(192,192,192);">
                          <html:img src="resource:/res/toolbar/Mail_GetMsg.gif"/><html:BR/>GetMsg
          </html:button>
          <html:button cmd="nsCmd:MailNewMsg" style="background-color:rgb(192,192,192);">
                          <html:img src="resource:/res/toolbar/Mail_NewMsg.gif"/><html:BR/>New Msg
          </html:button>
          <html:button cmd="nsCmd:MailReply" style="background-color:rgb(192,192,192);">
                          <html:img src="resource:/res/toolbar/Mail_Reply.gif"/><html:BR/>Reply
          </html:button>
          <html:button cmd="nsCmd:MailForward" style="background-color:rgb(192,192,192);">
                          <html:img src="resource:/res/toolbar/Mail_Forward.gif"/><html:BR/>Forward
          </html:button>
          <html:button cmd="nsCmd:BrowserPrint" style="background-color:rgb(192,192,192);">
                          <html:img src="resource:/res/toolbar/TB_Print.gif"/><html:BR/>Print
          </html:button>
          <html:a style="position:relative; direction:rtl; right:3; top: 2px;" href="http://www.netscape.com">
                  <html:img alt="Throbber!" border=0 src="resource:/res/throbber/anims00.gif"/>
          </html:a>
    </xul:toolbar>
    
    <xul:toolbar>
		<html:FORM>
    	<html:SELECT style="width:200px;">
		<html:OPTION>INBOX</HTML:OPTION>
		</html:SELECT>
		</html:FORM>
    </xul:toolbox>
    
  </xul:toolbox>
  
</window>

