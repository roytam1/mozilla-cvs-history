<?xml version="1.0"?> 
<?xml-stylesheet href="xul.css" type="text/css"?> 
<?xml-stylesheet href="navigator.css" type="text/css"?> 

<!DOCTYPE window> 

<window id="main-window" xmlns:html="http://www.w3.org/TR/REC-html40"
			  xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
			  onload="Startup()" title="Editor">

  <html:script>
  function Startup()
  {
    dump("Doing Startup...\n");
    appCore = XPAppCoresManager.Find("EditorAppCore");  
    dump("Looking up EditorAppCore...\n");
    if (appCore == null) {
      dump("Creating EditorAppCore...\n");
      appCore = new EditorAppCore();
      if (appCore != null) {
        dump("EditorAppCore has been created.\n");
		appCore.Init("EditorAppCore");
		appCore.setContentWindow(window.frames[0]);
		appCore.setWebShellWindow(window);
		appCore.setToolbarWindow(window);
		dump("Adding EditorAppCore to AppCoreManager...\n");
		/* XPAppCoresManager.Add(appCore);  */
      }
    } else {
      dump("EditorAppCore has already been created! Why?\n");
    }
  }

  function EditorBold()
  {
    appCore = XPAppCoresManager.Find("EditorAppCore");  
    if (appCore != null) {
	    dump("Applying bold\n");
      appCore.setAttribute("bold", "");
    } else {
      dump("EditorAppCore has not been created!\n");
    }
  }

  function EditorGetText()
  {
    appCore = XPAppCoresManager.Find("EditorAppCore");  
    if (appCore != null) {
			var	outputText = appCore.contentsAsText;
			dump(outputText + "\n");
    } else {
      dump("EditorAppCore has not been created!\n");
    }
  }

  function EditorGetHTML()
  {
    appCore = XPAppCoresManager.Find("EditorAppCore");  
    if (appCore != null) {
			var	outputText = appCore.contentsAsHTML;
			dump(outputText + "\n");
    } else {
      dump("EditorAppCore has not been created!\n");
    }
  }

  function EditorUndo()
  {
    appCore = XPAppCoresManager.Find("EditorAppCore");  
    if (appCore != null) {
	    dump("Undoing\n");
      appCore.undo();
    } else {
      dump("EditorAppCore has not been created!\n");
    }
  }

  function EditorRedo()
  {
    appCore = XPAppCoresManager.Find("EditorAppCore");  
    if (appCore != null) {
	    dump("Redoing\n");
      appCore.redo();
    } else {
      dump("EditorAppCore has not been created!\n");
    }
  }

	function EditorCut()
  {
    appCore = XPAppCoresManager.Find("EditorAppCore");  
    if (appCore != null) {
	    dump("Cutting\n");
      appCore.cut();
    } else {
      dump("EditorAppCore has not been created!\n");
    }
  }

	function EditorCopy()
  {
    appCore = XPAppCoresManager.Find("EditorAppCore");  
    if (appCore != null) {
	    dump("Copying\n");
      appCore.copy();
    } else {
      dump("EditorAppCore has not been created!\n");
    }
  }

	function EditorPaste()
  {
    appCore = XPAppCoresManager.Find("EditorAppCore");  
    if (appCore != null) {
	    dump("Pasting\n");
      appCore.paste();
    } else {
      dump("EditorAppCore has not been created!\n");
    }
  }

	function EditorSelectAll()
  {
    appCore = XPAppCoresManager.Find("EditorAppCore");  
    if (appCore != null) {
	    dump("Selecting all\n");
      appCore.selectAll();
    } else {
      dump("EditorAppCore has not been created!\n");
    }
  }

	function EditorInsertText()
  {
    appCore = XPAppCoresManager.Find("EditorAppCore");  
    if (appCore != null) {
	    dump("Inserting text\n");
      appCore.insertText("Once more into the breach, dear friends.\n");
    } else {
      dump("EditorAppCore has not been created!\n");
    }
  }

  function EditorInsertLink()
  {
    appCore = XPAppCoresManager.Find("EditorAppCore");  
    if (appCore != null) {
      dump("Inserting link\n");
      appCore.insertLink();
    } else {
      dump("EditorAppCore has not been created!\n");
    }
  }

  function EditorInsertImage()
  {
    appCore = XPAppCoresManager.Find("EditorAppCore");  
    if (appCore != null) {
      dump("Inserting image\n");
      appCore.insertImage();
    } else {
      dump("EditorAppCore has not been created!\n");
    }
  }

  function EditorExit()
  {
    appCore = XPAppCoresManager.Find("EditorAppCore");  
    if (appCore != null) {
	    dump("Exiting\n");
      appCore.exit();
    } else {
      dump("EditorAppCore has not been created!\n");
    }
  }

 function EditorPrintPreview() {
    var toolkitCore = XPAppCoresManager.Find("ToolkitCore");
    if (!toolkitCore) {
      toolkitCore = new ToolkitCore();
      if (toolkitCore)
        toolkitCore.Init("ToolkitCore");
    }
    if (toolkitCore) {
      toolkitCore.ShowWindow("resource:/res/samples/printsetup.html", window);
    }
  }
  </html:script>

  <broadcaster id="canGoBack"/>
  <broadcaster id="canGoForward"/>
  <broadcaster id="canReload"/>
  <broadcaster id="canStop"/>
  <broadcaster id="canPrint"/>
  
  <menubar>
    <menu name="File">
      <menuitem name="New Window" onclick=""/>
      <menuitem name="Change Icons" onclick=""/>
      <separator />
      <menuitem name="Print Setup" onclick=""/>
      <menuitem name="Print Preview" onclick="EditorPrintPreview()"/>
      <menuitem name="Print" onclick=""/>
      <separator />
      <menuitem name="Close" onclick=""/>
      <menuitem name="Exit" onclick="EditorExit()"/>
    </menu>

    <menu name="Edit">
      <menuitem name="Undo" onclick="EditorUndo()"/>
      <menuitem name="Redo" onclick="EditorRedo()"/>
      <separator />
      <menuitem name="Cut" onclick="EditorCut()"/>
      <menuitem name="Copy" onclick="EditorCopy()"/>
      <menuitem name="Paste" onclick="EditorPaste()"/>
      <menuitem name="Clear" onclick=""/>
      <separator />
      <menuitem name="Select All" onclick="EditorSelectAll()"/>
      <separator />
      <menuitem name="Insert" onclick="EditorInsertText()"/>
   </menu>

    <menu name="View">
      <menuitem name="Hide Composition Toolbar" onclick=""/>
      <menuitem name="Hide Format Toolbar" onclick="" />
    </menu>
 
    <menu name="Insert">
      <menuitem name="Link..." onclick="EditorInsertLink()"/>
      <menuitem name="Target..." onclick=""/>
      <menuitem name="Image..." onclick="EditorInsertImage()"/>
      <menuitem name="Horizontal Line" onclick=""/>
      <menuitem name="Table" onclick=""/>
      <menuitem name="HTML Tag..." onclick=""/>
      <separator />
      <menuitem name="Line Break" onclick=""/>
      <menuitem name="Break Below Image(s)" onclick=""/>
    </menu>

    <menu name="Format">
      <menuitem name="Font" onclick=""/>
      <menuitem name="Size" onclick=""/>
      <menuitem name="Style" onclick=""/>
      <menuitem name="Color..." onclick=""/>
      <menuitem name="Remove All Style(s)" onclick=""/>
      <separator />
      <menuitem name="Heading" onclick=""/>
    </menu>
    <menu name="Tools">
      <menuitem name="Spell Check" onclick=""/>
    </menu>
    <menu name="Debug">
      <menuitem name="Output Text" onclick="EditorGetText()"/>
      <menuitem name="Output HTML" onclick="EditorGetHTML()"/>
    </menu>
    <menu name="Help">
      <menuitem name="About" onclick=""/>
    </menu>

  </menubar>
  
  <box id="outer-box" align="vertical">
  <toolbox>
  
    <toolbar>
	    <titledbutton src="resource:/res/toolbar/ED_Undo.gif"
	    				align="bottom" value="Undo"
	    				onclick="EditorUndo()">
	    </titledbutton>
	    
	    <titledbutton src="resource:/res/toolbar/ED_Redo.gif"
	    				align="bottom" value="Redo"
	    				onclick="EditorRedo()">
	    </titledbutton>
	    
	    <titledbutton src="resource:/res/toolbar/ED_Cut.gif"
	    			align="bottom" value="Cut"
	    			onclick="EditorCut()">
	    </titledbutton>
	    
	    <titledbutton src="resource:/res/toolbar/ED_Copy.gif"
	    			align="bottom" value="Copy"
	    			onclick="EditorCopy()">
	    </titledbutton>
	    
	    <titledbutton src="resource:/res/toolbar/ED_Paste.gif"
	    			align="bottom" value="Paste"
	    			onclick="EditorPaste()">
	    </titledbutton>
	    
	    <titledbutton src="resource:/res/toolbar/ED_Bullets.gif"
	    			align="bottom" value="InsertStuff"
	    			onclick="EditorInsertText()">
	    </titledbutton>

	    <titledbutton src="resource:/res/toolbar/ED_Table.gif"
	    			align="bottom" value="Get HTML"
	    			onclick="EditorGetHTML()">
	    </titledbutton>
	    
	    <titledbutton src="resource:/res/toolbar/ED_Spell.gif"
	    		align="bottom" value="Get Text"
	    		onclick="EditorGetText()">
	    </titledbutton>

	    <titledbutton src="resource:/res/toolbar/ED_Bold.gif"
	    		align="bottom" value="Bold"
	    		onclick="EditorBold()">
	    </titledbutton>

    </toolbar>

		<!-- Having so many buttons made loading v. slow. Commented out for now.
    <toolbar>
	    <titledbutton src="resource:/res/toolbar/ED_Find.gif" align="bottom" value="" onclick="EditorUndo()">	</titledbutton>
	    <titledbutton src="resource:/res/toolbar/ED_Link.gif" align="bottom" value="" onclick="EditorUndo()">	</titledbutton>
	    <titledbutton src="resource:/res/toolbar/ED_Target.gif" align="bottom" value="" onclick="EditorUndo()">	</titledbutton>
	    <titledbutton src="resource:/res/toolbar/ED_Image.gif" align="bottom" value="" onclick="EditorUndo()">	</titledbutton>
	    <titledbutton src="resource:/res/toolbar/ED_HLine.gif" align="bottom" value="" onclick="EditorUndo()">	</titledbutton>

	    <titledbutton src="resource:/res/toolbar/ED_Bold.gif" align="bottom" value="" onclick="EditorBold()">	</titledbutton>
	    <titledbutton src="resource:/res/toolbar/ED_Underline.gif" align="bottom" value="" onclick="EditorUndo()">	</titledbutton>
	    <titledbutton src="resource:/res/toolbar/ED_Indent.gif" align="bottom" value="" onclick="EditorUndo()">	</titledbutton>
	    <titledbutton src="resource:/res/toolbar/ED_Dedent.gif" align="bottom" value="" onclick="EditorUndo()">	</titledbutton>
	    <titledbutton src="resource:/res/toolbar/ED_Bullets.gif" align="bottom" value="" onclick="EditorUndo()">	</titledbutton>
	    <titledbutton src="resource:/res/toolbar/ED_Numbers.gif" align="bottom" value="" onclick="EditorUndo()">	</titledbutton>
	    <titledbutton src="resource:/res/toolbar/ED_Left.gif" align="bottom" value="" onclick="EditorUndo()">	</titledbutton>
	    <titledbutton src="resource:/res/toolbar/ED_Center.gif" align="bottom" value="" onclick="EditorUndo()">	</titledbutton>
	    <titledbutton src="resource:/res/toolbar/ED_Right.gif" align="bottom" value="" onclick="EditorUndo()">	</titledbutton>
    </toolbar>
		-->
    
  </toolbox>

  <html:iframe id="content-frame" html:name="content" html:src="EditorInitPagePlain.html" flex="100%" />

  <box align="horizontal" id="status-bar">

  <toolbox>
	  <toolbar id="taskbar">
	  	  <box align="horizontal">
  	 	     <titledbutton align="left" class="popup"  value="Web" />
  	 	     <titledbutton align="left" class="popup"  value="Mail" />
  	 	     <titledbutton align="left" class="popup"  value="Chat" />
		  </box>
		  <spring flex="100%"/>
	 	  <box align="horizontal">
  	 		<titledbutton align="left"  class="popup"  value="DayPlanner" />
  	 		<titledbutton align="left"  class="popup"  value="Shopping" />
  	 		<titledbutton align="left"  class="popup"  value="My Desk" />
          </box>
		  <spring flex="100%"/>
	   	  <box align="horizontal">
  			<titledbutton align="left" class="popup" value="Open Windows" />
  	 		<titledbutton align="left" id="mini-nav" value="" />
  	 		<titledbutton align="left" id="mini-mail" value="" onclick="OpenMessenger()"/>
  	 		<titledbutton align="left" id="mini-addr" value="" />
  	 		<titledbutton align="left" id="mini-comp" value="" />
	      </box>
	  </toolbar>
	</toolbox>
	
  </box>
  
  </box>
</window>


