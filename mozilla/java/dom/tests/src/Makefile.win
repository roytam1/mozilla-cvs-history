#!nmake
#
# The contents of this file are subject to the Mozilla Public
# License Version 1.1 (the "License"); you may not use this file
# except in compliance with the License. You may obtain a copy of
# the License at http://www.mozilla.org/MPL/
#
# Software distributed under the License is distributed on an "AS
# IS" basis, WITHOUT WARRANTY OF ANY KIND, either express or
# implied. See the License for the specific language governing
# rights and limitations under the License.
#
# The Original Code is mozilla.org code.
#
# The Initial Developer of the Original Code is Sun Microsystems,
# Inc. Portions created by Sun are
# Copyright (C) 1999 Sun Microsystems, Inc. All
# Rights Reserved.
#
# Contributor(s):


HOMEDIR=..
SRCDIR=$(HOMEDIR)\src
CLASSDIR=$(HOMEDIR)\classes

JAVAC=javac
TESTPACKAGE=org\mozilla\dom\test
DOMPACKAGE=org\mozilla\dom

GENERATOR_FILES=BWJavaTemplate.java \
	ReflectionTest.java \
	ParamCombination.java	

JAVAFILES= Execution.java \
	   BWBaseTest.java \
	   TestLoader.java \
	   ParamCombination.java \
	   ReflectionTest.java \
	   BWTestThread.java \
	   BWJavaTemplate.java


DOMFILE=DOMAccessor.java \
	DocumentImpl.java 

all: testloader accessor
	@echo done
	@cd api
	@nmake -f Makefile.win

testloader:
	@echo "******************************************************"
	@echo "Make changes to $(SRCDIR)\mozilla.bat"
	@echo "and execute it else it may not compile..."
	@echo "******************************************************"
	@echo ""
	@echo Building test accessory classes ...		
	@$(JAVAC) -d $(CLASSDIR) $(JAVAFILES) 


accessor:
!if !defined(USE_APPLET_FOR_REGISTRATION)
	@echo Building DOMAccessor ...
	@$(JAVAC) -d $(CLASSDIR) $(DOMFILE) 
!endif
	

generator:
	javac $(GENERATOR_FILES) -d $(CLASSDIR)

clean:
	del /f/q $(CLASSDIR)\$(TESTPACKAGE)\*.class
	del /f/q $(CLASSDIR)\$(DOMPACKAGE)\*.class  

	
	
	
