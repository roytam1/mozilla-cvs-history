#//------------------------------------------------------------------------
#//
#// Makefile to build OJI
#//
#//------------------------------------------------------------------------

DEPTH        = ../../..
topsrcdir	= @top_srcdir@
srcdir		= @srcdir@
VPATH		= @srcdir@

include $(DEPTH)/config/autoconf.mk

include $(topsrcdir)/config/config.mk

MODULE		= ojiimpl

ifdef MOZ_OJI
LIBRARY_NAME	= oji

CPPSRCS         = jvmmgr.cpp \
                  scd.cpp  \
                  nsJVMManager.cpp	 \
                  nsJVMPluginTagInfo.cpp \
                  ProxyJNI.cpp \
                  nsCSecurityContext.cpp \
                  nsCJVMManagerFactory.cpp \
                  lcglue.cpp 


REQUIRES	= img java js lay layer plugin plugimpl pref style util xpcom raptor oji caps

ifeq ($(NSPR_INCLUDE_DIR),)
INCLUDES +=		-I$(DIST)/include/private
else
INCLUDES +=		-I$(NSPR_INCLUDE_DIR)/private
endif

CFLAGS += -DJSJDLL=\"$(JSJDLL)\" 
endif # MOZ_OJI

EXPORTS         = jvmmgr.h	 \
		  nsJVMManager.h \
		  nsJVMPluginTagInfo.h

EXPORTS 	:= $(addprefix $(srcdir)/, $(EXPORTS))

include $(topsrcdir)/config/rules.mk

