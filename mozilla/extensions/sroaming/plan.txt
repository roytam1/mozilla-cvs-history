- conflict
  - listing transfer
    - FTP: downloaded file is empty (fixed?)
    - save login from listing transfer for main transfer (fixed?)
    - progress feedback and error reporting
  - some files failed (see XXX - update: eh, where was that?)
  - fix dialog
    - column headings
    - width
    - resize for new listing.xml entry
- Bugs
  - trunk: upload - netlib offline because of dyn. profile change feature
    - ftp: offline
    - http: not initialized
  - overwriting local files, if login is incorrect?
  - some files never "finish" (compare feedback below)
- error handling
  - files deleted on server / server changed. listing-uploaded no longer true
  - (local profile) files missing
  - pressing cancel after finished with failed, all files are set to abort
  - copy protocol
    - no remote files yet
- world gone
  - problem: ddump, xpcom not defined after files done and dialog closed
    solution: close dialog only when done with processing.
    workaround: gTimeout
  - problem: cancel by user in progress dialog: xpconnect errors
    solution: prevent dialog closure (even if cancel pressed) until we're done.

Later:
- nsiprogresseventsink comment
- license headers
- nsresult for internal functions, clean up interfaces
- warn before saving pw
- alert() -> nsiprompt
- remove printfs
- XXXs

Enhance
- protocols
  - HTTPS
  - LDAP (already done by Sun? :-) )
  - IMAP
- password encrypt
- rewrite progress dialog
- no upload at switch profile
- don't transfer files that didn't change (server = local)
  (actually happens in RL?)

roaming urls
 <ftp://user@ftp-server//path/to/dir/>
 <http://user@http-server/path/to/dir/>
 Mind the number of slashes.
 Servers used: wu-FTPd and Apache with mod_roaming.


Feedback
- why do I need to implement nsIDocShellTreeItem for a http xml file *download*?
- onStopRequest (Request: http://ben:pgpben@http.server.bucksch.org/roaming/ben/listing.xml, StatusCode: NS_OK, HTTPResponse 200) called *before*  the file finished.

clipboard

undefined.message=Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIURI.password]
undefined.result=2147500037
undefined.name=NS_ERROR_FAILURE
undefined.filename=chrome://sroaming/content/transfer/transfer.js
undefined.lineNumber=225
undefined.columnNumber=4294967295

WARNING: NS_ENSURE_TRUE(!aQualifiedName.IsEmpty()) failed, file ../../../../mozilla/content/base/src/nsNodeInfoManager.cpp, line 287
