#
# The contents of this file are subject to the Netscape Public License
# Version 1.0 (the "NPL"); you may not use this file except in
# compliance with the NPL.  You may obtain a copy of the NPL at
# http://www.mozilla.org/NPL/
#
# Software distributed under the NPL is distributed on an "AS IS" basis,
# WITHOUT WARRANTY OF ANY KIND, either express or implied. See the NPL
# for the specific language governing rights and limitations under the
# NPL.
#
# The Initial Developer of this code under the NPL is Netscape
# Communications Corporation.  Portions created by Netscape are
# Copyright (C) 1998 Netscape Communications Corporation.  All Rights
# Reserved.
#

DEPTH		= ../..
topsrcdir	= @top_srcdir@
srcdir		= @srcdir@
VPATH		= @srcdir@

include $(DEPTH)/config/autoconf.mk

MODULE		= xpcom
XPIDL_MODULE	= xpcom_ds
LIBRARY_NAME	= xpcomds_s

REQUIRES	= xpcom uconv unicharutil

CPPSRCS		= \
		nsArena.cpp \
		nsAtomTable.cpp \
		nsAVLTree.cpp \
		nsByteBuffer.cpp \
		nsCRT.cpp \
		nsConjoiningEnumerator.cpp \
		nsDeque.cpp \
		nsEmptyEnumerator.cpp \
		nsEnumeratorUtils.cpp \
		nsHashtable.cpp \
		nsHashtableEnumerator.cpp \
		nsObserver.cpp \
		nsObserverList.cpp \
		nsObserverService.cpp \
		nsPageMgr.cpp \
		nsProperties.cpp \
		nsQuickSort.cpp \
		nsSizeOfHandler.cpp \
		nsStr.cpp \
		nsString.cpp \
		nsString2.cpp \
		nsSupportsArray.cpp \
		nsSupportsArrayEnumerator.cpp \
		nsSupportsPrimitives.cpp \
		nsUnicharBuffer.cpp \
		nsVariant.cpp \
		nsVoidArray.cpp \
		nsXPIDLString.cpp \
		plvector.cpp \
		nsTextFormater.cpp \
		$(NULL)

EXPORTS		= \
		nsAVLTree.h \
		nsCppSharedAllocator.h \
		nsCRT.h \
		nsDeque.h \
		nsEnumeratorUtils.h \
		nsHashtable.h \
		nsHashtableEnumerator.h \
		nsIArena.h \
		nsIByteBuffer.h \
		nsIObserverList.h \
		nsIPageManager.h \
		nsIProperties.h \
		nsISimpleEnumerator.h \
		nsISizeOfHandler.h \
		nsIUnicharBuffer.h \
		nsIVariant.h \
		nsInt64.h \
		nsQuickSort.h \
		nsStr.h \
		nsString.h \
		nsString2.h \
		nsSupportsPrimitives.h \
		nsTime.h \
		nsUnitConversion.h \
		nsVector.h \
		nsVoidArray.h \
		nsXPIDLString.h \
		plvector.h \
		nsTextFormater.h \
		$(NULL)			

XPIDLSRCS	= \
		nsIAtom.idl \
		nsICollection.idl \
		nsIEnumerator.idl \
		nsIObserver.idl \
		nsIObserverService.idl \
		nsISupportsArray.idl \
		nsISupportsPrimitives.idl \
		$(NULL)

EXPORTS		:= $(addprefix $(srcdir)/, $(EXPORTS))

# we don't want the shared lib, but we want to force the creation of a static lib.
override NO_SHARED_LIB=1
override NO_STATIC_LIB=

include $(topsrcdir)/config/rules.mk

DEFINES		+= -D_IMPL_NS_COM -D_IMPL_NS_BASE

