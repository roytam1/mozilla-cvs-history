DEPTH	= ../../..
srcdir	= @srcdir@
ldaptopsrcdir = @top_srcdir@

SRCDIRS	= build include libraries

include build/autoconf.mk
include $(NSPR_TREE)/config/rules.mk

all export::	FORCE
	@for i in $(SRCDIRS); do \
	    echo "  cd $$i; $(MAKE) $(MFLAGS) export"; \
	    ( cd $$i; $(MAKE) $(MFLAGS) export ); \
	done

libs install::	FORCE
	@for i in $(SRCDIRS); do \
	    echo "cd $$i; $(MAKE) $(MFLAGS) install"; \
	    ( cd $$i; $(MAKE) $(MFLAGS) install ); \
	done

clean clobber::	FORCE
	@for i in $(SRCDIRS); do \
	    echo "cd $$i; $(MAKE) $(MFLAGS) clean"; \
	    ( cd $$i; $(MAKE) $(MFLAGS) clean ); \
	done

realclean clobber_all::	FORCE
	@for i in $(SRCDIRS); do \
	    echo "cd $$i; $(MAKE) $(MFLAGS) realclean"; \
	    ( cd $$i; $(MAKE) $(MFLAGS) realclean ); \
	done

# dummy target to allow platforms without a compiler-based depend (like GCC 
# has) to call "make depend" here and not fail, at the cost of actual
# dependencies on such builds possibly being incorrect.  A nasty hack, but 
# this build system is going away soon.
#
depend:

FORCE:

