<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=x-mac-roman">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (WinNT; I) [Netscape]">
   <META NAME="KeyWords" CONTENT="client, source, documentation">
   <META NAME="Author" CONTENT="Kipp E.B. Hickman">
   <TITLE>NGLayout Windows Build Instructions</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<H2>
<FONT FACE="Arial,Helvetica">NGLayout Windows Build Instructions</FONT></H2>
This document explains how to build NGLayout for the Windows platform.&nbsp;
<HR><B><FONT SIZE=+1>Required Tools:</FONT></B>
<UL>
<LI>
<B>Microsoft Visual C++ version 4.2 or later</B></LI>

<LI>
<B>The same set of tools for building <A HREF="http://www.mozilla.org/docs/tplist/catBuild/winbuild.htm">Mozilla</A></B></LI>
</UL>
<B><FONT SIZE=+1>Setting up:</FONT></B>
<UL>
<LI>
You need a Pentium with at least a 133 MHz processor and at least 250 megs
(NTFS partition) or 500 megs (FAT partition) of hard drive space. You need
to have a minimum of 64 megs of memory in order to build this tree. These
numbers are approximations.</LI>

<LI>
The preferred platform is NT 4.0. NT 3.51 will also work, and Win95 might
work if you're lucky. Maybe.</LI>

<LI>
Install MSVC. If you don't choose to have the MSVC install modify your
environment variables for PATH, INCLUDE, and LIB information, be sure to
run VCVARS32.BAT out of the MSVC bin directory prior to attempting to build.</LI>

<LI>
Download and install GNU tools. Put them in your path.</LI>

<LI>
Install NGLayout source.</LI>

<UL>
<LI>
cd &lt;your-source-area></LI>

<LI>
unzip -o -q win-19980415.zip</LI>
</UL>

<LI>
There are several environment variables you will need to set, either manually
or via a script within a command session, or by setting them in your system
environment located through the Control Panel | System icon.</LI>


<P>&nbsp;<B>Note: There is an additional variable for building NGLayout!
Use this list carefully!</B>

<P>&nbsp;The variables are:
<UL>
<LI>
set MOZ_BITS=32</LI>

<LI>
set MOZ_DEBUG=1 (don't set this if you want to build an optimized release
build)</LI>

<LI>
set MOZ_GOLD=1</LI>

<LI>
set MOZ_MEDIUM=1</LI>

<LI>
set MOZ_NT=351 (if running NT 3.51, don't set otherwise)</LI>

<LI>
set MOZ_OUT=(location of resulting executable and totally optional, see
Notes for more details)</LI>

<LI>
set MOZ_SRC=(top of your tree, drive letter and path, i.e. set MOZ_SRC=d:\mozilla_src.
The topmost directory under this should be mozilla)</LI>

<LI>
set MOZ_TOOLS=(location of the bin directory containing your GNU tools.
The build looks for MOZ_TOOLS\bin\gmake.exe, so make sure your MOZ_TOOLS
is figured appropriately)</LI>

<LI>
set NO_SECURITY=1</LI>

<LI>
set NSPR20=1</LI>

<LI>
if you are running VC++ 5.0 or higher: set _MSC_VER=1100; if you are running
VC++ 4.2 then set MOZ_VCVER=42</LI>

<LI>
<B>set STANDALONE_IMAGE_LIB=1</B></LI>

<LI>
<B>set MODULAR_NETLIB=1</B></LI>
</UL>
</UL>
<B><FONT SIZE=+1>Building:</FONT></B>
<UL>
<LI>
You need to be running a vanilla command prompt. Other shells may work,
but you might have to tweak makefiles.</LI>

<LI>
<B>Build the tools:</B> This generates several tools that handle things
like dependency generation</LI>

<UL>
<LI>
cd mozilla\config</LI>

<LI>
nmake /f makefile.win</LI>
</UL>

<LI>
<B>Build the NGLayout:</B> This will do a complete build of the source
tree. You will end up with a viewer.exe at the end. The viewer.exe will
be in your dist\win32_[OD].obj\bin directory (O will be used when you don't
set MOZ_DEBUG; D will be used when you set MOZ_DEBUG).</LI>

<UL>
<LI>
cd mozilla</LI>

<LI>
nmake /f nglayout.mak</LI>
</UL>
</UL>
<B><FONT SIZE=+1>Running:</FONT></B>
<UL>
<LI>
Once you have built the system, do this to run the viewer program (the
viewer program is a simple test program that uses the nsIWebWidget API
to embed a web widget object). The viewer program has a few basic menu
items, include "Samples" which load sample tests.</LI>

<UL>
<LI>
cd mozilla\dist\win32_[OD].obj\bin</LI>

<LI>
.\viewer.exe</LI>
</UL>
</UL>
<B><FONT SIZE=+1>Notes:</FONT></B>
<UL>
<LI>
This build process does not use Visual C++ generated project files for
several reasons having to do with (among other things) size, maintainability,
and the long term desire to start using more of tools like gmake, or plug
and play developer tools. This does not preclude you from using the Visual
C++ IDE, or it's debugger. Once you have built a viewer.exe do this to
run it under the debugger:</LI>
</UL>

<UL>
<UL>
<LI>
cd mozilla\dist\win32_[OD].obj\bin</LI>

<LI>
msdev viewer.exe</LI>
</UL>
</UL>

<HR WIDTH="100%">
<CENTER><FONT SIZE=-1>Copyright &copy; 1998 <A HREF="http://home.netscape.com/misc/contact_info.html">Netscape
Communications Corporation</A></FONT></CENTER>
&nbsp;
</BODY>
</HTML>
